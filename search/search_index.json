{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u9996\u9875","text":"Hey! Nice to see you. <p>Welcome to my blog!  I'm Chenyk, Fullstack Developer &amp; Operations and Maintenance from \ud83c\udde8\ud83c\uddf3 China</p> Things I code with <p> </p> Open source projects \ud83c\udf81 Projects \u2b50 Stars \ud83d\udcda Forks \ud83d\udece Issues \ud83c\udf89 Release JetBrains in Alfred Workflows Generator Password With Alfred WorkFlow Get IP Info With Alfred WorkFlow Whois With Alfred WorkFlow Where to find me <p> </p>"},{"location":"index.20240102/","title":"Index.20240102","text":"Hey! Nice to see you. <p>Welcome to my blog!  I'm Chenyk, Fullstack Developer &amp; Operations and Maintenance from \ud83c\udde8\ud83c\uddf3 China</p> Things I code with <p> </p> Open source projects \ud83c\udf81 Projects \u2b50 Stars \ud83d\udcda Forks \ud83d\udece Issues \ud83c\udf89 Release JetBrains in Alfred Workflows Myself Surge Conf Generator Password With Alfred WorkFlow Get IP Info With Alfred WorkFlow Whois With Alfred WorkFlow Where to find me <p> </p>"},{"location":"k8s/install/","title":"K8S\u5b89\u88c5","text":""},{"location":"k8s/install/#1","title":"1. \u5b89\u88c5\u5bb9\u5668\u8fd0\u884c\u65f6","text":""},{"location":"k8s/install/#11","title":"1.1 \u73af\u5883\u51c6\u5907","text":"<ul> <li>\u914d\u7f6e\u514d\u5bc6\u767b\u9646</li> </ul> <pre><code>ssh-keygen -t rsa -b 4096\nssh-copy-id 172.16.105.55\n</code></pre> <ul> <li>\u914d\u7f6e\u57df\u540d\uff08hosts\uff09</li> </ul> <pre><code>hostnamectl set-hostname \n\n172.16.105.54  master01\n172.16.105.55  node01\n172.16.105.56  node02\n</code></pre> <ul> <li>\u65f6\u95f4\u540c\u6b65</li> </ul> <pre><code>ntpdate ntp1.aliyun.com\n</code></pre> <ul> <li>\u7981\u7528iptable\u548cfirewalld\u670d\u52a1</li> </ul> <pre><code>systemctl stop firewalld\nsystemctl disable firewalld\nsystemctl stop iptables\nsystemctl disable iptables\nsystemctl stop NetworkManager\nsystemctl disable NetworkManager\n</code></pre> <ul> <li>\u5173\u95edselinux</li> </ul> <pre><code># vim /etc/selinux/config\nSELINUX=disabled\n\n# \u4e34\u65f6\u5173\u95ed\nsetenforce 0\n\n# \u68c0\u67e5\ngetenforce \n</code></pre> <ul> <li>\u5173\u95edswap\u5206\u533a</li> </ul> <pre><code># \u4e34\u65f6\u5173\u95ed\nswapoff -a\n\n# \u6c38\u4e45\u5173\u95ed vim /etc/fstab\nsed -ri 's/.*swap.*/#&amp;/' /etc/fstab\n</code></pre> <ul> <li>\u8f6c\u53d1 IPv4 \u5e76\u8ba9 iptables \u770b\u5230\u6865\u63a5\u6d41\u91cf</li> </ul> <pre><code>cat &lt;&lt;EOF | sudo tee /etc/modules-load.d/k8s.conf\noverlay\nbr_netfilter\nEOF\n\ncat &lt;&lt;EOF | sudo tee /etc/sysctl.d/k8s.conf\nnet.bridge.bridge-nf-call-iptables  = 1\nnet.bridge.bridge-nf-call-ip6tables = 1\nnet.ipv4.ip_forward                 = 1\nfs.may_detach_mounts                = 1\nEOF\n\nsudo modprobe overlay\nsudo modprobe br_netfilter\n\nsudo sysctl --system\n</code></pre> <p>\u901a\u8fc7\u8fd0\u884c\u4ee5\u4e0b\u6307\u4ee4\u786e\u8ba4 <code>br_netfilter</code> \u548c <code>overlay</code> \u6a21\u5757\u88ab\u52a0\u8f7d</p> <pre><code>lsmod | grep br_netfilter\nlsmod | grep overlay\n</code></pre> <p>\u901a\u8fc7\u8fd0\u884c\u4ee5\u4e0b\u6307\u4ee4\u786e\u8ba4 <code>net.bridge.bridge-nf-call-iptables</code>\u3001<code>net.bridge.bridge-nf-call-ip6tables</code> \u548c <code>net.ipv4.ip_forward</code> \u7cfb\u7edf\u53d8\u91cf\u5728\u4f60\u7684 <code>sysctl</code> \u914d\u7f6e\u4e2d\u88ab\u8bbe\u7f6e\u4e3a 1\uff1a</p> <pre><code>sysctl net.bridge.bridge-nf-call-iptables net.bridge.bridge-nf-call-ip6tables net.ipv4.ip_forward\n</code></pre> <ul> <li>\u914d\u7f6eipvs\u529f\u80fd</li> </ul> <pre><code>yum install ipset ipvsadm -y\ncat &lt;&lt;EOF&gt; /etc/sysconfig/modules/ipvs.modules\n#!/bin/bash\nmodprobe -- ip_vs\nmodprobe -- ip_vs_rr\nmodprobe -- ip_vs_wrr\nmodprobe -- ip_vs_sh\nmodprobe -- nf_conntrack_ipv4\nEOF\n\nchmod +x /etc/sysconfig/modules/ipvs.modules\n/bin/bash /etc/sysconfig/modules/ipvs.modules\nlsmod | grep -e ip_vs -e nf_conntrack_ipv4\n</code></pre>"},{"location":"k8s/install/#12-containerd","title":"1.2 \u5b89\u88c5containerd","text":"<ul> <li>\u4e0b\u8f7dcontainerd</li> </ul> <p>\u4ece https://github.com/containerd/containerd/releases \u4e0b\u8f7d\u6700\u65b0\u7684containerd\u6587\u4ef6</p> <pre><code># \u5b89\u88c5\u524d\u51c6\u5907 \u5bb9\u5668\u6302\u8f7d\u76ee\u5f55\u8f6f\u94fe\u63a5\nmkdir -p /data/containerd\nmkdir -p /data/kubelet\nln -s /data/containerd /var/lib/containerd\nln -s /data/kubelet /var/lib/kubelet\n</code></pre> <pre><code>$ tar Cxzvf /usr/local containerd-1.7.8-linux-amd64.tar.gz\nbin/\nbin/containerd-shim-runc-v2\nbin/containerd-shim\nbin/ctr\nbin/containerd-shim-runc-v1\nbin/containerd\nbin/containerd-stress\n</code></pre> <p>\u914d\u7f6e\u81ea\u542f\u52a8</p> <pre><code># wget https://raw.githubusercontent.com/containerd/containerd/main/containerd.service\ninstall containerd.service /etc/systemd/system/\nsystemctl daemon-reload\nsystemctl enable --now containerd\n</code></pre> <ul> <li>\u5b89\u88c5runc</li> </ul> <p>\u4ece https://github.com/containernetworking/plugins/releases \u4e0b\u8f7d\u6700\u65b0\u7248\u7684runc.cmd</p> <pre><code>install -m 755 runc.amd64 /usr/local/sbin/runc\n</code></pre> <ul> <li>\u5b89\u88c5cni\u63d2\u4ef6</li> </ul> <pre><code>mkdir -p /opt/cni/bin\ntar Cxzvf /opt/cni/bin cni-plugins-linux-amd64-v1.3.0.tgz\n</code></pre> <ul> <li>\u4fee\u6539config.toml</li> </ul> <pre><code>mkdir -p /etc/containerd\ncontainerd config default &gt; /etc/containerd/config.toml\nvim /etc/containerd/config.toml\n-----\nSystemdCgroup = false \u6539\u4e3a SystemdCgroup = true\n\n\n# sandbox_image = \"k8s.gcr.io/pause:3.6\"\n\u6539\u4e3a\uff1a\nsandbox_image = \"registry.aliyuncs.com/google_containers/pause:3.9\"\n-----\n</code></pre>"},{"location":"k8s/install/#13-cri-o","title":"1.3 \u5b89\u88c5cri-o","text":"<ul> <li>\u914d\u7f6e\u955c\u50cf\u6e90</li> </ul> <pre><code>export KUBERNETES_VERSION=v1.28\nexport PROJECT_PATH=prerelease:/main\n\ncat &lt;&lt;EOF | tee /etc/yum.repos.d/cri-o.repo\n[cri-o]\nname=CRI-O\nbaseurl=https://pkgs.k8s.io/addons:/cri-o:/$PROJECT_PATH/rpm/\nenabled=1\ngpgcheck=1\ngpgkey=https://pkgs.k8s.io/addons:/cri-o:/$PROJECT_PATH/rpm/repodata/repomd.xml.key\nEOF\n</code></pre> <ul> <li>\u5b89\u88c5</li> </ul> <pre><code>yum install cri-o -y\n</code></pre> <ul> <li>\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u7684pod\u7f51\u6bb5</li> </ul> <pre><code>vim /etc/cni/net.d/11-crio-ipv4-bridge.conflist\n\n{\n  \"cniVersion\": \"1.0.0\",\n  \"name\": \"crio\",\n  \"plugins\": [\n    {\n      \"type\": \"bridge\",\n      \"bridge\": \"cni0\",\n      \"isGateway\": true,\n      \"ipMasq\": true,\n      \"hairpinMode\": true,\n      \"ipam\": {\n        \"type\": \"host-local\",\n        \"routes\": [\n            { \"dst\": \"0.0.0.0/0\" }\n        ],\n        \"ranges\": [\n            [{ \"subnet\": \"10.20.0.0/16\" }]\n        ]\n      }\n    }\n  ]\n}\n</code></pre> <ul> <li>\u542f\u52a8</li> </ul> <pre><code>systemctl start crio.service\nsystemctl enable crio.service\n</code></pre>"},{"location":"k8s/install/#14-cri-docker","title":"1.4 \u5b89\u88c5cri-docker","text":"<p>\u4e0b\u8f7d\u6700\u65b0\u7684\u5b89\u88c5\u5305 https://github.com/Mirantis/cri-dockerd</p> <pre><code>cd cri-dockerd\nmkdir -p /usr/local/bin\ninstall -o root -g root -m 0755 cri-dockerd /usr/local/bin/cri-dockerd\ninstall packaging/systemd/* /etc/systemd/system\nsed -i -e 's,/usr/bin/cri-dockerd,/usr/local/bin/cri-dockerd,' /etc/systemd/system/cri-docker.service\nsed -i -e 's,SocketGroup=docker,SocketGroup=root,' /etc/systemd/system/cri-docker.socket\nsystemctl daemon-reload\nsystemctl enable --now cri-docker.socket\n</code></pre>"},{"location":"k8s/install/#2","title":"2. \u914d\u7f6e\u96c6\u7fa4","text":""},{"location":"k8s/install/#21-kubeadm","title":"2.1 \u5b89\u88c5kubeadm","text":"<ul> <li>\u914d\u7f6e\u955c\u50cf</li> </ul> <pre><code># \u6b64\u64cd\u4f5c\u4f1a\u8986\u76d6 /etc/yum.repos.d/kubernetes.repo \u4e2d\u73b0\u5b58\u7684\u6240\u6709\u914d\u7f6e\ncat &lt;&lt;EOF | sudo tee /etc/yum.repos.d/kubernetes.repo\n[kubernetes]\nname=Kubernetes\nbaseurl=https://pkgs.k8s.io/core:/stable:/v1.28/rpm/\nenabled=1\ngpgcheck=1\ngpgkey=https://pkgs.k8s.io/core:/stable:/v1.28/rpm/repodata/repomd.xml.key\nexclude=kubelet kubeadm kubectl cri-tools kubernetes-cni\nEOF\n</code></pre> <ul> <li>\u5b89\u88c5</li> </ul> <pre><code>sudo yum install -y kubelet kubeadm kubectl --disableexcludes=kubernetes\nsudo systemctl enable --now kubelet\nsudo systemctl enable kubelet.service\n</code></pre> <ul> <li>\u914d\u7f6e\u547d\u4ee4\u8865\u5168</li> </ul> <pre><code>kubectl completion bash &gt; /etc/profile.d/kubectl_completion.sh\n</code></pre> <ul> <li>\u914d\u7f6eendpoint</li> </ul> <p>\u5982\u679c\u4e0d\u8bbe\u7f6e\u7aef\u70b9\uff0ccrictl\u4f1a\u5c1d\u8bd5\u8fde\u63a5\u5230\u5df2\u77e5\u7aef\u70b9\u5217\u8868\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5f71\u54cd\u6027\u80fd\u3002</p> <pre><code> echo \"runtime-endpoint: unix:///run/containerd/containerd.sock\" | tee /etc/crictl.yaml\n</code></pre> <ul> <li>\u914d\u7f6e\u96c6\u7fa4</li> </ul> <pre><code>kubeadm init --control-plane-endpoint=\"172.16.105.54\" \\\n                 --cri-socket /run/containerd/containerd.sock \\\n                 --kubernetes-version=v1.28.3  \\\n                 --pod-network-cidr=10.20.0.0/16 \\\n                 --service-cidr=10.21.0.0/16 \\\n                 --token-ttl=0  \\\n                 --upload-certs \\\n                 --image-repository=registry.aliyuncs.com/google_containers\n</code></pre> <ul> <li>\u914d\u7f6e\u73af\u5883\u53d8\u91cf</li> </ul> <pre><code>mkdir -p $HOME/.kube\nsudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\nsudo chown $(id -u):$(id -g) $HOME/.kube/config\n</code></pre> <ul> <li>reset</li> </ul> <pre><code>kubeadm reset -f --cri-socket /run/containerd/containerd.sock\nrm -rf $HOME/.kube/config\n</code></pre> <ul> <li>\u53bb\u9664master\u6c61\u70b9</li> </ul> <pre><code>kubectl describe node master01\nkubectl taint node master01 node-role.kubernetes.io/control-plane-\n</code></pre> <p></p>"},{"location":"k8s/install/#22-flannel","title":"2.2 \u5b89\u88c5\u7f51\u7edc\u63d2\u4ef6\uff08flannel\uff09","text":"<ul> <li>\u4e0b\u8f7d\u914d\u7f6e\u6587\u4ef6</li> </ul> <pre><code>wget https://github.com/flannel-io/flannel/releases/latest/download/kube-flannel.yml\n</code></pre> <ul> <li>\u4fee\u6539\u914d\u7f6e\u6587\u4ef6</li> </ul> <pre><code>net-conf.json: |\n    {\n      \"Network\": \"10.20.0.0/16\",\n      \"Backend\": {\n        \"Type\": \"vxlan\"\n      }\n    }\n</code></pre>"},{"location":"k8s/install/#23","title":"2.3 \u6dfb\u52a0\u8282\u70b9","text":"<pre><code>kubeadm join 172.16.105.54:6443 --token 2rp6dw.rsuyi69xlk6mnbgc --discovery-token-ca-cert-hash sha256:0ffb34f2817b8e9ed6ccb4e2e33b522a342a0a88841c21534627e5c1f4661b51  --cri-socket /run/containerd/containerd.sock\n</code></pre>"},{"location":"linux/geoip/","title":"\u9650\u5236\u7f51\u7ad9\u8bbf\u95ee\u6765\u6e90","text":""},{"location":"linux/geoip/#_1","title":"\u524d\u8a00","text":"<p>\u76f8\u4fe1\u5927\u5bb6\u4e5f\u90fd\u770b\u5230\u4e86\uff0c\u5982\u4eca\u7f51\u7edc\u4e16\u754c\u201c\u52a8\u8361\u4e0d\u5b89\u201d\uff0c\u5404\u56fd\u4e4b\u95f4\u7684\u4e89\u6597\u65e9\u5df2\u5728\u4e92\u8054\u7f51\u91cc\u5c55\u5f00\u3002\u54b1\u4e5f\u4e0d\u662f\u4e13\u4e1a\u7684\uff0c\u5728\u6211\u4eec\u4ec5\u6709\u7684\u5b89\u5168\u6280\u672f\u6c34\u5e73\u4e0a\uff0c\u80fd\u4e0d\u80fd\u505a\u4e9b\u529b\u6240\u80fd\u53ca\u7684\u5b89\u5168\u63aa\u65bd\u3002\u56e0\u4e3a\u6211\u7684\u7cfb\u7edf\u90fd\u662f\u901a\u8fc7nginx\u4ee3\u7406\u51fa\u53bb\u8bbf\u95ee\u7684\uff0c\u6240\u4ee5\u6211\u5c31\u60f3\u80fd\u4e0d\u901a\u8fc7nginx\u9650\u5236\u4f7f\u7528\u533a\u57df\uff0c\u6bd4\u5982\u975e\u5927\u9646\u7684IP\u65e0\u6cd5\u8bbf\u95ee\u6211\u4eec\u7684\u7cfb\u7edf\u3002</p>"},{"location":"linux/geoip/#_2","title":"\u51c6\u5907\u5de5\u4f5c","text":"<ul> <li>\u5b89\u88c5\u6269\u5c55 <pre><code>yum install libmaxminddb-devel -y\n</code></pre></li> <li>nginx \u6e90\u7801</li> <li>ngx_http_geoip2_module \u6a21\u5757</li> <li>geoip2\u6700\u65b0\u7684IP\u5e93</li> </ul> <p>\u6211\u8fd9\u91cc\u4ee5tengine\u4e3a\u4f8b</p>"},{"location":"linux/geoip/#_3","title":"\u5f00\u59cb\u7f16\u8bd1","text":"<ol> <li>\u5982\u679c\u4f60\u4e4b\u524d\u5df2\u7ecf\u4f7f\u7528\u4e86nginx/tengine\uff0c\u6700\u597d\u5148\u770b\u770b\u4e4b\u524d\u7684\u7f16\u8bd1\u53c2\u6570\uff0c\u505a\u5230\u517c\u5bb9\uff0c\u8fdb\u5165\u4e4b\u524d\u7f16\u8bd1\u7684\u76ee\u5f55\uff08objs\uff09  \u67e5\u8be2\u5f53\u65f6\u7684\u4e00\u4e2a\u7f16\u8bd1\u53c2\u6570(configure arguments) <pre><code>nginx -V\n</code></pre> </li> <li>\u5c06ngx_http_geoip2_module \u6a21\u5757\u653e\u5230\u670d\u52a1\u5668\u4e0a\uff0c\u5e76\u8d4b\u4e88755\u3001777\u6743\u9650</li> </ol> <p>\u5728\u6211\u4eec\u63a5\u4e0b\u6765\u7684\u7f16\u8bd1\u4e2d\u9700\u8981\u5e26\u4e0a\u4e0a\u9762\u7684\u53c2\u6570\uff0c\u5728\u8fd9\u4e9b\u53c2\u6570\u7684\u57fa\u7840\u4e0a\u518d\u52a0\u4e0a\uff1a <pre><code>--add-module=/opt/ngx_http_geoip2_module\n</code></pre> </p> <p>\u7f16\u8bd1\u8fc7\u7a0b\u6ca1\u6709\u62a5\u9519\u5c31\u7ee7\u7eed\u6267\u884c</p> <pre><code>make &amp;&amp; make install\n</code></pre>"},{"location":"linux/geoip/#_4","title":"\u5f00\u59cb\u914d\u7f6e","text":"<p>\u5728\u5b89\u88c5\u5b8c\u6210\u4ee5\u540e\uff0c\u4f1a\u5728\u7cfb\u7edf\u751f\u6210/usr/share/GeoIP/\u76ee\u5f55\uff1a </p> <p>\u91cc\u9762\u6709\u9ed8\u8ba4\u7684IP\u5730\u5740\u5e93\uff0c\u4e00\u4e2aipv4\u7684\uff0c\u4e00\u4e2aipv6\u7684\uff0c\u4f46\u662f\u6211\u4eec\u9700\u8981\u6700\u65b0\u7684\uff0c\u6211\u5df2\u7ecf\u4e0b\u8f7d\u597d\u4e86\uff0c\u5728\u4ed3\u5e93\u91cc\u81ea\u884c\u4e0b\u8f7d</p> <p></p> <p>\u7136\u540e\u5728\u670d\u52a1\u5668\u4e0a\u89e3\u538b\uff0c\u653e\u5728\u4efb\u610f\u76ee\u5f55\uff0c\u6211\u8fd9\u91cc\u653e\u5728/data/tengine/GeoIP/\u76ee\u5f55\u4e0b</p> <p>\u63a5\u4e0b\u6765\u9700\u8981\u914d\u7f6e\u4e00\u4e0bnginx.conf\u7684\u6587\u4ef6\uff0c\u5728http\u6a21\u5757\u91cc\u6dfb\u52a0\u83b7\u53d6IP\u533a\u57df\u7684\u51fd\u6570</p> <pre><code>http {\n    ...\n    # \u7981\u6b62\u56fd\u5916ip\u8fdb\u884c\u8bbf\u95ee\n    geoip2 /data/tengine/GeoIP/GeoLite2-Country.mmdb {\n         auto_reload 5m;\n         $geoip2_data_country_code country iso_code;\n    }\n\n    map $geoip2_data_country_code $allowed_country {\n         default no;\n         CN yes;\n    }\n    ...\n}\n</code></pre> <p></p> <p>\u914d\u7f6e\u597d\u4e86\u4ee5\u540e\u5c31\u53ef\u4ee5\u5728\u6211\u4eec\u81ea\u5df1\u7684\u914d\u7f6e\u6587\u4ef6\u4e2d\u76f4\u63a5\u5f15\u7528\u4e86</p> <pre><code>server {\n    listen       50001;\n    server_name  localhost;\n\n    if ($allowed_country = no) {\n       # return https://www.baidu.com;\n        return 404;\n    }\n\n    location / {\n        proxy_set_header Host $host:$server_port;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header REMOTE-HOST $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_pass http://127.0.0.1:1024;\n    }\n}\n</code></pre> <p></p> <p>\u5982\u679c\u60f3\u653e\u5f00\u9999\u6e2f\u7684\u5730\u5740\uff0c\u53ef\u4ee5\u6539\u4e3a</p> <pre><code>map $geoip2_data_country_code $allowed_country {\n         default no;\n         CN yes;\n         HK yes;\n    }\n</code></pre> <p>\u5176\u4ed6\u5730\u533a\u7684\u53ef\u4ee5\u6309\u9700\u653e\u5f00\uff0c\u4f1a\u79d1\u5b66\u4e0a\u7f51\u7684\u53ef\u4ee5\u6d4b\u8bd5\u4e00\u4e0b\uff0c\u6211\u4eec\u7684\u7cfb\u7edf\u5df2\u7ecf\u7981\u6b62\u975e\u5927\u9646\u7684IP\u8bbf\u95ee\u4e86</p>"},{"location":"linux/geoip/#_5","title":"\u603b\u7ed3","text":"<p>\u6211\u4eec\u4e5f\u4e0d\u662f\u4e13\u4e1a\u7684\u5b89\u5168\u4eba\u5458\uff0c\u4ee5\u4e0a\u64cd\u4f5c\u53ea\u80fd\u9632\u6b62\u56fd\u5916\u7684\u4eba\u8bbf\u95ee\u6211\u4eec\u7684\u7cfb\u7edf\uff0c\u5e76\u4e0d\u80fd\u505a\u5230\u76f4\u63a5\u7981\u6389\u7aef\u53e3\uff0c\u6240\u4ee5\u4e0d\u77e5\u9053\u6709\u6ca1\u6709\u7528\uff0c\u53ea\u80fd\u5fc3\u91cc\u5b89\u6170\u81ea\u5df1\u6709\u5927\u7528\u3002</p>"},{"location":"linux/https/","title":"\u514d\u8d39\u7533\u8bf7SSL\u8bc1\u4e66","text":""},{"location":"linux/https/#_1","title":"\u524d\u8a00","text":"<p>HTTP\u534f\u8bae\u662f\u8d85\u6587\u672c\u4f20\u8f93\u534f\u8bae\u7684\u7f29\u5199\uff0c\u82f1\u6587\u662fHyper Text Transfer Protocol\u3002\u5b83\u662f\u4eceWEB\u670d\u52a1\u5668\u4f20\u8f93\u8d85\u6587\u672c\u6807\u8bb0\u8bed\u8a00(HTML)\u5230\u672c\u5730\u6d4f\u89c8\u5668\u7684\u4f20\u9001\u534f\u8bae\uff0cHTTP\u4fe1\u606f\u662f\u660e\u6587\u4f20\u8f93\uff0cHTTPS\u5219\u662f\u5177\u6709\u5b89\u5168\u6027\u7684ssl/tls\u52a0\u5bc6\u4f20\u8f93\u534f\u8bae\u3002HTTP\u7684\u8fde\u63a5\u5f88\u7b80\u5355\uff0c\u662f\u65e0\u72b6\u6001\u7684\uff1bHTTPS\u534f\u8bae\u662f\u7531SSL/TLS+HTTP\u534f\u8bae\u6784\u5efa\u7684\u53ef\u8fdb\u884c\u52a0\u5bc6\u4f20\u8f93\u3001\u8eab\u4efd\u8ba4\u8bc1\u7684\u7f51\u7edc\u534f\u8bae\uff0c\u6bd4HTTP\u534f\u8bae\u5b89\u5168\uff0c\u5b98\u65b9\u6587\u6863\u5df2\u7ecf\u6709\u5207\u6362HTTPS\u7684\u6307\u5bfc\u624b\u518c\u4e86http\u5207\u6362https,\u6211\u4e3a\u4ec0\u4e48\u4f1a\u5728\u8fd9\u91cc\u591a\u6b64\u4e00\u4e3e\u5462\uff0c\u662f\u56e0\u4e3a\u4f7f\u7528\u670d\u52a1\u5668\u751f\u6210\u7684\u8bc1\u4e66\u5728\u8bbf\u95ee\u7684\u65f6\u5019\uff0c\u6d4f\u89c8\u5668\u4f1a\u63d0\u793a\u4e0d\u5b89\u5168\uff0c\u8bc1\u4e66\u4e0d\u53ef\u4fe1\uff0c\u5177\u4f53\u7684\u539f\u56e0\u53ef\u4ee5\u81ea\u884c\u641c\u7d22\u4e00\u4e0b\uff08\u53ef\u4fe1\u7684CA\u673a\u6784\uff09\u3002</p> <p></p> <p>\u4eca\u5929\u5728\u8fd9\u91cc\u5c31\u4ecb\u7ecd\u4e00\u6b3e\u5b89\u5168\u3001\u53ef\u88ab\u6d4f\u89c8\u5668\u4fe1\u4efb\u7684\u8bc1\u4e66\uff1aLet\u2019s Encrypt\u514d\u8d39\u8bc1\u4e66</p>"},{"location":"linux/https/#_2","title":"\u51c6\u5907\u5de5\u4f5c","text":"<ul> <li>\u4e00\u53f0\u53ef\u4ee5\u8bbf\u95ee\u4e92\u8054\u7f51\u7684\u670d\u52a1\u5668\uff08\u6700\u4f4e\u914d\u7f6e\uff1a2C/2G\uff09</li> </ul>"},{"location":"linux/https/#_3","title":"\u7533\u8bf7\u8bc1\u4e66","text":""},{"location":"linux/https/#1-snapd","title":"1. \u5b89\u88c5snapd","text":"<pre><code>sudo yum install epel-release -y\n</code></pre> <pre><code>sudo yum install snapd -y\n</code></pre> <pre><code>sudo systemctl enable --now snapd.socket\n</code></pre> <pre><code>sudo service snapd start\nsudo ln -s /var/lib/snapd/snap /snap\n</code></pre>"},{"location":"linux/https/#2-certbot","title":"2. \u5b89\u88c5certbot","text":"<pre><code>sudo snap install core\n</code></pre> <pre><code>sudo snap refresh core\n</code></pre> <pre><code>sudo snap install --classic certbot\n</code></pre> <pre><code>sudo ln -s /snap/bin/certbot /usr/bin/certbot\n</code></pre> <p>\u81f3\u6b64certbot\u5b89\u88c5\u5df2\u5b8c\u6210\uff0c\u63a5\u4e0b\u6765\u5c31\u662f\u7533\u8bf7\u8bc1\u4e66\u4e86</p>"},{"location":"linux/https/#3","title":"3. \u8bc1\u4e66\u7533\u8bf7","text":"<p>\u8fd9\u662f\u4f7f\u7528\u7684\u662f\u6cdb\u89e3\u6790\u57df\u540d\uff0c\u586b\u5199\u84dd\u9cb8\u5e73\u53f0\u7684\u4e3b\u57df\u540d\u5c31\u53ef\u4ee5\u4e86</p> <pre><code>certbot certonly --email \u90ae\u7bb1\u5730\u5740 -d *.\u5e73\u53f0\u4e3b\u57df\u540d --manual --preferred-challenges dns --server https://acme-v02.api.letsencrypt.org/directory \n</code></pre> <p></p> <p>\u5728\u57df\u540d\u63a7\u5236\u53f0\uff0c\u5c06\u4e0b\u9762\u7684TXT\u683c\u5f0f\u7684\u89e3\u6790\u548c\u57df\u540d\u505a\u4e2a\u89e3\u6790\uff0c\u8fd9\u662f\u57df\u540d\u6240\u5c5e\u6743\u7684\u6821\u9a8c</p> <p></p> <p>\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u7684\u662fTXT\u89e3\u6790\uff0c\u89e3\u6790\u503c\u9700\u8981\u52a0\u4e0a\u53cc\u5f15\u53f7\uff08\u7ecf\u6d4b\u8bd5\uff0c\u534e\u4e3a\u57df\u540d\u89e3\u6790\u9700\u8981\u52a0\u53cc\u5f15\u53f7\uff0c\u963f\u91cc\u57df\u540d\u89e3\u6790\u5219\u4e0d\u9700\u8981\uff09</p> <p></p> <p>\u89e3\u6790\u5b8c\u6210\u4ee5\u540e\uff0c\u76f4\u63a5\u56de\u8f66\uff0c\u6821\u9a8c\u6ca1\u95ee\u9898\u7684\u8bdd\uff0c\u4f1a\u8fd4\u56de\u8bc1\u4e66\u5728\u670d\u52a1\u5668\u7684\u4f4d\u7f6e\u548c\u5230\u671f\u65f6\u95f4\uff0c\u56e0\u4e3a\u8fd9\u662f\u514d\u8d39\u7684\uff0c\u6240\u4ee5\u4f7f\u7528\u671f\u9650\u53ea\u67093\u4e2a\u6708\uff0c\u540e\u9762\u4f1a\u4ecb\u7ecd\u81ea\u52a8\u7eed\u8d39\u7684\u65b9\u5f0f</p> <p></p>"},{"location":"linux/https/#4","title":"4. \u8bc1\u4e66\u7eed\u8d39\uff08\u81ea\u52a8\u7eed\u8d39\uff09","text":"<p>\u5176\u5b9e\u7eed\u8d39\u5f88\u7b80\u5355\uff0c\u6d41\u7a0b\u548c\u7533\u8bf7\u4e00\u6837\uff1a</p> <pre><code>certbot renew  --cert-name zkmlops.com # \u8bc1\u4e66\u6709\u6548\u671f\u5c0f\u4e8e30\u5929\u624d\u4f1arenew\ncertbot renew   --force-renewal --cert-name zkmlops.com # \u5f3a\u884crenew\n</code></pre> <p>\u4f46\u662f\u6bcf\u6b21\u90fd\u9700\u8981\u624b\u52a8\u66f4\u65b0\u57df\u540d\u89e3\u6790\u7684\u503c\uff0c\u8fd9\u5f88\u4e0d\u201c\u8fd0\u7ef4\u201d\uff0c\u6211\u60f3\u8ba9\u4ed6\u53ef\u4ee5\u81ea\u5df1\u66f4\u65b0\u57df\u540d\u89e3\u6790\u3002\u5404\u79cd\u7ffb\u9605\u8d44\u6599\uff0c\u67e5\u8be2\u534e\u4e3aAPI\u6587\u6863\u540e\uff0c\u771f\u88ab\u6211\u6363\u9f13\u51fa\u6765\u4e86\uff0c\u76f4\u63a5\u653e\u4ee3\u7801\uff1a</p> <pre><code>#!/usr/bin/env python\n\nfrom huaweicloudsdkcore.auth.credentials import BasicCredentials\nfrom huaweicloudsdkcore.exceptions import exceptions\nfrom huaweicloudsdkdns.v2.region.dns_region import DnsRegion\nfrom huaweicloudsdkdns.v2 import *\nimport os\n\ndomain = os.environ[\"CERTBOT_DOMAIN\"]\nvalue = os.environ[\"CERTBOT_VALIDATION\"]\n\nak = \"\"\nsk = \"\"\n\ncredentials = BasicCredentials(ak, sk)\n\nclient = DnsClient.new_builder() \\\n    .with_credentials(credentials) \\\n    .with_region(DnsRegion.value_of(\"cn-east-3\")) \\\n    .build()\n\ntry:\n    request = UpdateRecordSetRequest()\n    request.zone_id = \"\"  # \u81ea\u5df1\u5728\u63a7\u5236\u53f0\u67e5\n    request.recordset_id = \"\" # \u81ea\u5df1\u5728\u63a7\u5236\u53f0\u67e5\n    listUpdateRecordSetReqRecordsbody = [\n        '\\\"' + value + '\\\"'\n    ]\n    request.body = UpdateRecordSetReq(\n        records=listUpdateRecordSetReqRecordsbody,\n        type=\"TXT\",\n        name=\"_acme-challenge.xxxxx.com.\"\n    )\n    response = client.update_record_set(request)\n    print(response)\nexcept exceptions.ClientRequestException as e:\n    print(e.status_code)\n    print(e.request_id)\n    print(e.error_code)\n    print(e.error_msg)\n</code></pre> <p></p> <p>\u56e0\u4e3a\u6211\u7684\u57df\u540d\u662f\u5728\u534e\u4e3a\u4e0a\u7533\u8bf7\u7684\uff0c\u6240\u4ee5\u6211\u53ea\u6363\u9f13\u51fa\u4e86\u534e\u4e3a\u7684\u811a\u672c\uff0c\u963f\u91cc\u7684\u811a\u672c\u4f60\u4eec\u81ea\u5df1\u6363\u9f13\u5427\uff1a - \u534e\u4e3aAPI\u8c03\u8bd5\u63a7\u5236\u53f0\uff1ahttps://apiexplorer.developer.huaweicloud.com/apiexplorer/sdk?product=DNS&amp;api=ListRecordSets - \u963f\u91ccAPI\u8c03\u8bd5\u63a7\u5236\u53f0\uff1a\uff1ahttps://next.api.aliyun.com/api-tools/sdk/Alidns?version=2015-01-09&amp;language=python-tea</p> <p>\u6709\u4e86\u811a\u672c\u6211\u4eec\u7eed\u8d39\u5c31\u53ef\u4ee5\u4f7f\u7528\u811a\u672c\u6765\u5e2e\u6211\u4eec\u4fee\u6539\u89e3\u6790\u4e86</p> <pre><code>certbot renew  --cert-name chenshanb3.com --manual-auth-hook /path/to/certbot_renew_hw.py\n</code></pre> <p>\u4e5f\u53ef\u4ee5\u52a0\u5165\u5b9a\u65f6\u4efb\u52a1</p> <pre><code>0 0 15 * * certbot renew  --cert-name chenshanb3.com --manual-auth-hook /path/to/certbot_renew_hw.py\n</code></pre>"},{"location":"linux/https/#_4","title":"\u603b\u7ed3","text":"<p>\u867d\u7136\u6bcf\u4e09\u4e2a\u6708\u7eed\u8d39\u4e00\u6b21\u5f88\u9ebb\u70e6\uff0c\u4f46\u662f\u67b6\u4e0d\u4f4f\u514d\u8d39\u5440\uff0c\u5728\u4e13\u4e1a\u673a\u6784\u7533\u8bf7\u8bc1\u4e66\u52a8\u4e0d\u52a8\u5c31\u662f\u51e0\u4e07\u3001\u51e0\u5341\u4e07\uff0c\u4f7f\u7528\u514d\u8d39\u7684\uff0c\u8fd0\u7ef4\u6210\u672c\u4e0d\u5c31\u964d\u4e0b\u6765\u4e86\uff08\u624b\u52a8\u6ed1\u7a3d\uff09\uff5e\uff5e\uff5e \u5e02\u9762\u4e0a\u8fd8\u6709\u5f88\u591a\u57df\u540d\u7533\u8bf7\u7684\u8f6f\u4ef6\u548c\u670d\u52a1\uff0c\u6bd4\u5982\u201c\u5b9d\u5854\u9762\u677f\u201d\uff0c\u5b98\u7f51\u5730\u5740\uff1ahttps://www.bt.cn/new/index.html\uff0c\u6211\u4e5f\u5b89\u88c5\u4f53\u9a8c\u4e86\u4e00\u4e0b\uff0c\u4ee5\u4e0b\u89c2\u70b9\u53ea\u4ee3\u8868\u6211\u4e2a\u4eba\uff1a 1. \u9700\u8981\u6ce8\u518c\u624d\u80fd\u8fdb\u5165\u9762\u677f\u4f7f\u7528 2. \u90fd\u662f\u6536\u8d39\u7684\uff0c\u552f\u4e00\u514d\u8d39\u7528\u7684\u4e5f\u662fLet\u2019s Encrypt\u514d\u8d39\u8bc1\u4e66 \u6240\u4ee5\u6211\u653e\u5f03\u4f7f\u7528\u5b9d\u5854\u9762\u677f \u5982\u679c\u4f60\u6709\u66f4\u597d\u7684\u57df\u540d\u7533\u8bf7\u65b9\u5f0f\uff0c\u6b22\u8fce\u63a8\u8350\uff5e\uff5e\uff5e\uff5e</p> <p>\uff08\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4e00\u53f0\u670d\u52a1\u5668\u53ea\u80fd\u7ed95\u4e2a\u57df\u540d\u7533\u8bf7\u8bc1\u4e66\uff0c\u6bcf\u5929\u7533\u8bf7\u7684\u6b21\u6570\u4e5f\u6709\u9650\u5236\uff0c\u7533\u8bf7\u5b8c\u6210\u4ee5\u540e\uff0c\u522b\u591a\u6b21\u6d4b\u8bd5\uff0c\u4e0d\u7136\u4f60\u5c31\u53ea\u80fd\u6362\u53f0\u670d\u52a1\u5668\u4e86\u3002snap\u548ccertbot\u90fd\u662f\u56fd\u5916\u7684\u8f6f\u4ef6\uff0c\u6240\u4ee5\u61c2\u7684\u90fd\u61c2\uff0c\u5b89\u88c5\u8fc7\u7a0b\u53ef\u80fd\u4f1a\u6709\u70b9\u6162\uff0c\u8010\u5fc3\u7b49\u5f85\u5c31\u53ef\u4ee5\u4e86\uff09</p>"},{"location":"linux/optimization/","title":"Linux\u7cfb\u7edf\u4f18\u5316","text":""},{"location":"linux/optimization/#1-swap","title":"1. \u5173\u95edSWAP\u5206\u533a","text":"<p>swap\u6709\u4ec0\u4e48\u7528</p> <ol> <li>\u5f53\u7269\u7406\u5185\u5b58\u4e0d\u8db3\u7684\u65f6\u5019\uff0c\u5c06\u67d0\u4e9b\u5728\u5185\u5b58\u4e2d\u6240\u5360\u7528\u7684\u7a0b\u5e8f\u6682\u65f6\u79fb\u52a8\u5230swap\u5f53\u4e2d\uff0c\u8ba9\u7269\u7406\u5185\u5b58\u53ef\u4ee5\u88ab\u9700\u8981\u7684\u7a0b\u5e8f\u6765\u4f7f\u7528</li> <li>Linux\u4f1a\u5c06\u5185\u5b58\u4e2d\u4e0d\u5e38\u8bbf\u95ee\u7684\u6570\u636e\u4fdd\u5b58\u5230swap\u4e2d\uff0c\u5f53\u7cfb\u7edf\u9700\u8981\u518d\u6b21\u8c03\u7528\u7684\u65f6\u5019\uff0c\u5c31\u628a\u5b83\u4eceswap\u52a0\u8f7d\u5230\u5185\u5b58</li> <li>\u5982\u679c\u4f60\u7684\u4e3b\u673a\u652f\u6301\u7535\u6e90\u7ba1\u7406\u6a21\u5f0f\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u4f60\u7684Linux\u4e3b\u673a\u7cfb\u7edf\u53ef\u4ee5\u8fdb\u5165\u201d\u4f11\u7720\u201d\u6a21\u5f0f\u7684\u8bdd\uff0c\u90a3\u4e48\uff0c\u8fd0\u884c\u5f53\u4e2d\u7684\u7a0b\u5e8f\u72b6\u6001\u5219\u4f1a\u88ab\u8bb0\u5f55\u5230swap\u4e2d\u53bb\uff0c\u4ee5\u4f5c\u4e3a\u201d\u5524\u9192\u201d\u4e3b\u673a\u72b6\u6001\u7684\u4f9d\u636e</li> <li>\u5728\u67d0\u4e9b\u7a0b\u5e8f\u8fd0\u884c\u65f6\uff0c\u672c\u6765\u5c31\u4f1a\u5229\u7528swap\u7279\u6027\u6765\u5b58\u653e\u4e00\u4e9b\u6570\u636e\uff0c\u6bd4\u5982\u5728\u88c5Oracle11g\u7684\u65f6\u5019\u4f1a\u68c0\u67e5swap size</li> </ol> <p>\u4e3a\u4ec0\u4e48\u8981\u5173\u95ed</p> <p>swap\u662f\u5185\u5b58\u4e0d\u591f\u7528\u7684\u65f6\u5019\uff0c\u4e34\u65f6\u7528\u4e00\u70b9\u513f\u78c1\u76d8\u7a7a\u95f4\u4ee3\u66ff\u5185\u5b58\u3002\u51fa\u73b0\u7684\u95ee\u9898\uff0c\u5c31\u662f\u7a0b\u5e8f\u5728\u7528\u5185\u5b58\u7684\u65f6\u5019\uff0c\u53ef\u80fd\u4f1a\u7528\u5230swap\uff0c\u76f8\u5e94\u7684IO\u80fd\u529b\u4e0b\u964d\uff0c\u5f00\u542fswap\u540e\u901a \u8fc7cgroups\u8bbe\u7f6e\u7684\u5185\u5b58\u4e0a\u9650\u5c31\u4f1a\u5931\u6548\uff0c\u5173\u6389\u5c31\u4e0d\u4f1a\u51fa\u73b0\u8fd9\u4e2a\u95ee\u9898\uff0c\u4f46\u662f\u5173\u6389\u4ee5\u540e\uff0c\u5185\u5b58\u8d85\u51fa\u8bbe\u5b9a\u503c\uff0c\u7a0b\u5e8f\u5c31\u53ef\u80fd\u4f1a\u76f4\u63a5\u5d29\u6389\u3002</p> <ul> <li>\u4e34\u65f6\u5173\u95ed\uff0c\u4e0d\u9700\u8981\u91cd\u542f\u670d\u52a1\u5668</li> </ul> <pre><code>sudo swapoff -a\n</code></pre> <ul> <li>\u6c38\u4e45\u5173\u95ed\uff0c\u9700\u8981\u91cd\u65b0\u670d\u52a1\u5668</li> </ul> <pre><code>vim /etc/fstab\n</code></pre> <p>\u6ce8\u91caswap\u6240\u5728\u7684\u884c</p> <pre><code>#\n# /etc/fstab\n# Created by anaconda on Tue Sep 17 18:24:15 2019\n#\n# Accessible filesystems, by reference, are maintained under '/dev/disk'\n# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info\n#\nUUID=cb9bc6b0-bdae-423e-a32d-daf785c1387f /                       xfs     defaults        0 0\nUUID=4adfaaeb-d128-4281-911f-cc27231e9203 /boot                   xfs     defaults        0 0\n# UUID=67cb4a7f-401b-420a-9eb5-e8add06b6d15 swap                    swap    defaults        0 0\n</code></pre> <p>\u6700\u540e\u68c0\u67e5\u4e00\u4e0bSWAP\u5206\u533a\u7684\u5927\u5c0f\u662f\u5426\u90fd\u4e3a0</p> <pre><code>sudo free -m\n</code></pre> <p></p>"},{"location":"linux/optimization/#2-selinux","title":"2. \u5173\u95edselinux","text":"<p>selinux\u6709\u4ec0\u4e48\u7528</p> <p>\u5b89\u5168\u589e\u5f3a\u578b Linux\uff08SELinux\uff09\u662f\u4e00\u79cd\u91c7\u7528\u5b89\u5168\u67b6\u6784\u7684 Linux\u00ae \u7cfb\u7edf\uff0c\u5b83\u80fd\u591f\u8ba9\u7ba1\u7406\u5458\u66f4\u597d\u5730\u7ba1\u63a7\u54ea\u4e9b\u4eba\u53ef\u4ee5\u8bbf\u95ee\u7cfb\u7edf\u3002\u5b83\u6700\u521d\u662f\u4f5c\u4e3a Linux \u5185\u6838\u7684\u4e00 \u7cfb\u5217\u8865\u4e01\uff0c\u7531\u7f8e\u56fd\u56fd\u5bb6\u5b89\u5168\u5c40\uff08NSA\uff09\u5229\u7528 Linux \u5b89\u5168\u6a21\u5757\uff08LSM\uff09\u5f00\u53d1\u800c\u6210\u3002SELinux \u4e8e 2000 \u5e74\u53d1\u5e03\u5230\u5f00\u6e90\u793e\u533a\uff0c\u5e76\u4e8e 2003 \u5e74\u96c6\u6210\u5230\u4e0a\u6e38 Linux \u5185\u6838\u4e2d\u3002</p> <p>\u4e3a\u4ec0\u4e48\u8981\u5173\u95ed</p> <p>SELinux\u662fLinux\u5185\u6838\u7684\u5b89\u5168\u5b50\u7cfb\u7edf\uff0c\u901a\u8fc7\u4e25\u683c\u7684\u8bbf\u95ee\u63a7\u5236\u673a\u5236\u589e\u5f3a\u7cfb\u7edf\u5b89\u5168\u6027\u3002\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u5efa\u8bae\u5f00\u542fSELinux\u6765\u9650\u5236\u8fdb\u7a0b\u7684\u6743\u9650\uff0c\u9632\u6b62\u6076\u610f\u7a0b\u5e8f\u901a\u8fc7\u63d0 \u6743\u7b49\u65b9\u5f0f\u5bf9\u7cfb\u7edf\u8fdb\u884c\u653b\u51fb\uff1b\u7136\u800c\uff0c\u7531\u4e8eSELinux\u7684\u4e25\u683c\u8bbf\u95ee\u63a7\u5236\u673a\u5236\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4e00\u4e9b\u5e94\u7528\u7a0b\u5e8f\u6216\u670d\u52a1\u65e0\u6cd5\u542f\u52a8\uff0c\u56e0\u6b64\u5728\u7279\u5b9a\u60c5\u51b5\u4e0b\uff08\u5982\u5f00\u53d1\u3001\u8c03\u8bd5\u7b49\uff09\uff0c\u9700\u6682\u65f6\u5173\u95edSELinux\u3002 SELinux\u7b56\u7565\u662f\u767d\u540d\u5355\u539f\u5219\uff0c\u6240\u4ee5\u4f60\u9700\u8981\u975e\u5e38\u6e05\u695a\u4f60\u7684\u5404\u9879\u64cd\u4f5c\u90fd\u9700\u8981\u54ea\u4e9b\u8bbf\u95ee\u6743\u9650\u3002</p> <ul> <li>\u4e34\u65f6\u5173\u95ed\uff0c\u4e0d\u9700\u8981\u91cd\u542f\u670d\u52a1\u5668</li> </ul> <pre><code>setenforce 0\n</code></pre> <ul> <li>\u6c38\u4e45\u5173\u95ed\uff0c\u9700\u8981\u91cd\u542f\u670d\u52a1\u5668</li> </ul> <p><pre><code>vim /etc/sysconfig/selinux\n</code></pre> \u5c06<code>SELINUX=enforcing</code> \u66ff\u6362\u4e3a <code>SELINUX=disabled</code></p> <p>\u6700\u540e\u68c0\u67e5\u4e00\u4e0b\u662f\u5426\u751f\u6548</p> <pre><code>getenforce \n</code></pre> <p></p>"},{"location":"linux/optimization/#3","title":"3. \u5173\u95ed\u9632\u706b\u5899\uff1f","text":""},{"location":"linux/ssh/","title":"\u670d\u52a1\u5668\u95f4\u514d\u5bc6\u767b\u9646","text":""},{"location":"linux/ssh/#ssh","title":"ssh\u514d\u5bc6\u914d\u7f6e\u8bf4\u660e","text":""},{"location":"linux/ssh/#_1","title":"\u4e00\u3001\u5b89\u88c5\u57fa\u7840\u7ec4\u4ef6","text":"<pre><code>yum install -y expect\n</code></pre>"},{"location":"linux/ssh/#_2","title":"\u4e8c\u3001\u7f16\u5199\u811a\u672c","text":"<pre><code>cat &lt;&lt; FFF| tee ./ssh_withoutssh.sh\n#!/bin/bash\n\n[ ! -f $HOME/.ssh/id_rsa ] &amp;&amp; ssh-keygen -t rsa -b 2048 -N \"\" -f $HOME/.ssh/id_rsa\nread -s -p \"\u8bf7\u8f93\u5165\u5bc6\u7801:  \" passwd\ncat $HOME/.ssh/id_rsa.pub &gt;&gt;$HOME/.ssh/authorized_keys\nchmod 600 $HOME/.ssh/authorized_keys\nfor ip in $(awk '/^[0-9]/{print $1}' IP.config); do\n    #ssh-copy-id -o StrictHostKeyChecking=no -o CheckHostIP=no root@$ip\n    /usr/bin/expect &lt;&lt;EOF\n    spawn ssh-copy-id -o StrictHostKeyChecking=no -o CheckHostIP=no root@$ip \n    expect  {\n        \"yes/no\" { send \"yes\\r\";exp_continue }\n        \"password\" { send \"$passwd\\r\" }\n    }\n    expect eof\nEOF\n    # rsync -a $HOME/.ssh/id_rsa* $HOME/.ssh/authorized_keys -e 'ssh -o StrictHostKeyChecking=no -o CheckHostIP=no' root@$ip:/root/.ssh/\n    let ret+=$?\ndone\nFFF\n</code></pre>"},{"location":"linux/ssh/#ip","title":"\u4e09\u3001\u521b\u5efa\u9700\u8981\u514d\u5bc6\u7684\u670d\u52a1\u5668IP\u6e05\u5355","text":"<pre><code>cat&gt;&gt;IP.config&lt;&lt;EOF\n192.168.0.1\n192.168.0.2\n\u7b49\u9700\u8981\u514d\u5bc6\u7684IP...\nEOF\n</code></pre>"},{"location":"linux/ssh/#ssh_withoutsshsh","title":"\u56db\u3001\u8fd0\u884c<code>ssh_withoutssh.sh</code>","text":"<pre><code>sh ssh_withoutssh.sh\n</code></pre>"},{"location":"linux/ssh/#ssh_1","title":"ssh\u6307\u5b9a\u914d\u7f6e\u6587\u4ef6","text":"<pre><code># config\n# PubkeyAcceptedKeyTypes=+ssh-rsa\nHost *\nHostkeyAlgorithms +ssh-rsa\nPubkeyAcceptedKeyTypes +ssh-rsa\n\nHost github.com\n    HostName github.com\n    User git\n    IdentityFile /xxxxxxx/ssh1/id_rsa\n    IdentitiesOnly yes\nHost gitee.com\n    HostName gitee.com\n    User git\n    IdentityFile /xxxxxxxx/ssh2/id_rsa\n    IdentitiesOnly yes\n</code></pre>"},{"location":"linux/sshkey/","title":"\u6839\u636e\u4e0d\u540c\u7684\u7f51\u7ad9\u4f7f\u7528\u4e0d\u540c\u7684ssh\u5bc6\u94a5","text":"<p>\u7f16\u8f91ssh\u914d\u7f6e\u6587\u4ef6</p> <pre><code>vim ~/.ssh/config\n</code></pre> <p>\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9</p> <pre><code># config\n# PubkeyAcceptedKeyTypes=+ssh-rsa\nHost *\nHostkeyAlgorithms +ssh-rsa\nPubkeyAcceptedKeyTypes +ssh-rsa\n\nHost github.com\n    HostName github.com\n    User git\n    IdentityFile /xxxxxxxx/id_rsa\n    IdentitiesOnly yes\nHost gitee.com\n    HostName gitee.com\n    User git\n    IdentityFile /xxxxxxx/id_rsa\n    IdentitiesOnly yes\n</code></pre>"},{"location":"mac/alfred/","title":"Alfred\u7684\u914d\u7f6e\u548c\u5e38\u7528\u7684WorkFlows","text":""},{"location":"mac/alfred/#1-iterm2","title":"1. \u4fee\u6539\u7ec8\u7aef\u4e3aiTerm2","text":"<pre><code>property open_in_new_window : false\n\n-- Set this property to false to reuse current tab\nproperty open_in_new_tab : true\n\n-- Set this property to true if iTerm is configured to launch without opening a new window\nproperty iterm_opens_quietly : false\n\n-- Handlers\non new_window()\n  tell application \"iTerm\" to create window with default profile\nend new_window\n\non new_tab()\n  tell application \"iTerm\" to tell the first window to create tab with default profile\nend new_tab\n\non call_forward()\n  tell application \"iTerm\" to activate\nend call_forward\n\non is_running()\n  application \"iTerm\" is running\nend is_running\n\non has_windows()\n  if not is_running() then return false\n\n  tell application \"iTerm\"\n    if windows is {} then return false\n    if tabs of current window is {} then return false\n    if sessions of current tab of current window is {} then return false\n\n    set session_text to contents of current session of current tab of current window\n    if words of session_text is {} then return false\n  end tell\n\n  true\nend has_windows\n\non send_text(custom_text)\n  tell application \"iTerm\" to tell the first window to tell current session to write text custom_text\nend send_text\n\n-- Main\non alfred_script(query)\n  if has_windows() then\n    if open_in_new_window then\n      new_window()\n    else if open_in_new_tab then\n      new_tab()\n    else\n      -- Reuse current tab\n    end if\n  else\n    -- If iTerm is not running and we tell it to create a new window, we get two:\n    -- one from opening the application, and the other from the command\n    if is_running() or iterm_opens_quietly then\n      new_window()\n    else\n      call_forward()\n    end if\n  end if\n\n  -- Make sure a window exists before we continue, or the write may fail\n  -- \"with timeout\" does not work with a \"repeat\"\n  -- Delay of 0.01 seconds repeated 500 times means a timeout of 5 seconds\n  repeat 500 times\n    if has_windows() then\n      send_text(query)\n      call_forward()\n      exit repeat\n    end if\n\n    delay 0.01\n  end repeat\nend alfred_script\n</code></pre>"},{"location":"mac/alfred/#2-workflows","title":"2. \u5e38\u7528\u7684WorkFlows","text":"\ud83c\udf81 Projects \u2b50 Stars \ud83d\udcda Forks \ud83d\udece Issues \ud83c\udf89 Release JetBrains in Alfred Workflows Generator Password With Alfred WorkFlow Get IP Info With Alfred WorkFlow Whois With Alfred WorkFlow"},{"location":"mac/iterm2/","title":"iTerm2\u7684\u5b89\u88c5\u548c\u914d\u7f6e","text":""},{"location":"mac/iterm2/#1-iterm2","title":"1. \u5b89\u88c5iterm2","text":"<p>\u4e0b\u8f7d\u5730\u5740 https://iterm2.com/downloads.html</p> <p></p> <p>\u4e0b\u8f7d\u5b8c\u6210\u4ee5\u540e\u89e3\u538b\uff0c\u76f4\u63a5\u62d6\u5230<code>\u5e94\u7528\u7a0b\u5e8f</code>\u91cc\u5c31\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u4e86</p> <p></p> <p></p>"},{"location":"mac/iterm2/#2","title":"2. \u914d\u7f6e\u989c\u8272","text":"<p>\u5173\u4e8e\u7684iTerm2\u7684\u4e3b\u9898\u548c\u914d\u8272\u591a\u7684\u6570\u4e0d\u80dc\u6570\uff0c\u8fd9\u91cc\u5c31\u5217\u51fa\u6211\u5634\u559c\u6b22\u7684\u4e00\u79cd\u914d\u8272 gruvbox</p> <p><code>gruvbox</code>\u652f\u6301\u5f88\u591a\u8f6f\u4ef6\u548c\u7ec8\u7aef\uff0c\u53ef\u4ee5\u505a\u5230\u5e38\u7528\u7684\u5de5\u5177\u914d\u8272\u7edf\u4e00</p> <p>\u4e0b\u8f7d\u989c\u8272\u914d\u7f6e\u6587\u4ef6 https://github.com/morhetz/gruvbox-contrib/tree/master/iterm2</p> <p></p> <p>\u5b8c\u6210\u540e\u76f4\u63a5\u5bfc\u5165iTerm2\u91cc\uff0c<code>profile</code> ---&gt; <code>Colors</code> ---&gt; <code>Import\u2026\u2026</code></p> <p></p> <p>\u5bfc\u5165\u5b8c\u6210\u540e\u8fd8\u9700\u8981\u5e94\u7528\u4e00\u4e0b\u624d\u80fd\u751f\u6548</p> <p></p>"},{"location":"mac/iterm2/#3","title":"3. \u542f\u7528\u72b6\u6001\u680f","text":"<p>\u7c7b\u4f3c\u4e8e\u7cfb\u7edf\u76d1\u63a7\uff0c\u72b6\u6001\u680f\u53ef\u4ee5\u663e\u793a\u6709\u5173\u4e8e\u7cfb\u7edf\u76f8\u5173\u7684\u5185\u5bb9</p> <p></p> <p>\u4f9d\u6b21\u70b9\u51fb<code>profile</code> ---&gt; <code>Session</code> ---&gt; <code>status bar enabled</code>\u542f\u7528\u72b6\u6001\u680f</p> <p></p> <p>\u7136\u540e\u914d\u7f6e\u72b6\u6001\u680f\uff0c\u628a\u60f3\u8981\u663e\u793a\u7684\u5185\u5bb9\u62d6\u5230 <code>Active Components</code> \u91cc</p> <p></p> <p>\u6700\u540e\u7684\u6548\u679c</p> <p></p>"},{"location":"mac/mac/","title":"Mac\u4f7f\u7528\u6280\u5de7\u4ee5\u53ca\u8f6f\u4ef6\u63a8\u8350","text":""},{"location":"mac/mac/#1","title":"1. \u7ec8\u7aef","text":"<ul> <li>iTerm 2</li> </ul> <p>\u522b\u6298\u817e\u4e86\uff0c\u82b1\u91cc\u80e1\u54e8\uff0c<code>iTerm 2</code>\u7528\u5230\u9000\u4f11\uff08</p>"},{"location":"mac/mac/#2","title":"2. \u6548\u7387","text":"<ul> <li>Alfred</li> </ul> <p>\u8fd9\u4e2a\u5f88\u591a\u4eba\u6709\u4e89\u8bae\uff0c\u89c9\u5f97<code>Raycast</code>\u66f4\u597d\uff0c<code>Alfred</code>\u4f18\u52bf\u5728\u4e8e\u6709\u4e30\u5bcc\u7684<code>workflows</code></p> <p></p> <p></p> <p></p>"},{"location":"mac/mac/#3","title":"3. \u670d\u52a1\u5668\u7ba1\u7406","text":"<ul> <li>Royal TSX</li> </ul> <p>\u7b97\u662fXshell\u6700\u5b8c\u7f8e\u7684\u66ff\u4ee3\u54c1\u4e86\uff0c\u66f4\u80dc\u4e4b</p> <p></p>"},{"location":"mac/mac/#4","title":"4. \u7a97\u53e3\u6574\u7406","text":"<ul> <li>Mosaic</li> </ul> <p>\u5feb\u6377\u952e\u53ea\u662f\u57fa\u7840\u529f\u80fd</p> <p></p> <p></p>"},{"location":"mac/mac/#5","title":"5. \u7ffb\u8bd1","text":"<ul> <li>Bob</li> </ul>"},{"location":"mac/mac/#6","title":"6. \u622a\u56fe","text":"<ul> <li>iShot Pro</li> </ul>"},{"location":"mac/surge/","title":"Surge\u914d\u7f6e\u6587\u4ef6\u8be6\u89e3","text":"<p>\u672c\u6587\u4e3b\u8981\u4ecb\u7ecdSurge\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u5e26\u5927\u5bb6\u624b\u64b8\u914d\u7f6e\u6587\u4ef6\uff0c\u5177\u4f53\u7684\u61d2\u4eba\u914d\u7f6e\u3001\u7528\u6cd5\u79fb\u6b65 \u61d2\u4eba\u914d\u7f6e\u3002</p>"},{"location":"mac/surge/#macos-ios","title":"Macos \u548c iOS \u76f8\u540c\u7684\u914d\u7f6e\u9879","text":"<ul> <li>loglevel</li> </ul> <pre><code>loglevel = notify\n</code></pre> <p>\u4f5c\u7528</p> <p>\u65e5\u5fd7\u7ea7\u522b\uff0c\u4e0d\u5efa\u8bae\u5728\u65e5\u5e38\u4f7f\u7528\u4e2d\u542f\u7528\u8be6\u7ec6\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u663e\u8457\u964d\u4f4e\u6027\u80fd\u3002 \u53ef\u9009\u53c2\u6570\uff1averbose, info, notify, warning </p> <ul> <li>ipv6</li> </ul> <pre><code>ipv6 = false\n</code></pre> <p>\u4f5c\u7528</p> <p>IPv6\u534f\u8bae, \u542f\u7528\u5b8c\u6574\u7684 IPv6 \u652f\u6301\uff0c\u5177\u4f53\u6765\u8bf4\uff0c\u5f00\u542f\u8be5\u9009\u9879\u540e\uff0c\u8bbf\u95ee\u57df\u540d\u65f6\u4f1a\u67e5\u8be2\u8be5\u57df\u540d\u7684AAAA\u8bb0\u5f55\u3002\u5373\u4f7f\u672a\u542f\u7528\u6b64\u9009\u9879\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u76f4\u63a5\u8bbf\u95ee IPv6 \u5730\u5740\u6765\u8bbf\u95ee IPv6 \u7ad9\u70b9\u3002</p> <ul> <li>ipv6-vif</li> </ul> <pre><code>ipv6-vif = false\n</code></pre> <p>\u4f5c\u7528</p> <p>\u5141\u8bb8 IPv6 \u901a\u8fc7 Surge VIF\u3002\u5f53\u60a8\u5e0c\u671b Surge \u5904\u7406\u8fde\u63a5\u5230 IPv6 \u5730\u5740\u7684\u539f\u59cb TCP \u8fde\u63a5\u65f6\u5f88\u6709\u7528\u3002 off \uff1a\u5207\u52ff\u4f7f\u7528 IPv6 \u8bbe\u7f6e Surge VIF auto \uff1a\u4ec5\u5f53\u672c\u5730\u7f51\u7edc\u5177\u6709\u6709\u6548\u7684 IPv6 \u7f51\u7edc\u65f6\uff0c\u624d\u4f7f\u7528 IPv6 \u8bbe\u7f6e Surge VIF always \uff1a\u59cb\u7ec8\u4f7f\u7528 IPv6 \u8bbe\u7f6e Surge VIF</p> <ul> <li>dns-server</li> </ul> <pre><code>dns-server = system, 223.5.5.5, 119.29.29.29, 1.1.1.1, 1.0.0.1, 8.8.8.8, 8.8.4.4, 9.9.9.9:995\n</code></pre> <p>\u4f5c\u7528</p> <p>dns\u670d\u52a1\u5668\uff0c\u4e0a\u6e38DNS\u670d\u52a1\u5668\u7684IP\u5730\u5740</p> <ul> <li>skip-proxy</li> </ul> <pre><code>skip-proxy = localhost, *.local, 0.0.0.0/8, 10.0.0.0/8, 17.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.168.0.0/16, 192.88.99.0/24, 198.18.0.0/15, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 240.0.0.0/4, 255.255.255.255/32\n</code></pre> <p>\u4f5c\u7528</p> <p>\u8df3\u8fc7\u4ee3\u7406\uff0c\u5728 iOS \u7248\u672c\u4e2d\uff0c\u6b64\u9009\u9879\u5f3a\u5236\u4e0e\u8fd9\u4e9b\u57df/IP \u8303\u56f4\u7684\u8fde\u63a5\u7531 Surge VIF \u800c\u4e0d\u662f Surge \u4ee3\u7406\u5904\u7406\u3002\u5728 macOS \u7248\u672c\u4e2d\uff0c\u5f53\u542f\u7528\u201c\u8bbe\u7f6e\u4e3a\u7cfb\u7edf\u4ee3\u7406\u201d\u65f6\uff0c\u8fd9\u4e9b\u8bbe\u7f6e\u5c06\u5e94\u7528\u4e8e\u7cfb\u7edf\u3002\u6b64\u9009\u9879\u7528\u4e8e\u4fee\u590d\u67d0\u4e9b\u5e94\u7528\u7684\u517c\u5bb9\u6027\u95ee\u9898\u3002 apple.com\u3001apple.com\u3001192.168.2. or 192.168.2.0/24 \u6ce8\u610f\uff1a\u5982\u679c\u8f93\u5165 IP \u5730\u5740\u6216\u5730\u5740\u8303\u56f4\uff0c\u5219\u53ea\u6709\u5728\u4f7f\u7528\u8be5\u5730\u5740\u8fde\u63a5\u5230\u8be5\u4e3b\u673a\u65f6\u624d\u80fd\u7ed5\u8fc7\u4ee3\u7406\uff0c\u800c\u4e0d\u80fd\u5728\u901a\u8fc7\u89e3\u6790\u4e3a\u8be5\u5730\u5740\u7684\u57df\u540d\u8fde\u63a5\u5230\u4e3b\u673a\u65f6\u7ed5\u8fc7\u4ee3\u7406\u3002</p> <ul> <li>exclude-simple-hostnames</li> </ul> <pre><code>exclude-simple-hostnames = true\n</code></pre> <p>\u4f5c\u7528</p> <p>\u6392\u9664\u7b80\u5355\u4e3b\u673a\u540d\uff0c\u5c31\u50cf skip-proxy \u53c2\u6570\u4e00\u6837\u3002\u6b64\u9009\u9879\u5141\u8bb8\u8bf7\u6c42\u4f7f\u7528\u7531 Surge VIF \u800c\u4e0d\u662f Surge \u4ee3\u7406\u5904\u7406\u7684\u7b80\u5355\u4e3b\u673a\u540d\uff08\u4e0d\u5e26\u70b9\uff09\u3002 \u6bd4\u5982\uff1amysql01\u3001redis01</p> <ul> <li>external-controller-access</li> </ul> <pre><code>external-controller-access = mima1234@0.0.0.0:6166\n</code></pre> <p>\u4f5c\u7528</p> <p>\u5916\u90e8\u63a7\u5236\u5668\u8bbf\u95ee\uff0c\u6b64\u9009\u9879\u5141\u8bb8\u5916\u90e8\u63a7\u5236\u5668\u63a7\u5236 Surge\uff0c\u4f8b\u5982 Surge Dashboard \uff08macOS\uff09 \u548c Surge iOS \u9065\u63a7\u5668 \uff08iOS\uff09\u3002\u4f8b\u5982\uff1akey@0.0.0.0:6166</p> <ul> <li>http-api-tls</li> </ul> <pre><code>http-api-tls = False\n</code></pre> <p>\u4f5c\u7528</p> <p>\u4f7f\u7528 HTTPS \u534f\u8bae\u800c\u4e0d\u662f HTTP\u5fc5\u987b\u5148\u914d\u7f6e MitM CA \u8bc1\u4e66\u3002\u60a8\u9700\u8981\u5728\u5ba2\u6237\u7aef\u8bbe\u5907\u4e0a\u624b\u52a8\u5b89\u88c5\u8bc1\u4e66\u3002</p> <ul> <li>http-api-web-dashboard</li> </ul> <pre><code>http-api-web-dashboard = false\n</code></pre> <p>\u4f5c\u7528</p> <p>\u542f\u7528\u6b64\u529f\u80fd\u540e\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7 Web \u6d4f\u89c8\u5668\u63a7\u5236 Surge\u3002</p> <ul> <li>show-error-page-for-reject</li> </ul> <pre><code>show-error-page-for-reject = true\n</code></pre> <p>\u4f5c\u7528</p> <p>\u663e\u793a\u9519\u8bef\u9875\u9762\u62d2\u7edd\uff0c\u5982\u679c\u8bf7\u6c42\u662f\u7eaf HTTP \u8bf7\u6c42\uff0c\u5219\u663e\u793a REJECT \u7b56\u7565\u7684\u9519\u8bef\u7f51\u9875\u3002</p> <ul> <li>tun-excluded-routes</li> </ul> <pre><code>tun-excluded-routes = 22.0.0.0/8\n</code></pre> <p>\u4f5c\u7528</p> <p>Surge VIF\u53ea\u80fd\u5904\u7406 TCP \u548c UDP \u534f\u8bae\u3002\u4f7f\u7528\u6b64\u9009\u9879\u53ef\u7ed5\u8fc7\u7279\u5b9a IP \u8303\u56f4\uff0c\u4ee5\u5141\u8bb8\u6240\u6709\u6d41\u91cf\u901a\u8fc7\u3002 \u6ce8\u610f\uff1a\u6b64\u9009\u9879\u4ec5\u9002\u7528\u4e8eSurge VIF\u3002Surge Proxy Server \u5904\u7406\u7684\u8bf7\u6c42\u4e0d\u53d7\u5f71\u54cd\u3002\u5408\u5e76 skip-proxy \u5e76\u786e\u4fdd tun-excluded-routes \u7279\u5b9a HTTP \u6d41\u91cf\u7ed5\u8fc7 Surge\u3002</p> <ul> <li>tun-included-routes</li> </ul> <pre><code>tun-included-routes = 192.18.0.0/16\n</code></pre> <p>\u4f5c\u7528</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cSurge VIF \u63a5\u53e3\u5c06\u81ea\u8eab\u58f0\u660e\u4e3a\u9ed8\u8ba4\u8def\u7531\u3002\u4f46\u662f\uff0c\u7531\u4e8e Wi-Fi \u63a5\u53e3\u7684\u8def\u7531\u8f83\u5c0f\uff0c\u56e0\u6b64\u67d0\u4e9b\u6d41\u91cf\u53ef\u80fd\u65e0\u6cd5\u901a\u8fc7\u6d6a\u6d8c VIF \u63a5\u53e3\u3002\u4f7f\u7528\u6b64\u9009\u9879\u53ef\u6dfb\u52a0\u8f83\u5c0f\u7684\u8def\u7531\u3002</p> <ul> <li>internet-test-url</li> </ul> <pre><code>internet-test-url = http://223.6.6.6\n</code></pre> <p>\u4f5c\u7528</p> <p>\u56fd\u5185Internet \u8fde\u63a5\u6d4b\u8bd5\u7684 URL, \u4ee5\u53ca\uff0cDIRECT \u7b56\u7565\u7684\u6d4b\u8bd5 URL</p> <ul> <li>proxy-test-url</li> </ul> <pre><code>proxy-test-url = http://1.0.0.1/generate_204\n</code></pre> <p>\u4f5c\u7528</p> <p>\u4ee3\u7406\u3001\u7b56\u7565\u7ec4\u7684\u9ed8\u8ba4\u6d4b\u8bd5 URL</p> <ul> <li>test-timeout</li> </ul> <pre><code>test-timeout = 5\n</code></pre> <p>\u4f5c\u7528</p> <p>\u8fde\u63a5\u6d4b\u8bd5\u8d85\u65f6\uff08\u79d2\uff09</p> <ul> <li>always-real-ip</li> </ul> <pre><code>always-real-ip = *.test.com\n</code></pre> <p>\u4f5c\u7528</p> <p>\u59cb\u7ec8\u771f\u5b9e\u7684 IP \u6b64\u9009\u9879\u8981\u6c42 Surge \u5728 Surge VIF \u5904\u7406 DNS \u95ee\u9898\u65f6\u8fd4\u56de\u771f\u5b9e IP \u5730\u5740\u800c\u4e0d\u662f\u865a\u5047 IP \u5730\u5740 DNS\u6570\u636e\u5305\u5c06\u88ab\u8f6c\u53d1\u5230\u4e0a\u6e38DNS\u670d\u52a1\u5668 \u6b64\u53c2\u6570\u5c5e\u4e8e\u4e3b\u673a\u5217\u8868\u7c7b\u578b\uff0c\u8be6\u7ec6\u89c4\u5219\u8bf7\u53c2\u89c1\uff1ahttps://manual.nssurge.com/others/host-list.html 1.\u4f7f\u7528\u524d\u7f00 - \u6392\u9664\u4e3b\u673a\u540d 2.\u652f\u6301\u901a\u914d\u7b26 * \u548c ? 3.\u4f7f\u7528\u540e\u7f00 :port \u5339\u914d\u5176\u4ed6\u7aef\u53e3,\u5982\u679c\u672a\u63d0\u4f9b\u7aef\u53e3\u53f7\uff0c\u5219 Surge \u5c06\u81ea\u52a8\u4e3a\u8be5\u53c2\u6570\u9644\u52a0\u6807\u51c6\u7aef\u53e3\u53f7\uff0c\u5c31\u50cf force-http-engine-hosts \u53c2\u6570\u4e00\u6837\uff0c\u5982\u679c\u4ec5\u914d\u7f6e\u4e86\u4e3b\u673a\u540d\uff0c\u5219\u4ec5\u5bf9\u7aef\u53e3 80 \u6709\u6548\u3002\u5bf9\u4e8e MITM \u529f\u80fd\uff0c\u5b83\u4ec5\u5bf9\u7aef\u53e3 443 \u6709\u6548\u3002 4.\u4f7f\u7528\u540e\u7f00 :0 \u4ee5\u5339\u914d\u6240\u6709\u7aef\u53e3 5.\u4f7f\u7528 \u76f4\u63a5\u4f7f\u7528 IPv4/IPv6 \u5730\u5740\uff08\u800c\u4e0d\u662f\u57df\uff09\u5339\u914d\u6240\u6709\u4e3b\u673a\u540d eg: -icloud, -.mzstatic.com, -.facebook.com, -.instagram.com, -.twitter.com, -dropbox, -apple, -*.amazonaws.com, -, * <ul> <li>hijack-dns</li> </ul> <pre><code>hijack-dns = *:53\n</code></pre> <p>\u4f5c\u7528</p> <p>\u52ab\u6301DNS,\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cSurge \u4ec5\u8fd4\u56de\u53d1\u9001\u5230 Surge DNS \u5730\u5740 \uff08198.18.0.2\uff09 \u7684 DNS \u67e5\u8be2\u7684\u865a\u5047 IP \u5730\u5740\u3002\u53d1\u9001\u5230\u6807\u51c6 DNS \u7684\u67e5\u8be2\u5c06\u88ab\u8f6c\u53d1\u3002\u67d0\u4e9b\u8bbe\u5907\u6216\u8f6f\u4ef6\u59cb\u7ec8\u4f7f\u7528\u786c\u7f16\u7801\u7684 DNS \u670d\u52a1\u5668\u3002\uff08\u4f8b\u5982\uff0cGoogle Speakers\u59cb\u7ec8\u4f7f\u7528 8.8.8.8\uff09\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u6b64\u9009\u9879\u52ab\u6301\u67e5\u8be2\u4ee5\u83b7\u53d6\u865a\u5047\u5730\u5740\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 hijack-dns = *:53 \u52ab\u6301\u6240\u6709DNS\u67e5\u8be2</p> <ul> <li>force-http-engine-hosts</li> </ul> <pre><code>force-http-engine-hosts = *.test.com\n</code></pre> <p>\u4f5c\u7528</p> <p>\u4f7f Surge \u5c06 TCP \u8fde\u63a5\u89c6\u4e3a HTTP \u8bf7\u6c42\u3002Surge HTTP \u5f15\u64ce\u5c06\u5904\u7406\u8bf7\u6c42\uff0c\u5e76\u4e14\u6240\u6709\u9ad8\u7ea7\u529f\u80fd\u90fd\u5c06\u53ef\u7528\uff0c\u4f8b\u5982\u6355\u83b7\u3001\u91cd\u5199\u548c\u811a\u672c\u7f16\u5199\u3002\u6b64\u53c2\u6570\u5c5e\u4e8e\u4e3b\u673a\u5217\u8868\u7c7b\u578b\uff0c\u8be6\u7ec6\u89c4\u5219\u8bf7\u53c2\u89c1\uff1ahttps://manual.nssurge.com/others/host-list.html</p> <ul> <li>encrypted-dns-follow-outbound-mode</li> </ul> <pre><code>encrypted-dns-follow-outbound-mode = true\n</code></pre> <p>\u4f5c\u7528</p> <p>\u52a0\u5bc6 DNS \u8ddf\u968f\u51fa\u7ad9\u6a21\u5f0f,\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u52a0\u5bc6\u7684 DNS \u67e5\u627e\u4f7f\u7528\u76f4\u63a5\u51fa\u7ad9\u3002\u542f\u7528\u8be5\u9009\u9879\u5c06\u4f7f DOH \u9075\u5faa\u51fa\u7ad9\u6a21\u5f0f\u8bbe\u7f6e\u548c\u89c4\u5219\u3002</p> <ul> <li>encrypted-dns-server</li> </ul> <pre><code>encrypted-dns-server = \n</code></pre> <p>\u4f5c\u7528</p> <p>\u52a0\u5bc6\u7684 DNS \u670d\u52a1\u5668,\u52a0\u5bc6\u7684 DNS \u670d\u52a1\u5668\u7684 URL\u3002\u5982\u679c\u914d\u7f6e\u4e86\u52a0\u5bc6 DNS\uff0c\u5219\u4f20\u7edf DNS \u5c06\u4ec5\u7528\u4e8e\u6d4b\u8bd5\u8fde\u63a5\u5e76\u89e3\u6790\u52a0\u5bc6 DNS URL \u4e2d\u7684\u57df\u3002</p> <ul> <li>encrypted-dns-skip-cert-verification</li> </ul> <pre><code>encrypted-dns-skip-cert-verification = false\n</code></pre> <p>\u4f5c\u7528</p> <p>\u8df3\u8fc7\u52a0\u5bc6\u7684DNS\u670d\u52a1\u5668\u8bc1\u4e66\u9a8c\u8bc1\uff0c\u8fd9\u662f\u4e0d\u5b89\u5168\u7684\u3002</p> <ul> <li>use-local-host-item-for-proxy</li> </ul> <pre><code>use-local-host-item-for-proxy = true\n</code></pre> <p>\u4f5c\u7528</p> <p>\u4f7f\u7528\u672c\u5730\u4e3b\u673a\u4ee3\u7406,\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u4f7f\u7528\u4ee3\u7406\u7b56\u7565\uff0c\u5219\u59cb\u7ec8\u5728\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u6267\u884c DNS \u67e5\u627e\u3002\u542f\u7528\u6b64\u9009\u9879\u540e\uff0c\u5982\u679c\u5b58\u5728\u76ee\u6807\u57df\u7684\u672c\u5730 DNS \u6620\u5c04\u7ed3\u679c\uff0c\u5219 Surge \u4f1a\u4f7f\u7528 IP \u5730\u5740\u800c\u4e0d\u662f\u57df\u6765\u8bbe\u7f6e\u4ee3\u7406\u8fde\u63a5\u3002</p> <ul> <li>geoip-maxmind-url</li> </ul> <pre><code>geoip-maxmind-url = https://github.com/Hackl0us/GeoIP2-CN/raw/release/Country.mmdb\n</code></pre> <p>\u4f5c\u7528</p> <p>\u8981\u66f4\u65b0\u7684 GeoIP \u6570\u636e\u5e93\u7684 URL</p> <ul> <li>disable-geoip-db-auto-update</li> </ul> <pre><code>disable-geoip-db-auto-update = false\n</code></pre> <p>\u4f5c\u7528</p> <p>\u7981\u7528 GeoIP \u6570\u636e\u5e93\u7684\u81ea\u52a8\u66f4\u65b0</p> <ul> <li>allow-dns-svcb</li> </ul> <pre><code>allow-dns-svcb = false\n</code></pre> <p>\u4f5c\u7528</p> <p>iOS \u7cfb\u7edf\u53ef\u80fd\u4f1a\u6267\u884c SVCB \u8bb0\u5f55 DNS \u67e5\u627e\uff0c\u800c\u4e0d\u662f\u6807\u51c6 A \u8bb0\u5f55\u67e5\u627e\u3002\u8fd9\u4f1a\u5bfc\u81f4 Surge \u65e0\u6cd5\u8fd4\u56de\u865a\u62df IP \u5730\u5740\u3002\u56e0\u6b64\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u7981\u6b62 SVCB \u8bb0\u5f55\u67e5\u627e\uff0c\u4ee5\u5f3a\u5236\u7cfb\u7edf\u6267\u884c A \u8bb0\u5f55\u67e5\u627e\u3002</p> <ul> <li>udp-policy-not-supported-behaviour</li> </ul> <pre><code>udp-policy-not-supported-behaviour = REJECT\n</code></pre> <p>\u4f5c\u7528</p> <p>UDP \u6d41\u91cf\u4e0e\u4e0d\u652f\u6301 UDP \u4e2d\u7ee7\u7684\u7b56\u7565\u5339\u914d\u65f6\u7684\u56de\u9000\u884c\u4e3a,\u53ef\u80fd\u7684\u503c\uff1a DIRECT \u3001 REJECT, \u5982\u679c\u6ca1\u6709\u4ee3\u7406\u670d\u52a1\u5668\u652f\u6301 UDP \u8f6c\u53d1\uff0c\u53ef\u4fee\u6539\u4e3a\u300c direct \u300d\u6216\u6ce8\u91ca\u4e0b\u6761\uff0c\u4f46\u9700\u6ce8\u610f\u540c\u4e00\u76ee\u6807\u4e3b\u673a\u540d TCP \u8bf7\u6c42\u4e0e UDP \u8bf7\u6c42\u7684\u6e90\u5730\u5740\u4e0d\u540c\u6240\u9020\u6210\u7684\u9690\u79c1\u53ca\u5b89\u5168\u98ce\u9669\u3002</p> <ul> <li>proxy-test-udp</li> </ul> <pre><code>proxy-test-udp = apple.com@8.8.8.8\n</code></pre> <p>\u4f5c\u7528</p> <p>\u4ee3\u7406\u7684\u9ed8\u8ba4 UDP \u6d4b\u8bd5\u53c2\u6570, \u4f8b\u5982\uff1a apple.com@8.8.8.8</p> <ul> <li>udp-priority</li> </ul> <pre><code>udp-priority = false\n</code></pre> <p>\u4f5c\u7528</p> <p>\u5f53\u7cfb\u7edf\u8d1f\u8f7d\u975e\u5e38\u9ad8\u4e14\u6570\u636e\u5305\u5904\u7406\u5ef6\u8fdf\u65f6\uff0c\u542f\u7528\u5c06\u4f18\u5148\u5904\u7406 UDP \u6570\u636e\u5305\u3002\u4e5f\u79f0\u4e3a\u6e38\u620f\u6a21\u5f0f</p> <ul> <li>always-raw-tcp-hosts</li> </ul> <pre><code>always-raw-tcp-hosts = *.baidu.com\n</code></pre> <p>\u4f5c\u7528</p> <p>Surge \u5c06\u81ea\u52a8\u55c5\u63a2\u53d1\u9001\u5230\u7aef\u53e3 80 \u548c 443 \u7684 TCP \u8bf7\u6c42\u7684\u534f\u8bae\uff0c\u4ece\u800c\u5728\u4f18\u5316\u6027\u80fd\u7684\u540c\u65f6\u542f\u7528\u9ad8\u7ea7 HTTP/HTTPS \u529f\u80fd\u3002\u4f46\u662f\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4e00\u4e9b\u517c\u5bb9\u6027\u95ee\u9898\u3002\u5982\u679c\u9047\u5230\u95ee\u9898\uff0c\u53ef\u4ee5\u5728\u6b64\u5904\u6dfb\u52a0\u4e3b\u673a\u540d\uff0cSurge \u4e0d\u4f1a\u55c5\u63a2\u8fd9\u4e9b\u8bf7\u6c42\u7684\u534f\u8bae\u3002\u6b64\u53c2\u6570\u5c5e\u4e8e\u4e3b\u673a\u5217\u8868\u7c7b\u578b\uff0c\u8be6\u7ec6\u89c4\u5219\u8bf7\u53c2\u89c1\uff1ahttps://manual.nssurge.com/others/host-list.html</p>"},{"location":"mac/surge/#ios","title":"iOS \u72ec\u6709\u7684\u914d\u7f6e\u9879","text":"<ul> <li>allow-wifi-access</li> </ul> <pre><code>allow-wifi-access = false\n</code></pre> <p>\u4f5c\u7528</p> <p>\u5141\u8bb8 wifi \u8bbf\u95ee,\u5141\u8bb8 Surge \u4ee3\u7406\u670d\u52a1\u4ece LAN \u4e2d\u7684\u5176\u4ed6\u8bbe\u5907\u8bbf\u95ee\u3002</p> <ul> <li>wifi-access-http-port</li> </ul> <pre><code>wifi-access-http-port = 6152\n</code></pre> <p>\u4f5c\u7528</p> <p>Surge HTTP \u4ee3\u7406\u670d\u52a1\u7684\u7aef\u53e3\u53f7</p> <ul> <li>wifi-access-socks5-port</li> </ul> <pre><code>wifi-access-socks5-port = 6153\n</code></pre> <p>\u4f5c\u7528</p> <p>Surge SOCKS5 \u4ee3\u7406\u670d\u52a1\u7684\u7aef\u53e3\u53f7</p> <ul> <li>wifi-access-http-auth</li> </ul> <pre><code>wifi-access-http-auth = surge:mima1234\n</code></pre> <p>\u4f5c\u7528</p> <p>\u8981\u6c42\u5bf9 Surge HTTP \u4ee3\u7406\u670d\u52a1\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u4f8b\u5982\uff1a\u7528\u6237\u540d\uff1a\u5bc6\u7801</p> <ul> <li>wifi-assist</li> </ul> <pre><code>wifi-assist = false\n</code></pre> <p>\u4f5c\u7528</p> <p>\u542f\u7528 Wi-Fi \u52a9\u624b (\u5728 Wi-Fi \u7f51\u7edc\u4e0d\u4f73\u65f6\u5c1d\u8bd5\u4f7f\u7528\u6570\u636e\u7f51\u7edc\u5efa\u7acb\u8fde\u63a5\uff0c\u8bf7\u4ec5\u5f53\u4f7f\u7528\u4e0d\u9650\u91cf\u7684\u6570\u636e\u6d41\u91cf\u65f6\u5f00\u542f)</p> <ul> <li>hide-vpn-icon</li> </ul> <pre><code>hide-vpn-icon = false\n</code></pre> <p>\u4f5c\u7528</p> <p>\u9690\u85cf\u72b6\u6001\u680f\u4e2d\u7684 VPN \u56fe\u6807</p> <ul> <li>all-hybrid</li> </ul> <pre><code>all-hybrid = false\n</code></pre> <p>\u4f5c\u7528</p> <p>\u5f53 Wi-Fi \u7f51\u7edc\u8f83\u5dee\u65f6\uff0c\u4e0d\u8981\u8bbe\u7f6e\u4e0e\u8702\u7a9d\u6570\u636e\u7684\u8fde\u63a5\uff0c\u800c\u662f\u59cb\u7ec8\u540c\u65f6\u8bbe\u7f6e\u4e0e Wi-Fi \u548c\u8702\u7a9d\u6570\u636e\u7684\u8fde\u63a5 \u6b64\u9009\u9879\u53ef\u4ee5\u5728 Wi-Fi \u8f83\u5dee\u6216 Wi-Fi \u7f51\u7edc\u5207\u6362\u65f6\u663e\u8457\u6539\u5584\u7f51\u7edc\u4f53\u9a8c \u6b64\u529f\u80fd\u5c06\u5e94\u7528\u4e8e\u6240\u6709 TCP \u8fde\u63a5\u548c DNS \u67e5\u627e\u3002\u4ec5\u5f53\u60a8\u62e5\u6709\u65e0\u9650\u7684\u8702\u7a9d\u6570\u636e\u8ba1\u5212\u65f6\u624d\u542f\u7528\u5b83</p> <ul> <li>allow-hotspot-access</li> </ul> <pre><code>allow-hotspot-access = ture\n</code></pre> <p>\u4f5c\u7528</p> <p>\u5141\u8bb8\u5728\u201c\u4e2a\u4eba\u70ed\u70b9\u201d\u6253\u5f00\u65f6\u4ece\u5176\u4ed6\u8bbe\u5907\u8bbf\u95ee Surge \u4ee3\u7406\u670d\u52a1</p> <ul> <li>include-all-networks</li> </ul> <pre><code>include-all-networks = false\n</code></pre> <p>\u4f5c\u7528</p> <p>\u5305\u542b\u6240\u6709\u7f51\u7edc,\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u67d0\u4e9b\u8bf7\u6c42\u53ef\u80fd\u4e0d\u4f1a\u88ab Surge \u63a5\u7ba1\u3002\u4f8b\u5982\uff0c\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u7ed1\u5b9a\u5230\u7269\u7406\u7f51\u7edc\u63a5\u53e3\u4ee5\u7ed5\u8fc7\u6d6a\u6d8c VIF\u3002\u542f\u7528\u201c\u5305\u62ec\u6240\u6709\u7f51\u7edc\u201d\u9009\u9879\uff0c\u4ee5\u786e\u4fdd\u6240\u6709\u8bf7\u6c42\u90fd\u7531 Surge \u5904\u7406\u800c\u4e0d\u4f1a\u6cc4\u6f0f\u3002\u5f53\u60a8\u4f7f\u7528 Surge \u4f5c\u4e3a\u9632\u706b\u5899\u65f6\uff0c\u6b64\u9009\u9879\u5f88\u6709\u7528\u3002\uff08\u9700\u8981 iOS 14.0 \u6216\u4ee5\u4e0a\u7248\u672c\uff09,\u542f\u7528\u6b64\u9009\u9879\u53ef\u80fd\u4f1a\u5bfc\u81f4 AirDrop \u548c Xcode \u8c03\u8bd5\u95ee\u9898\u3001\u901a\u8fc7 USB \u7684 Surge Dashboard \u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\u4ee5\u53ca\u5176\u4ed6\u610f\u5916\u7684\u526f\u4f5c\u7528\u3002\u8bf7\u8c28\u614e\u4f7f\u7528\u3002</p> <ul> <li>include-local-networks</li> </ul> <pre><code>include-local-networks = false\n</code></pre> <p>\u4f5c\u7528</p> <p>\u5305\u542b\u672c\u5730\u7f51\u7edc,\u542f\u7528\u6b64\u9009\u9879\u53ef\u4f7f Surge VIF \u5904\u7406\u53d1\u9001\u5230 LAN \u7684\u8bf7\u6c42\u3002\uff08\u9700\u8981 iOS 14.2 \u6216\u66f4\u9ad8\u7248\u672c\uff09\u542f\u7528\u6b64\u9009\u9879\u53ef\u80fd\u4f1a\u5bfc\u81f4 AirDrop \u548c Xcode \u8c03\u8bd5\u95ee\u9898\u3001\u901a\u8fc7 USB \u7684 Surge Dashboard \u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\u4ee5\u53ca\u5176\u4ed6\u610f\u5916\u7684\u526f\u4f5c\u7528\u3002\u8bf7\u8c28\u614e\u4f7f\u7528\u3002\u5fc5\u987b\u4e0e include-all-networks=true \u7ed3\u5408\u4f7f\u7528\u3002</p> <ul> <li>include-apns</li> </ul> <pre><code>include-apns = false\n</code></pre> <p>\u4f5c\u7528</p> <p>\u542f\u7528\u6b64\u9009\u9879\u53ef\u4f7f Surge VIF \u5904\u7406 Apple \u63a8\u9001\u901a\u77e5\u670d\u52a1 \uff08APNs\uff09 \u7684\u7f51\u7edc\u6d41\u91cf\u3002\u5fc5\u987b\u4e0e include-all-networks=true \u7ed3\u5408\u4f7f\u7528\u3002</p> <ul> <li>include-cellular-services</li> </ul> <pre><code>include-cellular-services = false\n</code></pre> <p>\u4f5c\u7528</p> <p>\u542f\u7528\u6b64\u9009\u9879\u53ef\u4f7f Surge VIF \u5904\u7406\u8702\u7a9d\u670d\u52a1\u7684 Internet \u53ef\u8def\u7531\u7f51\u7edc\u6d41\u91cf\u3002\uff08VoLTE\u3001Wi-Fi \u901a\u8bdd\u3001IMS\u3001\u5f69\u4fe1\u3001\u53ef\u89c6\u8bed\u97f3\u4fe1\u7bb1\u7b49\uff09.\u8bf7\u6ce8\u610f\uff0c\u67d0\u4e9b\u8702\u7a9d\u8fd0\u8425\u5546\u4f1a\u7ed5\u8fc7\u4e92\u8054\u7f51\uff0c\u5c06\u8702\u7a9d\u7f51\u7edc\u670d\u52a1\u6d41\u91cf\u76f4\u63a5\u8def\u7531\u5230\u8fd0\u8425\u5546\u7f51\u7edc\u3002\u6b64\u7c7b\u8702\u7a9d\u670d\u52a1\u6d41\u91cf\u59cb\u7ec8\u88ab\u6392\u9664\u5728\u96a7\u9053\u4e4b\u5916\u3002\u5fc5\u987b\u4e0e include-all-networks=true \u7ed3\u5408\u4f7f\u7528\u3002</p> <ul> <li>compatibility-mode</li> </ul> <pre><code>compatibility-mode = 1\n</code></pre> <p>\u4f5c\u7528</p> <p>\u517c\u5bb9\u6027\u6a21\u5f0f,\u6b64\u9009\u9879\u7528\u4e8e\u63a7\u5236 Surge iOS \u7684\u5de5\u4f5c\u6a21\u5f0f\u3002</p> <p>0\uff1a\u81ea\u52a8\uff0c\u5728 5.8.0 \u4e4b\u524d\u7684 Surge iOS \u7248\u672c\u4e2d\uff0c\u8fd9\u76f8\u5f53\u4e8e 1\uff0c\u4ece 5.8.0 \u5f00\u59cb\uff0c\u5b83\u76f8\u5f53\u4e8e 3</p> <p>1\uff1a\u4ee3\u7406\u63a5\u7ba1 + VIF\uff0c\u5728\u6b64\u6a21\u5f0f\u4e0b\uff0c\u4ee3\u7406\u63a5\u7ba1\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e VIF \u63a5\u7ba1\uff0c\u63d0\u4f9b\u6700\u4f73\u6027\u80fd\uff0c\u4f46\u67d0\u4e9b\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u68c0\u67e5\u4ee3\u7406\u8bbe\u7f6e\u5e76\u62d2\u7edd\u5de5\u4f5c\u3002</p> <p>2\uff1a\u4ec5\u4ee3\u7406\u63a5\u7ba1</p> <p>3\uff1aVIF Takeover Only\uff1a\u6700\u65b0\u7248\u672c\u7684\u9ed8\u8ba4\u5de5\u4f5c\u6a21\u5f0f\u3002</p> <p>4\uff1a\u4ee3\u7406\u63a5\u7ba1 + VIF\uff0c\u4f46\u4ee3\u7406\u4f7f\u7528 VIF \u5730\u5740\u800c\u4e0d\u662f\u73af\u56de\u5730\u5740\u3002</p> <p>5\uff1a\u4ee3\u7406\u63a5\u7ba1+VIF\uff0c\u4f46VIF\u8def\u7531\u4f7f\u7528\u591a\u4e2a\u8f83\u5c0f\u7684\u8def\u7531\u8fdb\u884c\u63a5\u7ba1\uff0c\u6ca1\u6709\u914d\u7f6e\u9ed8\u8ba4\u8def\u7531\uff0c\u53ef\u4ee5\u7528\u6765\u7ed5\u8fc7\u4e00\u4e9b\u7279\u6b8a\u95ee\u9898\u3002\uff08\u4f8b\u5982\uff0cHomeKit \u5b89\u9632\u6444\u50cf\u5934\uff09</p>"},{"location":"mac/surge/#macos","title":"Macos \u72ec\u6709\u7684\u914d\u7f6e","text":"<ul> <li>use-default-policy-if-wifi-not-primary</li> </ul> <pre><code>use-default-policy-if-wifi-not-primary = false\n</code></pre> <p>\u4f5c\u7528</p> <p>\u5982\u679c\u7981\u7528\uff0c\u5373\u4f7f Wi-Fi \u4e0d\u662f\u4e3b\u7f51\u7edc\u63a5\u53e3\uff0cSSID/BSSID \u6a21\u5f0f\u4ecd\u53ef\u5339\u914d\u3002</p> <ul> <li>read-etc-hosts</li> </ul> <pre><code>read-etc-hosts = true\n</code></pre> <p>\u4f5c\u7528</p> <p>\u9075\u5faa /etc/hosts \u4e2d\u7684\u672c\u5730 DNS \u6620\u5c04\u9879</p> <ul> <li>http-listen</li> </ul> <pre><code>http-listen = 0.0.0.0\n</code></pre> <p>\u4f5c\u7528</p> <p>Surge HTTP \u4ee3\u7406\u670d\u52a1\u7684\u7aef\u53e3\u53f7</p> <ul> <li>socks5-listen</li> </ul> <pre><code>socks5-listen = 0.0.0.0\n</code></pre> <p>\u4f5c\u7528</p> <p>Surge SOCKS5 \u4ee3\u7406\u670d\u52a1\u7684\u7aef\u53e3\u53f7</p> <ul> <li>debug-cpu-usage</li> </ul> <pre><code>debug-cpu-usage = false\n</code></pre> <p>\u4f5c\u7528</p> <p>\u542f\u7528 CPU \u8c03\u8bd5\u6a21\u5f0f\u3002\u8fd9\u53ef\u80fd\u4f1a\u964d\u4f4e\u6027\u80fd</p> <ul> <li>debug-memory-usage</li> </ul> <pre><code>debug-memory-usage = false\n</code></pre> <p>\u4f5c\u7528</p> <p>\u542f\u7528\u5185\u5b58\u8c03\u8bd5\u6a21\u5f0f\u3002\u8fd9\u53ef\u80fd\u4f1a\u964d\u4f4e\u6027\u80fd</p> <ul> <li>vif-mode</li> </ul> <pre><code>vif-mode = v3\n</code></pre> <p>\u4f5c\u7528</p> <p>vif\u6a21\u5f0f</p> <p>auto \uff1a\u8ba9Surge\u81ea\u52a8\u9009\u62e9\u6700\u5408\u9002\u7684\u5de5\u4f5c\u6a21\u5f0f\u3002</p> <p>v1 \uff1a\u4f20\u7edf\u6a21\u5f0f\uff0cTCP\u534f\u8bae\u6808\u5b8c\u5168\u7531Surge\u7ba1\u7406\u3002\u7531\u4e8e Surge \u8fd0\u884c\u5728\u7528\u6237\u7a7a\u95f4\u4e2d\uff0c\u8fd9\u610f\u5473\u7740\u6bcf\u4e2a\u6570\u636e\u5305\u90fd\u9700\u8981\u4ece\u5185\u6838\u7a7a\u95f4\u4f20\u8f93\u5230\u7528\u6237\u7a7a\u95f4\u8fdb\u884c\u5904\u7406\u3002</p> <p>v2 \uff1a\u5728 5.0 \u7248\u672c\u4e2d\u5f15\u5165\uff0c\u5b83\u4f7f\u7528 macOS \u4e2d\u7684\u6570\u636e\u5305\u8fc7\u6ee4\u5668\u673a\u5236\uff0c\u5229\u7528 macOS \u7684 TCP \u534f\u8bae\u6808\uff0c\u4ece\u800c\u907f\u514d\u4e86\u5728\u5185\u6838\u7a7a\u95f4\u548c\u7528\u6237\u7a7a\u95f4\u4e4b\u95f4\u5207\u6362\u7684\u5f00\u9500\uff0c\u4ece\u800c\u663e\u7740\u63d0\u9ad8\u4e86\u6027\u80fd\u3002\u4f46\u662f\uff0c\u7531\u4e8e\u5b83\u9700\u8981\u4fee\u6539 pf \u8bbe\u7f6e\uff0c\u56e0\u6b64\u5b83\u4e0e\u865a\u62df\u673a\u7f51\u7edc\u548c\u7f51\u7edc\u5171\u4eab\u529f\u80fd\u4e0d\u517c\u5bb9\u3002</p> <p>v3 \uff1a\u5728 5.2 \u7248\u4e2d\u5f15\u5165\uff0c\u5b83\u7ed5\u8fc7\u4e86\u6570\u636e\u5305\u8fc7\u6ee4\u5668\uff0c\u5e76\u91c7\u7528\u53e6\u4e00\u79cd\u6280\u672f\u6765\u4f7f\u7528 macOS \u7684 TCP \u534f\u8bae\u6808\u3002\u6027\u80fd\u7565\u4f4e\u4e8e v2\uff0c\u4f46\u907f\u514d\u4e86\u56e0\u8c03\u6574 pf \u8bbe\u7f6e\u800c\u5bfc\u81f4\u7684\u517c\u5bb9\u6027\u95ee\u9898\u3002</p>"},{"location":"mac/surge_v2/","title":"Surge","text":"<p>\u5728<code>\u66f4\u591a</code>---&gt;<code>\u914d\u7f6e</code>---&gt;<code>\u5728Finder\u4e2d\u627e\u5230\u914d\u7f6e</code></p> <p></p> <p>\u672c\u6587\u6d89\u53ca\u7684\u914d\u7f6e\u6587\u4ef6\u90fd\u662f\u5728\u8fd9\u4e2a\u76ee\u5f55\u91cc\u624b\u64b8\u7684\uff0c\u6216\u8005\u590d\u5236\u5230\u8fd9\u4e2a\u6587\u4ef6\u91cc\u7684</p> <ul> <li>\u624b\u64b8\u914d\u7f6e\u6587\u4ef6</li> </ul>"},{"location":"mac/surge_v2/#1","title":"1. \u914d\u7f6e","text":"<p>\u4e3a\u4e86\u907f\u514d\u8ba2\u9605\u66b4\u9732\u7684\u98ce\u9669\uff0c\u672c\u6559\u7a0b\u4e0d\u6d89\u53ca\u8ba2\u9605\u7684\u8f6c\u6362</p>"},{"location":"mac/surge_v2/#11","title":"1.1. \u624b\u64b8\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>[General]\n# ================ iOS\u548cMacOS\u5171\u540c\u7684 Surge \u53c2\u6570 ================ #\n# &gt; \u65e5\u5fd7\u7ea7\u522b verbose, info, notify, or warning \u4e0d\u5efa\u8bae\u5728\u65e5\u5e38\u4f7f\u7528\u4e2d\u542f\u7528\u8be6\u7ec6\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u663e\u8457\u964d\u4f4e\u6027\u80fd\u3002\nloglevel = notify\n# &gt; IPv6\u534f\u8bae \u542f\u7528\u5b8c\u6574\u7684 IPv6 \u652f\u6301\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u5f00\u542f\u8be5\u9009\u9879\u540e\uff0c\u8bbf\u95ee\u57df\u540d\u65f6\u4f1a\u67e5\u8be2\u8be5\u57df\u540d\u7684AAAA\u8bb0\u5f55\u3002\u5373\u4f7f\u672a\u542f\u7528\u6b64\u9009\u9879\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u76f4\u63a5\u8bbf\u95ee IPv6 \u5730\u5740\u6765\u8bbf\u95ee IPv6 \u7ad9\u70b9\u3002\nipv6 = false\n# &gt; \u5141\u8bb8 IPv6 \u901a\u8fc7 Surge VIF\u3002\u5f53\u60a8\u5e0c\u671b Surge \u5904\u7406\u8fde\u63a5\u5230 IPv6 \u5730\u5740\u7684\u539f\u59cb TCP \u8fde\u63a5\u65f6\u5f88\u6709\u7528\u3002\n# &gt; off \uff1a\u5207\u52ff\u4f7f\u7528 IPv6 \u8bbe\u7f6e Surge VIF\n# &gt; auto \uff1a\u4ec5\u5f53\u672c\u5730\u7f51\u7edc\u5177\u6709\u6709\u6548\u7684 IPv6 \u7f51\u7edc\u65f6\uff0c\u624d\u4f7f\u7528 IPv6 \u8bbe\u7f6e Surge VIF\n# &gt; always \uff1a\u59cb\u7ec8\u4f7f\u7528 IPv6 \u8bbe\u7f6e Surge VIF\nipv6-vif = false\n# &gt; dns\u670d\u52a1\u5668 \u4e0a\u6e38DNS\u670d\u52a1\u5668\u7684IP\u5730\u5740\ndns-server = system, 223.5.5.5, 119.29.29.29, 1.1.1.1, 1.0.0.1, 8.8.8.8, 8.8.4.4, 9.9.9.9:995\n# &gt; \u8df3\u8fc7\u4ee3\u7406 \u5728 iOS \u7248\u672c\u4e2d\uff0c\u6b64\u9009\u9879\u5f3a\u5236\u4e0e\u8fd9\u4e9b\u57df/IP \u8303\u56f4\u7684\u8fde\u63a5\u7531 Surge VIF \u800c\u4e0d\u662f Surge \u4ee3\u7406\u5904\u7406\u3002\u5728 macOS \u7248\u672c\u4e2d\uff0c\u5f53\u542f\u7528\u201c\u8bbe\u7f6e\u4e3a\u7cfb\u7edf\u4ee3\u7406\u201d\u65f6\uff0c\u8fd9\u4e9b\u8bbe\u7f6e\u5c06\u5e94\u7528\u4e8e\u7cfb\u7edf\u3002\u6b64\u9009\u9879\u7528\u4e8e\u4fee\u590d\u67d0\u4e9b\u5e94\u7528\u7684\u517c\u5bb9\u6027\u95ee\u9898\u3002\n# &gt; apple.com\u3001*apple.com\u3001192.168.2.* or 192.168.2.0/24\n# &gt; \u6ce8\u610f\uff1a\u5982\u679c\u8f93\u5165 IP \u5730\u5740\u6216\u5730\u5740\u8303\u56f4\uff0c\u5219\u53ea\u6709\u5728\u4f7f\u7528\u8be5\u5730\u5740\u8fde\u63a5\u5230\u8be5\u4e3b\u673a\u65f6\u624d\u80fd\u7ed5\u8fc7\u4ee3\u7406\uff0c\u800c\u4e0d\u80fd\u5728\u901a\u8fc7\u89e3\u6790\u4e3a\u8be5\u5730\u5740\u7684\u57df\u540d\u8fde\u63a5\u5230\u4e3b\u673a\u65f6\u7ed5\u8fc7\u4ee3\u7406\u3002\nskip-proxy = localhost, *.local, 0.0.0.0/8, 10.0.0.0/8, 17.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 172.17.0.0/12, 172.18.0.0/12, 172.19.0.0/12, 172.20.0.0/24, 192.0.0.0/24, 192.0.2.0/24, 192.168.0.0/16, 192.88.99.0/24, 198.18.0.0/15, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 240.0.0.0/4, 255.255.255.255/32, 117.71.53.199/32, 47.75.120.166/32\n# &gt; \u6392\u9664\u7b80\u5355\u4e3b\u673a\u540d \u5c31\u50cf skip-proxy \u53c2\u6570\u4e00\u6837\u3002\u6b64\u9009\u9879\u5141\u8bb8\u8bf7\u6c42\u4f7f\u7528\u7531 Surge VIF \u800c\u4e0d\u662f Surge \u4ee3\u7406\u5904\u7406\u7684\u7b80\u5355\u4e3b\u673a\u540d\uff08\u4e0d\u5e26\u70b9\uff09\u3002\n# &gt; mysql01\u3001redis01\nexclude-simple-hostnames = true\n# &gt; \u5916\u90e8\u63a7\u5236\u5668\u8bbf\u95ee \u6b64\u9009\u9879\u5141\u8bb8\u5916\u90e8\u63a7\u5236\u5668\u63a7\u5236 Surge\uff0c\u4f8b\u5982 Surge Dashboard \uff08macOS\uff09 \u548c Surge iOS \u9065\u63a7\u5668 \uff08iOS\uff09\u3002\u4f8b\u5982\uff1akey@0.0.0.0:6166\nexternal-controller-access = mima1234@0.0.0.0:6166\n# &gt; \u4f7f\u7528 HTTPS \u534f\u8bae\u800c\u4e0d\u662f HTTP\u3002\u5fc5\u987b\u5148\u914d\u7f6e MitM CA \u8bc1\u4e66\u3002\u60a8\u9700\u8981\u5728\u5ba2\u6237\u7aef\u8bbe\u5907\u4e0a\u624b\u52a8\u5b89\u88c5\u8bc1\u4e66\u3002\n# http-api-tls =\n# &gt; \u542f\u7528\u6b64\u529f\u80fd\u540e\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7 Web \u6d4f\u89c8\u5668\u63a7\u5236 Surge\u3002\nhttp-api-web-dashboard = false\n# &gt; \u663e\u793a\u9519\u8bef\u9875\u9762\u62d2\u7edd,\u5982\u679c\u8bf7\u6c42\u662f\u7eaf HTTP \u8bf7\u6c42\uff0c\u5219\u663e\u793a REJECT \u7b56\u7565\u7684\u9519\u8bef\u7f51\u9875\u3002\nshow-error-page-for-reject = true\n# &gt; Surge VIF\u53ea\u80fd\u5904\u7406 TCP \u548c UDP \u534f\u8bae\u3002\u4f7f\u7528\u6b64\u9009\u9879\u53ef\u7ed5\u8fc7\u7279\u5b9a IP \u8303\u56f4\uff0c\u4ee5\u5141\u8bb8\u6240\u6709\u6d41\u91cf\u901a\u8fc7\u3002\n# &gt; \u6ce8\u610f\uff1a\u6b64\u9009\u9879\u4ec5\u9002\u7528\u4e8eSurge VIF\u3002Surge Proxy Server \u5904\u7406\u7684\u8bf7\u6c42\u4e0d\u53d7\u5f71\u54cd\u3002\u5408\u5e76 skip-proxy \u5e76\u786e\u4fdd tun-excluded-routes \u7279\u5b9a HTTP \u6d41\u91cf\u7ed5\u8fc7 Surge\u3002\n# tun-excluded-routes =\n# &gt; \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cSurge VIF \u63a5\u53e3\u5c06\u81ea\u8eab\u58f0\u660e\u4e3a\u9ed8\u8ba4\u8def\u7531\u3002\u4f46\u662f\uff0c\u7531\u4e8e Wi-Fi \u63a5\u53e3\u7684\u8def\u7531\u8f83\u5c0f\uff0c\u56e0\u6b64\u67d0\u4e9b\u6d41\u91cf\u53ef\u80fd\u65e0\u6cd5\u901a\u8fc7\u6d6a\u6d8c VIF \u63a5\u53e3\u3002\u4f7f\u7528\u6b64\u9009\u9879\u53ef\u6dfb\u52a0\u8f83\u5c0f\u7684\u8def\u7531\u3002\n# tun-included-routes =\n# &gt; Internet \u8fde\u63a5\u6d4b\u8bd5\u7684 URL, \u4ee5\u53ca\uff0cDIRECT \u7b56\u7565\u7684\u6d4b\u8bd5 URL\ninternet-test-url = http://connect.rom.miui.com/generate_204\n# &gt; \u4ee3\u7406\u7b56\u7565\u7684\u9ed8\u8ba4\u6d4b\u8bd5 URL\nproxy-test-url = http://www.gstatic.com/generate_204\n# &gt; \u8fde\u63a5\u6d4b\u8bd5\u8d85\u65f6\uff08\u79d2\uff09\ntest-timeout = 5\n# &gt; \u59cb\u7ec8\u771f\u5b9e\u7684 IP \u6b64\u9009\u9879\u8981\u6c42 Surge \u5728 Surge VIF \u5904\u7406 DNS \u95ee\u9898\u65f6\u8fd4\u56de\u771f\u5b9e IP \u5730\u5740\u800c\u4e0d\u662f\u865a\u5047 IP \u5730\u5740 DNS\u6570\u636e\u5305\u5c06\u88ab\u8f6c\u53d1\u5230\u4e0a\u6e38DNS\u670d\u52a1\u5668 \u6b64\u53c2\u6570\u5c5e\u4e8e\u4e3b\u673a\u5217\u8868\u7c7b\u578b\uff0c\u8be6\u7ec6\u89c4\u5219\u8bf7\u53c2\u89c1\uff1ahttps://manual.nssurge.com/others/host-list.html\n# &gt; \u4f7f\u7528\u524d\u7f00 - \u6392\u9664\u4e3b\u673a\u540d\n# &gt; \u652f\u6301\u901a\u914d\u7b26 * \u548c ?\n# &gt; \u4f7f\u7528\u540e\u7f00 :port \u5339\u914d\u5176\u4ed6\u7aef\u53e3,\u5982\u679c\u672a\u63d0\u4f9b\u7aef\u53e3\u53f7\uff0c\u5219 Surge \u5c06\u81ea\u52a8\u4e3a\u8be5\u53c2\u6570\u9644\u52a0\u6807\u51c6\u7aef\u53e3\u53f7\uff0c\u5c31\u50cf force-http-engine-hosts \u53c2\u6570\u4e00\u6837\uff0c\u5982\u679c\u4ec5\u914d\u7f6e\u4e86\u4e3b\u673a\u540d\uff0c\u5219\u4ec5\u5bf9\u7aef\u53e3 80 \u6709\u6548\u3002\u5bf9\u4e8e MITM \u529f\u80fd\uff0c\u5b83\u4ec5\u5bf9\u7aef\u53e3 443 \u6709\u6548\u3002\n# &gt; \u4f7f\u7528\u540e\u7f00 :0 \u4ee5\u5339\u914d\u6240\u6709\u7aef\u53e3\n# &gt; \u4f7f\u7528&lt;ip-address&gt; \u76f4\u63a5\u4f7f\u7528 IPv4/IPv6 \u5730\u5740\uff08\u800c\u4e0d\u662f\u57df\uff09\u5339\u914d\u6240\u6709\u4e3b\u673a\u540d\n# &gt; -*icloud*, -*.mzstatic.com, -*.facebook.com, -*.instagram.com, -*.twitter.com, -*dropbox*, -*apple*, -*.amazonaws.com, -&lt;ip-address&gt;, *\nalways-real-ip = *.test.com\n# &gt; \u52ab\u6301DNS,\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cSurge \u4ec5\u8fd4\u56de\u53d1\u9001\u5230 Surge DNS \u5730\u5740 \uff08198.18.0.2\uff09 \u7684 DNS \u67e5\u8be2\u7684\u865a\u5047 IP \u5730\u5740\u3002\u53d1\u9001\u5230\u6807\u51c6 DNS \u7684\u67e5\u8be2\u5c06\u88ab\u8f6c\u53d1\u3002\u67d0\u4e9b\u8bbe\u5907\u6216\u8f6f\u4ef6\u59cb\u7ec8\u4f7f\u7528\u786c\u7f16\u7801\u7684 DNS \u670d\u52a1\u5668\u3002\uff08\u4f8b\u5982\uff0cGoogle Speakers\u59cb\u7ec8\u4f7f\u7528 8.8.8.8\uff09\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u6b64\u9009\u9879\u52ab\u6301\u67e5\u8be2\u4ee5\u83b7\u53d6\u865a\u5047\u5730\u5740\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 hijack-dns = *:53 \u52ab\u6301\u6240\u6709DNS\u67e5\u8be2\nhijack-dns = *:53\n# &gt; \u4f7f Surge \u5c06 TCP \u8fde\u63a5\u89c6\u4e3a HTTP \u8bf7\u6c42\u3002Surge HTTP \u5f15\u64ce\u5c06\u5904\u7406\u8bf7\u6c42\uff0c\u5e76\u4e14\u6240\u6709\u9ad8\u7ea7\u529f\u80fd\u90fd\u5c06\u53ef\u7528\uff0c\u4f8b\u5982\u6355\u83b7\u3001\u91cd\u5199\u548c\u811a\u672c\u7f16\u5199\u3002\u6b64\u53c2\u6570\u5c5e\u4e8e\u4e3b\u673a\u5217\u8868\u7c7b\u578b\uff0c\u8be6\u7ec6\u89c4\u5219\u8bf7\u53c2\u89c1\uff1ahttps://manual.nssurge.com/others/host-list.html\n# force-http-engine-hosts =\n# &gt; \u52a0\u5bc6 DNS \u8ddf\u968f\u51fa\u7ad9\u6a21\u5f0f,\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u52a0\u5bc6\u7684 DNS \u67e5\u627e\u4f7f\u7528\u76f4\u63a5\u51fa\u7ad9\u3002\u542f\u7528\u8be5\u9009\u9879\u5c06\u4f7f DOH \u9075\u5faa\u51fa\u7ad9\u6a21\u5f0f\u8bbe\u7f6e\u548c\u89c4\u5219\u3002\n# encrypted-dns-follow-outbound-mode = true\n# &gt; \u52a0\u5bc6\u7684 DNS \u670d\u52a1\u5668,\u52a0\u5bc6\u7684 DNS \u670d\u52a1\u5668\u7684 URL\u3002\u5982\u679c\u914d\u7f6e\u4e86\u52a0\u5bc6 DNS\uff0c\u5219\u4f20\u7edf DNS \u5c06\u4ec5\u7528\u4e8e\u6d4b\u8bd5\u8fde\u63a5\u5e76\u89e3\u6790\u52a0\u5bc6 DNS URL \u4e2d\u7684\u57df\u3002\n# encrypted-dns-server =\n# &gt; \u8df3\u8fc7\u52a0\u5bc6\u7684DNS\u670d\u52a1\u5668\u8bc1\u4e66\u9a8c\u8bc1\uff0c\u8fd9\u662f\u4e0d\u5b89\u5168\u7684\u3002\nencrypted-dns-skip-cert-verification = false\n# &gt; \u4f7f\u7528\u672c\u5730\u4e3b\u673a\u4ee3\u7406,\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u4f7f\u7528\u4ee3\u7406\u7b56\u7565\uff0c\u5219\u59cb\u7ec8\u5728\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u6267\u884c DNS \u67e5\u627e\u3002\u542f\u7528\u6b64\u9009\u9879\u540e\uff0c\u5982\u679c\u5b58\u5728\u76ee\u6807\u57df\u7684\u672c\u5730 DNS \u6620\u5c04\u7ed3\u679c\uff0c\u5219 Surge \u4f1a\u4f7f\u7528 IP \u5730\u5740\u800c\u4e0d\u662f\u57df\u6765\u8bbe\u7f6e\u4ee3\u7406\u8fde\u63a5\u3002\nuse-local-host-item-for-proxy = true\n# &gt; \u8981\u66f4\u65b0\u7684 GeoIP \u6570\u636e\u5e93\u7684 URL\ngeoip-maxmind-url = https://github.com/Hackl0us/GeoIP2-CN/raw/release/Country.mmdb\n# &gt; \u7981\u7528 GeoIP \u6570\u636e\u5e93\u7684\u81ea\u52a8\u66f4\u65b0\ndisable-geoip-db-auto-update = false\n# &gt; iOS \u7cfb\u7edf\u53ef\u80fd\u4f1a\u6267\u884c SVCB \u8bb0\u5f55 DNS \u67e5\u627e\uff0c\u800c\u4e0d\u662f\u6807\u51c6 A \u8bb0\u5f55\u67e5\u627e\u3002\u8fd9\u4f1a\u5bfc\u81f4 Surge \u65e0\u6cd5\u8fd4\u56de\u865a\u62df IP \u5730\u5740\u3002\u56e0\u6b64\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u7981\u6b62 SVCB \u8bb0\u5f55\u67e5\u627e\uff0c\u4ee5\u5f3a\u5236\u7cfb\u7edf\u6267\u884c A \u8bb0\u5f55\u67e5\u627e\u3002\nallow-dns-svcb = false\n# &gt; UDP \u6d41\u91cf\u4e0e\u4e0d\u652f\u6301 UDP \u4e2d\u7ee7\u7684\u7b56\u7565\u5339\u914d\u65f6\u7684\u56de\u9000\u884c\u4e3a,\u53ef\u80fd\u7684\u503c\uff1a DIRECT \u3001 REJECT, \u5982\u679c\u6ca1\u6709\u4ee3\u7406\u670d\u52a1\u5668\u652f\u6301 UDP \u8f6c\u53d1\uff0c\u53ef\u4fee\u6539\u4e3a\u300c direct \u300d\u6216\u6ce8\u91ca\u4e0b\u6761\uff0c\u4f46\u9700\u6ce8\u610f\u540c\u4e00\u76ee\u6807\u4e3b\u673a\u540d TCP \u8bf7\u6c42\u4e0e UDP \u8bf7\u6c42\u7684\u6e90\u5730\u5740\u4e0d\u540c\u6240\u9020\u6210\u7684\u9690\u79c1\u53ca\u5b89\u5168\u98ce\u9669\u3002\nudp-policy-not-supported-behaviour = REJECT\n# &gt; \u4ee3\u7406\u7684\u9ed8\u8ba4 UDP \u6d4b\u8bd5\u53c2\u6570, \u4f8b\u5982\uff1a apple.com@8.8.8.8\n# proxy-test-udp = apple.com@8.8.8.8\n# &gt; \u5f53\u7cfb\u7edf\u8d1f\u8f7d\u975e\u5e38\u9ad8\u4e14\u6570\u636e\u5305\u5904\u7406\u5ef6\u8fdf\u65f6\uff0c\u542f\u7528\u5c06\u4f18\u5148\u5904\u7406 UDP \u6570\u636e\u5305\u3002\u4e5f\u79f0\u4e3a\u6e38\u620f\u6a21\u5f0f\nudp-priority = false\n# &gt; Surge \u5c06\u81ea\u52a8\u55c5\u63a2\u53d1\u9001\u5230\u7aef\u53e3 80 \u548c 443 \u7684 TCP \u8bf7\u6c42\u7684\u534f\u8bae\uff0c\u4ece\u800c\u5728\u4f18\u5316\u6027\u80fd\u7684\u540c\u65f6\u542f\u7528\u9ad8\u7ea7 HTTP/HTTPS \u529f\u80fd\u3002\u4f46\u662f\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4e00\u4e9b\u517c\u5bb9\u6027\u95ee\u9898\u3002\u5982\u679c\u9047\u5230\u95ee\u9898\uff0c\u53ef\u4ee5\u5728\u6b64\u5904\u6dfb\u52a0\u4e3b\u673a\u540d\uff0cSurge \u4e0d\u4f1a\u55c5\u63a2\u8fd9\u4e9b\u8bf7\u6c42\u7684\u534f\u8bae\u3002\u6b64\u53c2\u6570\u5c5e\u4e8e\u4e3b\u673a\u5217\u8868\u7c7b\u578b\uff0c\u8be6\u7ec6\u89c4\u5219\u8bf7\u53c2\u89c1\uff1ahttps://manual.nssurge.com/others/host-list.html\nalways-raw-tcp-hosts = *.baidu.com\n# ================ \u4ec5\u9650 iOS \u7684 Surge \u53c2\u6570 ================ #\n# &gt; \u5141\u8bb8 wifi \u8bbf\u95ee,\u5141\u8bb8 Surge \u4ee3\u7406\u670d\u52a1\u4ece LAN \u4e2d\u7684\u5176\u4ed6\u8bbe\u5907\u8bbf\u95ee\u3002\nallow-wifi-access = false\n# &gt; Surge HTTP \u4ee3\u7406\u670d\u52a1\u7684\u7aef\u53e3\u53f7\nwifi-access-http-port = 6152\n# &gt; Surge SOCKS5 \u4ee3\u7406\u670d\u52a1\u7684\u7aef\u53e3\u53f7\nwifi-access-socks5-port = 6153\n# &gt; \u8981\u6c42\u5bf9 Surge HTTP \u4ee3\u7406\u670d\u52a1\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u4f8b\u5982\uff1a\u7528\u6237\u540d\uff1a\u5bc6\u7801\nwifi-access-http-auth = surge:mima1234\n# &gt; \u542f\u7528 Wi-Fi \u52a9\u624b (\u5728 Wi-Fi \u7f51\u7edc\u4e0d\u4f73\u65f6\u5c1d\u8bd5\u4f7f\u7528\u6570\u636e\u7f51\u7edc\u5efa\u7acb\u8fde\u63a5\uff0c\u8bf7\u4ec5\u5f53\u4f7f\u7528\u4e0d\u9650\u91cf\u7684\u6570\u636e\u6d41\u91cf\u65f6\u5f00\u542f)\nwifi-assist = false\n# &gt; \u9690\u85cf\u72b6\u6001\u680f\u4e2d\u7684 VPN \u56fe\u6807\nhide-vpn-icon = false\n# &gt; \u5f53 Wi-Fi \u7f51\u7edc\u8f83\u5dee\u65f6\uff0c\u4e0d\u8981\u8bbe\u7f6e\u4e0e\u8702\u7a9d\u6570\u636e\u7684\u8fde\u63a5\uff0c\u800c\u662f\u59cb\u7ec8\u540c\u65f6\u8bbe\u7f6e\u4e0e Wi-Fi \u548c\u8702\u7a9d\u6570\u636e\u7684\u8fde\u63a5 \u6b64\u9009\u9879\u53ef\u4ee5\u5728 Wi-Fi \u8f83\u5dee\u6216 Wi-Fi \u7f51\u7edc\u5207\u6362\u65f6\u663e\u8457\u6539\u5584\u7f51\u7edc\u4f53\u9a8c \u6b64\u529f\u80fd\u5c06\u5e94\u7528\u4e8e\u6240\u6709 TCP \u8fde\u63a5\u548c DNS \u67e5\u627e\u3002\u4ec5\u5f53\u60a8\u62e5\u6709\u65e0\u9650\u7684\u8702\u7a9d\u6570\u636e\u8ba1\u5212\u65f6\u624d\u542f\u7528\u5b83\nall-hybrid = false\n# &gt; \u5141\u8bb8\u5728\u201c\u4e2a\u4eba\u70ed\u70b9\u201d\u6253\u5f00\u65f6\u4ece\u5176\u4ed6\u8bbe\u5907\u8bbf\u95ee Surge \u4ee3\u7406\u670d\u52a1\nallow-hotspot-access = ture\n# &gt; \u5305\u542b\u6240\u6709\u7f51\u7edc,\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u67d0\u4e9b\u8bf7\u6c42\u53ef\u80fd\u4e0d\u4f1a\u88ab Surge \u63a5\u7ba1\u3002\u4f8b\u5982\uff0c\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u7ed1\u5b9a\u5230\u7269\u7406\u7f51\u7edc\u63a5\u53e3\u4ee5\u7ed5\u8fc7\u6d6a\u6d8c VIF\u3002\u542f\u7528\u201c\u5305\u62ec\u6240\u6709\u7f51\u7edc\u201d\u9009\u9879\uff0c\u4ee5\u786e\u4fdd\u6240\u6709\u8bf7\u6c42\u90fd\u7531 Surge \u5904\u7406\u800c\u4e0d\u4f1a\u6cc4\u6f0f\u3002\u5f53\u60a8\u4f7f\u7528 Surge \u4f5c\u4e3a\u9632\u706b\u5899\u65f6\uff0c\u6b64\u9009\u9879\u5f88\u6709\u7528\u3002\uff08\u9700\u8981 iOS 14.0 \u6216\u4ee5\u4e0a\u7248\u672c\uff09,\u542f\u7528\u6b64\u9009\u9879\u53ef\u80fd\u4f1a\u5bfc\u81f4 AirDrop \u548c Xcode \u8c03\u8bd5\u95ee\u9898\u3001\u901a\u8fc7 USB \u7684 Surge Dashboard \u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\u4ee5\u53ca\u5176\u4ed6\u610f\u5916\u7684\u526f\u4f5c\u7528\u3002\u8bf7\u8c28\u614e\u4f7f\u7528\u3002\ninclude-all-networks = false\n# &gt; \u5305\u542b\u672c\u5730\u7f51\u7edc,\u542f\u7528\u6b64\u9009\u9879\u53ef\u4f7f Surge VIF \u5904\u7406\u53d1\u9001\u5230 LAN \u7684\u8bf7\u6c42\u3002\uff08\u9700\u8981 iOS 14.2 \u6216\u66f4\u9ad8\u7248\u672c\uff09\u542f\u7528\u6b64\u9009\u9879\u53ef\u80fd\u4f1a\u5bfc\u81f4 AirDrop \u548c Xcode \u8c03\u8bd5\u95ee\u9898\u3001\u901a\u8fc7 USB \u7684 Surge Dashboard \u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\u4ee5\u53ca\u5176\u4ed6\u610f\u5916\u7684\u526f\u4f5c\u7528\u3002\u8bf7\u8c28\u614e\u4f7f\u7528\u3002\u5fc5\u987b\u4e0e include-all-networks=true \u7ed3\u5408\u4f7f\u7528\u3002\ninclude-local-networks = false\n# &gt; \u542f\u7528\u6b64\u9009\u9879\u53ef\u4f7f Surge VIF \u5904\u7406 Apple \u63a8\u9001\u901a\u77e5\u670d\u52a1 \uff08APNs\uff09 \u7684\u7f51\u7edc\u6d41\u91cf\u3002\u5fc5\u987b\u4e0e include-all-networks=true \u7ed3\u5408\u4f7f\u7528\u3002\ninclude-apns = false\n# &gt; \u542f\u7528\u6b64\u9009\u9879\u53ef\u4f7f Surge VIF \u5904\u7406\u8702\u7a9d\u670d\u52a1\u7684 Internet \u53ef\u8def\u7531\u7f51\u7edc\u6d41\u91cf\u3002\uff08VoLTE\u3001Wi-Fi \u901a\u8bdd\u3001IMS\u3001\u5f69\u4fe1\u3001\u53ef\u89c6\u8bed\u97f3\u4fe1\u7bb1\u7b49\uff09.\u8bf7\u6ce8\u610f\uff0c\u67d0\u4e9b\u8702\u7a9d\u8fd0\u8425\u5546\u4f1a\u7ed5\u8fc7\u4e92\u8054\u7f51\uff0c\u5c06\u8702\u7a9d\u7f51\u7edc\u670d\u52a1\u6d41\u91cf\u76f4\u63a5\u8def\u7531\u5230\u8fd0\u8425\u5546\u7f51\u7edc\u3002\u6b64\u7c7b\u8702\u7a9d\u670d\u52a1\u6d41\u91cf\u59cb\u7ec8\u88ab\u6392\u9664\u5728\u96a7\u9053\u4e4b\u5916\u3002\u5fc5\u987b\u4e0e include-all-networks=true \u7ed3\u5408\u4f7f\u7528\u3002\ninclude-cellular-services = false\n# &gt; \u517c\u5bb9\u6027\u6a21\u5f0f,\u6b64\u9009\u9879\u7528\u4e8e\u63a7\u5236 Surge iOS \u7684\u5de5\u4f5c\u6a21\u5f0f\u3002\n# &gt; 0\uff1a\u81ea\u52a8\uff0c\u5728 5.8.0 \u4e4b\u524d\u7684 Surge iOS \u7248\u672c\u4e2d\uff0c\u8fd9\u76f8\u5f53\u4e8e 1\uff0c\u4ece 5.8.0 \u5f00\u59cb\uff0c\u5b83\u76f8\u5f53\u4e8e 3\n# &gt; 1\uff1a\u4ee3\u7406\u63a5\u7ba1 + VIF\uff0c\u5728\u6b64\u6a21\u5f0f\u4e0b\uff0c\u4ee3\u7406\u63a5\u7ba1\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e VIF \u63a5\u7ba1\uff0c\u63d0\u4f9b\u6700\u4f73\u6027\u80fd\uff0c\u4f46\u67d0\u4e9b\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u68c0\u67e5\u4ee3\u7406\u8bbe\u7f6e\u5e76\u62d2\u7edd\u5de5\u4f5c\u3002\n# &gt; 2\uff1a\u4ec5\u4ee3\u7406\u63a5\u7ba1\n# &gt; 3\uff1aVIF Takeover Only\uff1a\u6700\u65b0\u7248\u672c\u7684\u9ed8\u8ba4\u5de5\u4f5c\u6a21\u5f0f\u3002\n# &gt; 4\uff1a\u4ee3\u7406\u63a5\u7ba1 + VIF\uff0c\u4f46\u4ee3\u7406\u4f7f\u7528 VIF \u5730\u5740\u800c\u4e0d\u662f\u73af\u56de\u5730\u5740\u3002\n# &gt; 5\uff1a\u4ee3\u7406\u63a5\u7ba1+VIF\uff0c\u4f46VIF\u8def\u7531\u4f7f\u7528\u591a\u4e2a\u8f83\u5c0f\u7684\u8def\u7531\u8fdb\u884c\u63a5\u7ba1\uff0c\u6ca1\u6709\u914d\u7f6e\u9ed8\u8ba4\u8def\u7531\uff0c\u53ef\u4ee5\u7528\u6765\u7ed5\u8fc7\u4e00\u4e9b\u7279\u6b8a\u95ee\u9898\u3002\uff08\u4f8b\u5982\uff0cHomeKit \u5b89\u9632\u6444\u50cf\u5934\uff09\ncompatibility-mode = 1\n# ================ \u4ec5\u9650 MacOS \u7684 Surge \u53c2\u6570 ================ #\n# &gt; \u5982\u679c\u7981\u7528\uff0c\u5373\u4f7f Wi-Fi \u4e0d\u662f\u4e3b\u7f51\u7edc\u63a5\u53e3\uff0cSSID/BSSID \u6a21\u5f0f\u4ecd\u53ef\u5339\u914d\u3002\n# use-default-policy-if-wifi-not-primary = false\n# &gt; \u9075\u5faa /etc/hosts \u4e2d\u7684\u672c\u5730 DNS \u6620\u5c04\u9879\n# read-etc-hosts = true\n# &gt; Surge HTTP \u4ee3\u7406\u670d\u52a1\u7684\u7aef\u53e3\u53f7\n# http-listen = 0.0.0.0:6152\n# &gt; Surge SOCKS5 \u4ee3\u7406\u670d\u52a1\u7684\u7aef\u53e3\u53f7\n# socks5-listen = 0.0.0.0:6153\n# &gt; \u542f\u7528 CPU \u8c03\u8bd5\u6a21\u5f0f\u3002\u8fd9\u53ef\u80fd\u4f1a\u964d\u4f4e\u6027\u80fd\u3002\n# debug-cpu-usage = false\n# &gt; \u542f\u7528\u5185\u5b58\u8c03\u8bd5\u6a21\u5f0f\u3002\u8fd9\u53ef\u80fd\u4f1a\u964d\u4f4e\u6027\u80fd\u3002\n# debug-memory-usage = false\n# &gt; vif\u6a21\u5f0f\n# &gt; auto \uff1a\u8ba9Surge\u81ea\u52a8\u9009\u62e9\u6700\u5408\u9002\u7684\u5de5\u4f5c\u6a21\u5f0f\u3002\n# &gt; v1 \uff1a\u4f20\u7edf\u6a21\u5f0f\uff0cTCP\u534f\u8bae\u6808\u5b8c\u5168\u7531Surge\u7ba1\u7406\u3002\u7531\u4e8e Surge \u8fd0\u884c\u5728\u7528\u6237\u7a7a\u95f4\u4e2d\uff0c\u8fd9\u610f\u5473\u7740\u6bcf\u4e2a\u6570\u636e\u5305\u90fd\u9700\u8981\u4ece\u5185\u6838\u7a7a\u95f4\u4f20\u8f93\u5230\u7528\u6237\u7a7a\u95f4\u8fdb\u884c\u5904\u7406\u3002\n# &gt; v2 \uff1a\u5728 5.0 \u7248\u672c\u4e2d\u5f15\u5165\uff0c\u5b83\u4f7f\u7528 macOS \u4e2d\u7684\u6570\u636e\u5305\u8fc7\u6ee4\u5668\u673a\u5236\uff0c\u5229\u7528 macOS \u7684 TCP \u534f\u8bae\u6808\uff0c\u4ece\u800c\u907f\u514d\u4e86\u5728\u5185\u6838\u7a7a\u95f4\u548c\u7528\u6237\u7a7a\u95f4\u4e4b\u95f4\u5207\u6362\u7684\u5f00\u9500\uff0c\u4ece\u800c\u663e\u7740\u63d0\u9ad8\u4e86\u6027\u80fd\u3002\u4f46\u662f\uff0c\u7531\u4e8e\u5b83\u9700\u8981\u4fee\u6539 pf \u8bbe\u7f6e\uff0c\u56e0\u6b64\u5b83\u4e0e\u865a\u62df\u673a\u7f51\u7edc\u548c\u7f51\u7edc\u5171\u4eab\u529f\u80fd\u4e0d\u517c\u5bb9\u3002\n# &gt; v3 \uff1a\u5728 5.2 \u7248\u4e2d\u5f15\u5165\uff0c\u5b83\u7ed5\u8fc7\u4e86\u6570\u636e\u5305\u8fc7\u6ee4\u5668\uff0c\u5e76\u91c7\u7528\u53e6\u4e00\u79cd\u6280\u672f\u6765\u4f7f\u7528 macOS \u7684 TCP \u534f\u8bae\u6808\u3002\u6027\u80fd\u7565\u4f4e\u4e8e v2\uff0c\u4f46\u907f\u514d\u4e86\u56e0\u8c03\u6574 pf \u8bbe\u7f6e\u800c\u5bfc\u81f4\u7684\u517c\u5bb9\u6027\u95ee\u9898\u3002\n# vif-mode = v3\n\n[Proxy]\n#!include xxxx.conf, xxxxx.conf\n\n[Proxy Group]\n#!include Common.conf\n\n[Rule]\n#!include Common.conf\n\n[URL Rewrite]\n#!include Common.conf\n</code></pre> <p>\u65b0\u5efa\u914d\u7f6e\u6587\u4ef6<code>surge.conf</code>\uff0c\u5c06\u4e0a\u9762\u7684\u5185\u5bb9\u590d\u5236\u5230\u6587\u4ef6\u91cc</p> <pre><code>[Proxy Group]\n\ud83d\udd30 \u8282\u70b9\u9009\u62e9 = select, \u267b\ufe0f \u81ea\u52a8\u9009\u62e9, \ud83d\udec3 \u624b\u52a8\u5207\u6362, \ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9, \ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9, \ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9, \ud83c\udde8\ud83c\uddf3 \u53f0\u6e7e\u8282\u70b9, \ud83c\uddf0\ud83c\uddf7 \u97e9\u56fd\u8282\u70b9, \ud83c\uddec\ud83c\udde7 \u82f1\u56fd\u8282\u70b9, \ud83c\uddf8\ud83c\uddec \u65b0\u52a0\u5761\u8282\u70b9, \ud83c\udde8\ud83c\udde6 \u52a0\u62ff\u5927\u8282\u70b9, \ud83c\udde9\ud83c\uddea \u5fb7\u56fd\u8282\u70b9, \ud83c\uddeb\ud83c\uddf7 \u6cd5\u56fd\u8282\u70b9, \ud83c\uddee\ud83c\uddf3 \u5370\u5ea6\u8282\u70b9, \ud83c\udf0e \u5176\u4ed6\u8282\u70b9, \ud83c\udfaf \u5168\u7403\u76f4\u8fde, \u26d4\ufe0f \u7981\u6b62\u8bbf\u95ee\n\u267b\ufe0f \u81ea\u52a8\u9009\u62e9 = url-test, include-all-proxies=1, policy-regex-filter=^((?!\u4f63\u91d1|\u5b98\u7f51|\u514d\u7ffb|\u5230\u671f|\u6d41\u91cf|\u66f4\u65b0|\u70b9\u5916|\u91cd\u7f6e|\u514d\u6d41|Direct|GB|Days|Date|Expire|Premium).)*$, url=http://www.gstatic.com/generate_204, interval=300, tolerance=50\n\ud83d\udec3 \u624b\u52a8\u5207\u6362 = select, include-all-proxies=1, policy-regex-filter=^((?!\u4f63\u91d1|\u5b98\u7f51|\u514d\u7ffb|\u5230\u671f|\u6d41\u91cf|\u66f4\u65b0|\u70b9\u5916|\u91cd\u7f6e|\u514d\u6d41|Direct|GB|Days|Date|Expire|Premium).)*$\n\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9 = url-test, include-all-proxies=1, policy-regex-filter=^(?!.*Premium).*(?:\u6e2f|HK|hk|Hong Kong|HongKong|hongkong).*$, url=http://www.gstatic.com/generate_204, interval=300, tolerance=50\n\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9 = url-test, include-all-proxies=1, policy-regex-filter=^(?!.*Premium).*(?:\u65e5\u672c|\u5ddd\u65e5|\u4e1c\u4eac|\u5927\u962a|\u6cc9\u65e5|\u57fc\u7389|\u6caa\u65e5|\u6df1\u65e5|[^-]\u65e5|JP|Japan).*$, url=http://www.gstatic.com/generate_204, interval=300, tolerance=50\n\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9 = url-test, include-all-proxies=1, policy-regex-filter=^(?!.*Premium).*(?:\u7f8e|\u6ce2\u7279\u5170|\u8fbe\u62c9\u65af|\u4fc4\u52d2\u5188|\u51e4\u51f0\u57ce|\u8d39\u5229\u8499|\u7845\u8c37|\u62c9\u65af\u7ef4\u52a0\u65af|\u6d1b\u6749\u77f6|\u5723\u4f55\u585e|\u5723\u514b\u62c9\u62c9|\u897f\u96c5\u56fe|\u829d\u52a0\u54e5|US|United States).*$, url=http://www.gstatic.com/generate_204, interval=300, tolerance=50\n\ud83c\udde8\ud83c\uddf3 \u53f0\u6e7e\u8282\u70b9 = url-test, include-all-proxies=1, policy-regex-filter=^(?!.*Premium).*(?:\u53f0|\u65b0\u5317|\u5f70\u5316|TW|Taiwan).*$, url=http://www.gstatic.com/generate_204, interval=300, tolerance=50\n\ud83c\uddf0\ud83c\uddf7 \u97e9\u56fd\u8282\u70b9 = url-test, include-all-proxies=1, policy-regex-filter=^(?!.*Premium).*(?:KR|Korea|KOR|\u9996\u5c14|\u97e9|\u97d3).*$, url=http://www.gstatic.com/generate_204, interval=300, tolerance=50\n\ud83c\uddec\ud83c\udde7 \u82f1\u56fd\u8282\u70b9 = url-test, include-all-proxies=1, policy-regex-filter=^(?!.*Premium).*(?:UK|\u82f1\u56fd).*$, url=http://www.gstatic.com/generate_204, interval=300, tolerance=50\n\ud83c\uddf8\ud83c\uddec \u65b0\u52a0\u5761\u8282\u70b9 = url-test, include-all-proxies=1, policy-regex-filter=^(?!.*Premium).*(?:\u65b0\u52a0\u5761|\u5761|\u72ee\u57ce|SG|Singapore).*$, url=http://www.gstatic.com/generate_204, interval=300, tolerance=50\n\ud83c\udde8\ud83c\udde6 \u52a0\u62ff\u5927\u8282\u70b9 = url-test, include-all-proxies=1, policy-regex-filter=^(?!.*Premium).*(?:Canada|\u52a0\u62ff\u5927).*$, url=http://www.gstatic.com/generate_204, interval=300, tolerance=50\n\ud83c\udde9\ud83c\uddea \u5fb7\u56fd\u8282\u70b9 = url-test, include-all-proxies=1, policy-regex-filter=^(?!.*Premium).*(?:\u5fb7\u56fd|\ud83c\udde9\ud83c\uddea|Germany).*$, url=http://www.gstatic.com/generate_204, interval=300, tolerance=50\n\ud83c\uddeb\ud83c\uddf7 \u6cd5\u56fd\u8282\u70b9 = url-test, include-all-proxies=1, policy-regex-filter=^(?!.*Premium).*(?:\u6cd5\u56fd|\ud83c\uddeb\ud83c\uddf7|France).*$, url=http://www.gstatic.com/generate_204, interval=300, tolerance=50\n\ud83c\uddee\ud83c\uddf3 \u5370\u5ea6\u8282\u70b9 = url-test, include-all-proxies=1, policy-regex-filter=^(?!.*Premium).*(?:\u5370\u5ea6|\ud83c\uddee\ud83c\uddf3|India).*$, url=http://www.gstatic.com/generate_204, interval=300, tolerance=50\n\ud83c\udf0e \u5176\u4ed6\u8282\u70b9 = url-test, include-all-proxies=1, policy-regex-filter=^((?!\u4f63\u91d1|\u5b98\u7f51|\u514d\u7ffb|\u5230\u671f|\u6d41\u91cf|\u66f4\u65b0|\u70b9\u5916|\u91cd\u7f6e|\u514d\u6d41|Direct|GB|Days|Date|Expire|Premium|\u6e2f|HK|hk|Hong Kong|HongKong|hongkong|\u65e5\u672c|\u5ddd\u65e5|\u4e1c\u4eac|\u5927\u962a|\u6cc9\u65e5|\u57fc\u7389|\u6caa\u65e5|\u6df1\u65e5|[^-]\u65e5|JP|Japan|\u7f8e|\u6ce2\u7279\u5170|\u8fbe\u62c9\u65af|\u4fc4\u52d2\u5188|\u51e4\u51f0\u57ce|\u8d39\u5229\u8499|\u7845\u8c37|\u62c9\u65af\u7ef4\u52a0\u65af|\u6d1b\u6749\u77f6|\u5723\u4f55\u585e|\u5723\u514b\u62c9\u62c9|\u897f\u96c5\u56fe|\u829d\u52a0\u54e5|US|United States|\u53f0|\u65b0\u5317|\u5f70\u5316|TW|Taiwan|KR|Korea|KOR|\u9996\u5c14|\u97e9|\u97d3|\u72ee\u57ce|\u72ee|\u65b0\u52a0\u5761|\u5761|SG|Singapore|\u82f1\u56fd|UK|Canada|\u52a0\u62ff\u5927|\u5fb7\u56fd|\ud83c\udde9\ud83c\uddea|Germany|\u6cd5\u56fd|\ud83c\uddeb\ud83c\uddf7|France|\u5370\u5ea6|\ud83c\uddee\ud83c\uddf3|India).)*$, interval=300, tolerance=50\n\u26d4\ufe0f \u7981\u6b62\u8bbf\u95ee = select, REJECT\n\ud83c\udfaf \u5168\u7403\u76f4\u8fde = select, DIRECT\n\n[Rule]\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Advertising/Advertising_All_No_Resolve.list,\u26d4\ufe0f \u7981\u6b62\u8bbf\u95ee,update-interval=86400,no-resolve // AD\u5e7f\u544a\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Hijacking/Hijacking.list,\u26d4\ufe0f \u7981\u6b62\u8bbf\u95ee,update-interval=86400 // \u9632\u52ab\u6301\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/BlockHttpDNS/BlockHttpDNS.list,\u26d4\ufe0f \u7981\u6b62\u8bbf\u95ee,update-interval=86400 // \u7981\u7528HTTP\u534f\u8bae\u7684DNS\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Privacy/Privacy_All_No_Resolve.list,\u26d4\ufe0f \u7981\u6b62\u8bbf\u95ee,update-interval=86400 // \u9690\u79c1\u4fdd\u62a4\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Lan/Lan.list,\ud83c\udfaf \u5168\u7403\u76f4\u8fde,update-interval=86400 // Lan\u7f51\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/AmazonCN/AmazonCN.list,\ud83c\udfaf \u5168\u7403\u76f4\u8fde,update-interval=86400 // \u4e9a\u9a6c\u900a\u4e2d\u56fd\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Cloudflarecn/Cloudflarecn.list,\ud83c\udfaf \u5168\u7403\u76f4\u8fde,update-interval=86400 // Cloudflare\u4e2d\u56fd\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Download/Download.list,\ud83c\udfaf \u5168\u7403\u76f4\u8fde,update-interval=86400 // \u4e0b\u8f7d\u7f51\u7ad9\nRULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/UnBan.list,\ud83c\udfaf \u5168\u7403\u76f4\u8fde,update-interval=86400 // \u767d\u540d\u5355\nRULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/GoogleCN.list,\ud83c\udfaf \u5168\u7403\u76f4\u8fde,update-interval=86400 // \u8c37\u6b4c\u4e2d\u56fd\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/OneDrive/OneDrive.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // Microsoft OneDrive\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Microsoft/Microsoft.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // Microsoft\u670d\u52a1\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Amazon/Amazon.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // \u4e9a\u9a6c\u900a\u57df\u540d\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/AmazonIP/AmazonIP.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // \u4e9a\u9a6c\u900aIP\u5730\u5740\u6bb5\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Jetbrains/Jetbrains.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // Jetbrains\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Apple/Apple_All_No_Resolve.list,\ud83c\udfaf \u5168\u7403\u76f4\u8fde,update-interval=86400 // Apple\u670d\u52a1\nRULE-SET,https://raw.githubusercontent.com/Coldvvater/Mononoke/master/Surge/Rules/Telegram.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // Telegram\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Twitter/Twitter.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // Twitter\nRULE-SET,https://raw.githubusercontent.com/Coldvvater/Mononoke/master/Surge/Rules/AI.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // ChatGPT\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GitHub/GitHub.list,\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9,update-interval=86400 // GitHub\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Cloudflare/Cloudflare.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // Cloudflare\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/YouTube/YouTube.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // YouTube\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/YouTubeMusic/YouTubeMusic.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // YouTube Music\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Netflix/Netflix.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // Netflix\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/TikTok/TikTok.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // TikTok\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Disney/Disney.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // Disney\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GlobalMedia/GlobalMedia_All_No_Resolve.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // \u56fd\u5916\u5a92\u4f53\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Proxy/Proxy_All_No_Resolve.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // GFW\nRULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaCompanyIp.list,\ud83c\udfaf \u5168\u7403\u76f4\u8fde,update-interval=86400 // \u4e2d\u56fd\u516c\u53f8IP\nRULE-SET,https://raw.githubusercontent.com/chenyk1219/surge/release/ChinaDomain.list,\ud83c\udfaf \u5168\u7403\u76f4\u8fde,update-interval=86400 // \u4e2d\u56fd\u57df\u540d\nGEOIP,CN,\ud83c\udfaf \u5168\u7403\u76f4\u8fde // \u4e2d\u56fdIP\nFINAL,\ud83d\udd30 \u8282\u70b9\u9009\u62e9\n\n[URL Rewrite]\n^https?://(www.)?g.cn https://www.google.com 302\n^https?://(www.)?google.cn https://www.google.com 302\n</code></pre> <p>\u65b0\u5efa\u914d\u7f6e\u6587\u4ef6<code>Common.conf</code>\uff0c\u5c06\u4e0a\u9762\u7684\u5185\u5bb9\u590d\u5236\u5230\u6587\u4ef6\u91cc</p> <ul> <li>\u6253\u5f00surge\u914d\u7f6e\u6587\u4ef6\u5939</li> </ul> <p>\u5728<code>\u66f4\u591a</code>---&gt;<code>\u914d\u7f6e</code>---&gt;<code>\u5728Finder\u4e2d\u627e\u5230\u914d\u7f6e</code></p> <p></p> <ul> <li>\u5c06<code>surge.conf</code>\u62d6\u653e\u5230\u6587\u4ef6\u5939\u91cc</li> </ul> <p></p> <ul> <li>\u5728\u914d\u7f6e\u91cc\u53cc\u51fb<code>surge.conf</code>\u5e76\u5e94\u7528</li> </ul> <p></p> <ul> <li>\u6253\u5f00\u7b56\u7565\u548c\u89c4\u5219\uff0c\u4f60\u5c31\u53ef\u4ee5\u770b\u5230\u5df2\u7ecf\u6dfb\u52a0\u597d\u7684\u7b56\u7565\u548c\u89c4\u5219</li> </ul> <p></p> <p></p>"},{"location":"mac/surge_v2/#12","title":"1.2. \u914d\u7f6e\u4ee3\u7406","text":"<ul> <li>\u5728\u7b56\u7565\u91cc\u53f3\u51fb\uff0c\u9009\u5219<code>\u7f16\u8f91\u7b56\u7565\u7ec4</code></li> </ul> <ul> <li>\u76f4\u63a5\u4e0b\u4e00\u6b65</li> </ul> <ul> <li>\u9009\u5219<code>\u540c\u65f6\u5305\u542b\u5916\u90e8\u7b56\u7565</code>\uff0c\u5c06\ud83e\ude9c\u7684\u914d\u7f6e\u7684URL\uff08\u94fe\u63a5\u8981\u5e26token\uff1ahttps://xxxxx/subscribe?token=xxxxxx\uff09 \u7c98\u8d34\u5230\u8fd9\u91cc\uff0c\u4e0b\u4e00\u6b65</li> </ul> <ul> <li>\u7136\u540e\u53d6\u4e2a\u540d\u5b57\u5c31\u5b8c\u6210\u4e86</li> </ul> <ul> <li>\u6709\u591a\u5c11\u4e2a\ud83e\ude9c\u5c31\u914d\u7f6e\u591a\u5c11\u4e2a</li> </ul>"},{"location":"mac/surge_v2/#2","title":"2. \u8ba2\u9605\u8f6c\u6362\u7248","text":"<p>\u4f7f\u7528\u573a\u4e3b\u63d0\u4f9b\u7684\u8ba2\u9605\u8f6c\u6362\u5de5\u5177\u5373\u53ef</p>"},{"location":"mac/surge_v2/#3-surgevpn","title":"3. Surge\u4e0eVPN\u914d\u5408\u4f7f\u7528","text":"<p>Surge\u7684\u589e\u5f3a\u6a21\u5f0f\u4f1a\u76f4\u63a5\u6539\u53d8\u7cfb\u7edf\u7684DNS\uff0c\u6240\u6709\u7684\u8bbf\u95ee\u90fd\u4f1a\u8fd4\u56deFake IP\uff0c\u5e76\u4e14\u4f1a\u9ed8\u8ba4\u8d70<code>en0</code>\u7f51\u5361\uff0c\u800cVPN\u7684\u8d70\u7684\u662f<code>utunXXXX</code>\u7f51\u5361\uff0c\u6240\u4ee5\u6211\u4eec\u7684\u601d\u8def\u662f\uff0c\u5c06VPN\u7684\u7f51\u5361<code>utunXXXX</code>\u8bbe\u7f6e\u4e3a\u4e00\u4e2a\u4ee3\u7406\uff0c\u5185\u7f51\u7684IP\u548c\u7f51\u5740\u8d70\u8fd9\u4e2a\u4ee3\u7406\u3002\u7136\u540e\u5408\u5e76\u4ee3\u7406\uff0c\u6258\u7ba1\u7684\u81ea\u52a8\u66f4\u65b0\uff0c\u4e0d\u5f71\u54cdvpn\u7684\u4f7f\u7528\u3002</p>"},{"location":"mac/surge_v2/#31","title":"3.1. \u914d\u7f6e\u4ee3\u7406","text":"<ul> <li>\u767b\u9646VPN\u8f6f\u4ef6\uff0c\u6253\u5f00\u7ec8\u7aef\u5de5\u5177\uff0c\u8f93\u5165<code>ifconfig</code> \u5e76\u8bb0\u5f55VPN\u7684\u7f51\u5361\u540d\u79f0</li> </ul> <p>\u8fd9\u91cc\u7684<code>en0</code>\u5c31\u662f\u9ed8\u8ba4\u7684\u7f51\u5361\uff0c<code>utun10</code>\u5c31\u662fVPN\u7684\u7f51\u5361</p> <p></p> <p></p> <ul> <li>\u5728<code>\u66f4\u591a</code>---&gt;<code>\u914d\u7f6e</code>\u65b0\u5efa\u4e00\u4e2a\u5168\u65b0\u7684\u914d\u7f6e\uff0c\u8fd9\u91cc\u53d6\u540d\u5c31\u53eb<code>VPN</code></li> </ul> <p></p> <p>\u5728\u914d\u7f6e\u91cc\u53cc\u51fb<code>VPN</code>\u5e76\u5e94\u7528</p> <ul> <li>\u5728<code>\u7b56\u7565</code>\u91cc\u65b0\u5efa\u4e00\u4e2a\u4ee3\u7406\uff0c\u534f\u8bae\u9009\u62e9<code>\u7ed1\u5b9a\u7f51\u8def\u63a5\u53e3</code></li> </ul> <p></p> <ul> <li>\u8bbe\u7f6e<code>\u6307\u5b9a\u7f51\u7edc\u8bbe\u5907</code>\uff0c\u586b\u5199VPN\u7684\u7f51\u5361\u540d\u79f0</li> </ul> <p></p> <p></p> <ul> <li>\u8bbe\u7f6e\u4e00\u4e2a\u5185\u7f51\u7684\u7f51\u5740\u4f5c\u4e3a\u6d4b\u8bd5\u5730\u5740\uff0c\u7136\u540e\u53d6\u4e2a\u540d\u5b57\u4fdd\u5b58</li> </ul> <p></p> <ul> <li>\u63a5\u4e0b\u6765\u4f7f\u7528\u76f8\u540c\u7684\u65b9\u6cd5\u6dfb\u52a0\u4e00\u4e0b<code>en0</code>\u7f51\u5361\u7684\u4ee3\u7406</li> </ul> <p></p>"},{"location":"mac/surge_v2/#32","title":"3.2 \u914d\u7f6e\u7b56\u7565\u7ec4","text":"<ul> <li>\u65b0\u589e\u7b56\u7565\u7ec4\uff0c\u9009\u62e9<code>\u81ea\u52a8\u6d4b\u8bd5\u7b56\u7565\u7ec4</code></li> </ul> <ul> <li>\u52fe\u4e0a\u6211\u4eec\u521a\u624d\u521b\u5efa\u7684\u4e24\u4e2a\u4ee3\u7406</li> </ul> <ul> <li>\u53d6\u540d<code>\u5c40\u57df\u7f51</code>\uff0c\u5b8c\u6210</li> </ul> <ul> <li>\u6d4b\u8bd5\u4e00\u4e0b\u662f\u5426\u6210\u529f\uff08\u521b\u5efa\u7684\u4e24\u4e2a\u4ee3\u7406\u90fd\u8981\u8bbe\u7f6e\u4e00\u4e0b\u5185\u7f51\u57df\u540d\u4f5c\u4e3a\u6d4b\u8bd5\u5730\u5740\uff09</li> </ul>"},{"location":"mac/surge_v2/#33","title":"3.3 \u914d\u7f6e\u89c4\u5219","text":"<ul> <li>\u5e38\u89c4\u914d\u7f6e\uff0c\u7b56\u7565\u9009\u62e9\u6211\u4eec\u521b\u5efa\u7684<code>\u5c40\u57df\u7f51</code>\u7b56\u7565\u7ec4</li> </ul>"},{"location":"mac/surge_v2/#34","title":"3.4 \u66b4\u529b\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff0c\u5408\u5e76\u4ee3\u7406","text":"<ul> <li>\u6253\u5f00surge\u914d\u7f6e\u6587\u4ef6\u5939</li> </ul> <p>\u5728<code>\u66f4\u591a</code>---&gt;<code>\u914d\u7f6e</code>---&gt;<code>\u5728Finder\u4e2d\u627e\u5230\u914d\u7f6e</code></p> <p></p> <ul> <li>\u7f16\u8f91\u6211\u4eec\u521b\u5efa\u7684<code>VPN.conf</code>\uff0c\u5c06<code>[Rule]</code>\u914d\u7f6e\u9879\u91cc\u7684FINAL\u5220\u6389</li> </ul> <p></p> <p></p> <ul> <li>\u7136\u540e\u8f6f\u4ef6\u4f1a\u62a5\u9519\uff0c\u4e0d\u7528\u7ba1</li> </ul> <p></p> <ul> <li>\u5408\u5e76\u4ee3\u7406</li> </ul> <p>\u65b0\u5efa\u4e00\u4e2a\u5168\u65b0\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u76f4\u63a5\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff0c\u66ff\u6362\u6210\u4e0b\u9762\u7684\u5185\u5bb9</p> <pre><code>[General]\n#!include SS.conf\n\n[Rule]\n#!include VPN.conf, SS.conf\n\n[Proxy Group]\n#!include SS.conf, VPN.conf\n\n[URL Rewrite]\n#!include SS.conf\n\n[Proxy]\n#!include SS.conf, VPN.conf\n\n[Header Rewrite]\n#!include SS.conf\n</code></pre> <p>\u8fd9\u91cc\u7684<code>SS.conf</code>\u662f\u6258\u7ba1\u7684\u914d\u7f6e\u6587\u4ef6\uff0c<code>VPN.conf</code>\u5c31\u662f\u6211\u4eec\u4e0a\u9762\u521b\u5efa\u7684VPN\u914d\u7f6e\u6587\u4ef6\uff0c<code>Rule</code>\u91cc<code>VPN.conf</code>\u4e00\u5b9a\u8981\u653e\u5728<code>SS.conf</code>\u524d\u9762\uff0c\u56e0\u4e3a<code>VPN.conf</code>\u6ca1\u6709<code>FINAL</code>\uff0c<code>SS.conf</code>\u91cc\u9762\u6709</p> <p>\u7136\u540e\u5c31\u53ef\u4ee5\u5728\u7b56\u7565\u91cc\u770b\u5230\u4e24\u4e2a\u914d\u7f6e\u6587\u4ef6\u7684\u4ee3\u7406\u4e86\uff0c\u6258\u7ba1\u7684\u600e\u4e48\u66f4\u65b0\u90fd\u4e0d\u4f1a\u6539\u53d8\u6211\u4eecVPN\u7684\u8bbe\u7f6e\uff0c\u5728\u516c\u53f8\u9ed8\u8ba4\u7f51\u5361\u901a\u3001vpn\u7f51\u5361\u4e0d\u901a\uff08\u6839\u672c\u6ca1\u6253\u5f00\u8f6f\u4ef6\uff09\uff0c\u5185\u7f51\u7684ip\u3001\u7f51\u5740\u5c31\u8d70\u9ed8\u8ba4\u7f51\u5361\uff0c\u5728\u5bb6\u91cc\uff0c\u9ed8\u8ba4\u7f51\u5361\u4e0d\u901a\u3001vpn\u7f51\u5361\u901a\uff0c\u5185\u7f51\u7684ip\u3001\u7f51\u5740\u5c31\u8d70vpn\u7f51\u5361</p> <p>\u5b8c\u7f8e\uff01\uff01\uff01</p> <p></p> <p></p>"},{"location":"mac/surge_v3/","title":"Surge","text":"<p>\u5728<code>\u66f4\u591a</code>---&gt;<code>\u914d\u7f6e</code>---&gt;<code>\u5728Finder\u4e2d\u627e\u5230\u914d\u7f6e</code></p> <p></p> <p>\u672c\u6587\u6d89\u53ca\u7684\u914d\u7f6e\u6587\u4ef6\u90fd\u662f\u5728\u8fd9\u4e2a\u76ee\u5f55\u91cc\u624b\u64b8\u7684\uff0c\u6216\u8005\u590d\u5236\u5230\u8fd9\u4e2a\u6587\u4ef6\u91cc\u7684</p>"},{"location":"mac/surge_v3/#1","title":"1. \u914d\u7f6e","text":"<p>\u4e3a\u4e86\u907f\u514d\u8ba2\u9605\u66b4\u9732\u7684\u98ce\u9669\uff0c\u672c\u6559\u7a0b\u4e0d\u6d89\u53ca\u8ba2\u9605\u7684\u8f6c\u6362</p>"},{"location":"mac/surge_v3/#11","title":"1.1. \u624b\u64b8\u914d\u7f6e\u6587\u4ef6","text":"<pre><code>[General]\n# ================ iOS\u548cMacOS\u5171\u540c\u7684 Surge \u53c2\u6570 ================ #\n# &gt; \u65e5\u5fd7\u7ea7\u522b verbose, info, notify, or warning \u4e0d\u5efa\u8bae\u5728\u65e5\u5e38\u4f7f\u7528\u4e2d\u542f\u7528\u8be6\u7ec6\uff0c\u56e0\u4e3a\u8fd9\u4f1a\u663e\u8457\u964d\u4f4e\u6027\u80fd\u3002\nloglevel = notify\n# &gt; IPv6\u534f\u8bae \u542f\u7528\u5b8c\u6574\u7684 IPv6 \u652f\u6301\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u5f00\u542f\u8be5\u9009\u9879\u540e\uff0c\u8bbf\u95ee\u57df\u540d\u65f6\u4f1a\u67e5\u8be2\u8be5\u57df\u540d\u7684AAAA\u8bb0\u5f55\u3002\u5373\u4f7f\u672a\u542f\u7528\u6b64\u9009\u9879\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u76f4\u63a5\u8bbf\u95ee IPv6 \u5730\u5740\u6765\u8bbf\u95ee IPv6 \u7ad9\u70b9\u3002\nipv6 = false\n# &gt; \u5141\u8bb8 IPv6 \u901a\u8fc7 Surge VIF\u3002\u5f53\u60a8\u5e0c\u671b Surge \u5904\u7406\u8fde\u63a5\u5230 IPv6 \u5730\u5740\u7684\u539f\u59cb TCP \u8fde\u63a5\u65f6\u5f88\u6709\u7528\u3002\n# &gt; off \uff1a\u5207\u52ff\u4f7f\u7528 IPv6 \u8bbe\u7f6e Surge VIF\n# &gt; auto \uff1a\u4ec5\u5f53\u672c\u5730\u7f51\u7edc\u5177\u6709\u6709\u6548\u7684 IPv6 \u7f51\u7edc\u65f6\uff0c\u624d\u4f7f\u7528 IPv6 \u8bbe\u7f6e Surge VIF\n# &gt; always \uff1a\u59cb\u7ec8\u4f7f\u7528 IPv6 \u8bbe\u7f6e Surge VIF\nipv6-vif = false\n# &gt; dns\u670d\u52a1\u5668 \u4e0a\u6e38DNS\u670d\u52a1\u5668\u7684IP\u5730\u5740\ndns-server = system, 223.5.5.5, 119.29.29.29, 1.1.1.1, 1.0.0.1, 8.8.8.8, 8.8.4.4, 9.9.9.9:995\n# &gt; \u8df3\u8fc7\u4ee3\u7406 \u5728 iOS \u7248\u672c\u4e2d\uff0c\u6b64\u9009\u9879\u5f3a\u5236\u4e0e\u8fd9\u4e9b\u57df/IP \u8303\u56f4\u7684\u8fde\u63a5\u7531 Surge VIF \u800c\u4e0d\u662f Surge \u4ee3\u7406\u5904\u7406\u3002\u5728 macOS \u7248\u672c\u4e2d\uff0c\u5f53\u542f\u7528\u201c\u8bbe\u7f6e\u4e3a\u7cfb\u7edf\u4ee3\u7406\u201d\u65f6\uff0c\u8fd9\u4e9b\u8bbe\u7f6e\u5c06\u5e94\u7528\u4e8e\u7cfb\u7edf\u3002\u6b64\u9009\u9879\u7528\u4e8e\u4fee\u590d\u67d0\u4e9b\u5e94\u7528\u7684\u517c\u5bb9\u6027\u95ee\u9898\u3002\n# &gt; apple.com\u3001*apple.com\u3001192.168.2.* or 192.168.2.0/24\n# &gt; \u6ce8\u610f\uff1a\u5982\u679c\u8f93\u5165 IP \u5730\u5740\u6216\u5730\u5740\u8303\u56f4\uff0c\u5219\u53ea\u6709\u5728\u4f7f\u7528\u8be5\u5730\u5740\u8fde\u63a5\u5230\u8be5\u4e3b\u673a\u65f6\u624d\u80fd\u7ed5\u8fc7\u4ee3\u7406\uff0c\u800c\u4e0d\u80fd\u5728\u901a\u8fc7\u89e3\u6790\u4e3a\u8be5\u5730\u5740\u7684\u57df\u540d\u8fde\u63a5\u5230\u4e3b\u673a\u65f6\u7ed5\u8fc7\u4ee3\u7406\u3002\nskip-proxy = localhost, *.local, 0.0.0.0/8, 10.0.0.0/8, 17.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 172.17.0.0/12, 172.18.0.0/12, 172.19.0.0/12, 172.20.0.0/24, 192.0.0.0/24, 192.0.2.0/24, 192.168.0.0/16, 192.88.99.0/24, 198.18.0.0/15, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 240.0.0.0/4, 255.255.255.255/32, 117.71.53.199/32, 47.75.120.166/32\n# &gt; \u6392\u9664\u7b80\u5355\u4e3b\u673a\u540d \u5c31\u50cf skip-proxy \u53c2\u6570\u4e00\u6837\u3002\u6b64\u9009\u9879\u5141\u8bb8\u8bf7\u6c42\u4f7f\u7528\u7531 Surge VIF \u800c\u4e0d\u662f Surge \u4ee3\u7406\u5904\u7406\u7684\u7b80\u5355\u4e3b\u673a\u540d\uff08\u4e0d\u5e26\u70b9\uff09\u3002\n# &gt; mysql01\u3001redis01\nexclude-simple-hostnames = true\n# &gt; \u5916\u90e8\u63a7\u5236\u5668\u8bbf\u95ee \u6b64\u9009\u9879\u5141\u8bb8\u5916\u90e8\u63a7\u5236\u5668\u63a7\u5236 Surge\uff0c\u4f8b\u5982 Surge Dashboard \uff08macOS\uff09 \u548c Surge iOS \u9065\u63a7\u5668 \uff08iOS\uff09\u3002\u4f8b\u5982\uff1akey@0.0.0.0:6166\nexternal-controller-access = mima1234@0.0.0.0:6166\n# &gt; \u4f7f\u7528 HTTPS \u534f\u8bae\u800c\u4e0d\u662f HTTP\u3002\u5fc5\u987b\u5148\u914d\u7f6e MitM CA \u8bc1\u4e66\u3002\u60a8\u9700\u8981\u5728\u5ba2\u6237\u7aef\u8bbe\u5907\u4e0a\u624b\u52a8\u5b89\u88c5\u8bc1\u4e66\u3002\n# http-api-tls =\n# &gt; \u542f\u7528\u6b64\u529f\u80fd\u540e\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7 Web \u6d4f\u89c8\u5668\u63a7\u5236 Surge\u3002\nhttp-api-web-dashboard = false\n# &gt; \u663e\u793a\u9519\u8bef\u9875\u9762\u62d2\u7edd,\u5982\u679c\u8bf7\u6c42\u662f\u7eaf HTTP \u8bf7\u6c42\uff0c\u5219\u663e\u793a REJECT \u7b56\u7565\u7684\u9519\u8bef\u7f51\u9875\u3002\nshow-error-page-for-reject = true\n# &gt; Surge VIF\u53ea\u80fd\u5904\u7406 TCP \u548c UDP \u534f\u8bae\u3002\u4f7f\u7528\u6b64\u9009\u9879\u53ef\u7ed5\u8fc7\u7279\u5b9a IP \u8303\u56f4\uff0c\u4ee5\u5141\u8bb8\u6240\u6709\u6d41\u91cf\u901a\u8fc7\u3002\n# &gt; \u6ce8\u610f\uff1a\u6b64\u9009\u9879\u4ec5\u9002\u7528\u4e8eSurge VIF\u3002Surge Proxy Server \u5904\u7406\u7684\u8bf7\u6c42\u4e0d\u53d7\u5f71\u54cd\u3002\u5408\u5e76 skip-proxy \u5e76\u786e\u4fdd tun-excluded-routes \u7279\u5b9a HTTP \u6d41\u91cf\u7ed5\u8fc7 Surge\u3002\n# tun-excluded-routes =\n# &gt; \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cSurge VIF \u63a5\u53e3\u5c06\u81ea\u8eab\u58f0\u660e\u4e3a\u9ed8\u8ba4\u8def\u7531\u3002\u4f46\u662f\uff0c\u7531\u4e8e Wi-Fi \u63a5\u53e3\u7684\u8def\u7531\u8f83\u5c0f\uff0c\u56e0\u6b64\u67d0\u4e9b\u6d41\u91cf\u53ef\u80fd\u65e0\u6cd5\u901a\u8fc7\u6d6a\u6d8c VIF \u63a5\u53e3\u3002\u4f7f\u7528\u6b64\u9009\u9879\u53ef\u6dfb\u52a0\u8f83\u5c0f\u7684\u8def\u7531\u3002\n# tun-included-routes =\n# &gt; Internet \u8fde\u63a5\u6d4b\u8bd5\u7684 URL, \u4ee5\u53ca\uff0cDIRECT \u7b56\u7565\u7684\u6d4b\u8bd5 URL\ninternet-test-url = http://connect.rom.miui.com/generate_204\n# &gt; \u4ee3\u7406\u7b56\u7565\u7684\u9ed8\u8ba4\u6d4b\u8bd5 URL\nproxy-test-url = http://www.gstatic.com/generate_204\n# &gt; \u8fde\u63a5\u6d4b\u8bd5\u8d85\u65f6\uff08\u79d2\uff09\ntest-timeout = 5\n# &gt; \u59cb\u7ec8\u771f\u5b9e\u7684 IP \u6b64\u9009\u9879\u8981\u6c42 Surge \u5728 Surge VIF \u5904\u7406 DNS \u95ee\u9898\u65f6\u8fd4\u56de\u771f\u5b9e IP \u5730\u5740\u800c\u4e0d\u662f\u865a\u5047 IP \u5730\u5740 DNS\u6570\u636e\u5305\u5c06\u88ab\u8f6c\u53d1\u5230\u4e0a\u6e38DNS\u670d\u52a1\u5668 \u6b64\u53c2\u6570\u5c5e\u4e8e\u4e3b\u673a\u5217\u8868\u7c7b\u578b\uff0c\u8be6\u7ec6\u89c4\u5219\u8bf7\u53c2\u89c1\uff1ahttps://manual.nssurge.com/others/host-list.html\n# &gt; \u4f7f\u7528\u524d\u7f00 - \u6392\u9664\u4e3b\u673a\u540d\n# &gt; \u652f\u6301\u901a\u914d\u7b26 * \u548c ?\n# &gt; \u4f7f\u7528\u540e\u7f00 :port \u5339\u914d\u5176\u4ed6\u7aef\u53e3,\u5982\u679c\u672a\u63d0\u4f9b\u7aef\u53e3\u53f7\uff0c\u5219 Surge \u5c06\u81ea\u52a8\u4e3a\u8be5\u53c2\u6570\u9644\u52a0\u6807\u51c6\u7aef\u53e3\u53f7\uff0c\u5c31\u50cf force-http-engine-hosts \u53c2\u6570\u4e00\u6837\uff0c\u5982\u679c\u4ec5\u914d\u7f6e\u4e86\u4e3b\u673a\u540d\uff0c\u5219\u4ec5\u5bf9\u7aef\u53e3 80 \u6709\u6548\u3002\u5bf9\u4e8e MITM \u529f\u80fd\uff0c\u5b83\u4ec5\u5bf9\u7aef\u53e3 443 \u6709\u6548\u3002\n# &gt; \u4f7f\u7528\u540e\u7f00 :0 \u4ee5\u5339\u914d\u6240\u6709\u7aef\u53e3\n# &gt; \u4f7f\u7528&lt;ip-address&gt; \u76f4\u63a5\u4f7f\u7528 IPv4/IPv6 \u5730\u5740\uff08\u800c\u4e0d\u662f\u57df\uff09\u5339\u914d\u6240\u6709\u4e3b\u673a\u540d\n# &gt; -*icloud*, -*.mzstatic.com, -*.facebook.com, -*.instagram.com, -*.twitter.com, -*dropbox*, -*apple*, -*.amazonaws.com, -&lt;ip-address&gt;, *\nalways-real-ip = *.test.com\n# &gt; \u52ab\u6301DNS,\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cSurge \u4ec5\u8fd4\u56de\u53d1\u9001\u5230 Surge DNS \u5730\u5740 \uff08198.18.0.2\uff09 \u7684 DNS \u67e5\u8be2\u7684\u865a\u5047 IP \u5730\u5740\u3002\u53d1\u9001\u5230\u6807\u51c6 DNS \u7684\u67e5\u8be2\u5c06\u88ab\u8f6c\u53d1\u3002\u67d0\u4e9b\u8bbe\u5907\u6216\u8f6f\u4ef6\u59cb\u7ec8\u4f7f\u7528\u786c\u7f16\u7801\u7684 DNS \u670d\u52a1\u5668\u3002\uff08\u4f8b\u5982\uff0cGoogle Speakers\u59cb\u7ec8\u4f7f\u7528 8.8.8.8\uff09\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528\u6b64\u9009\u9879\u52ab\u6301\u67e5\u8be2\u4ee5\u83b7\u53d6\u865a\u5047\u5730\u5740\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 hijack-dns = *:53 \u52ab\u6301\u6240\u6709DNS\u67e5\u8be2\nhijack-dns = *:53\n# &gt; \u4f7f Surge \u5c06 TCP \u8fde\u63a5\u89c6\u4e3a HTTP \u8bf7\u6c42\u3002Surge HTTP \u5f15\u64ce\u5c06\u5904\u7406\u8bf7\u6c42\uff0c\u5e76\u4e14\u6240\u6709\u9ad8\u7ea7\u529f\u80fd\u90fd\u5c06\u53ef\u7528\uff0c\u4f8b\u5982\u6355\u83b7\u3001\u91cd\u5199\u548c\u811a\u672c\u7f16\u5199\u3002\u6b64\u53c2\u6570\u5c5e\u4e8e\u4e3b\u673a\u5217\u8868\u7c7b\u578b\uff0c\u8be6\u7ec6\u89c4\u5219\u8bf7\u53c2\u89c1\uff1ahttps://manual.nssurge.com/others/host-list.html\n# force-http-engine-hosts =\n# &gt; \u52a0\u5bc6 DNS \u8ddf\u968f\u51fa\u7ad9\u6a21\u5f0f,\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u52a0\u5bc6\u7684 DNS \u67e5\u627e\u4f7f\u7528\u76f4\u63a5\u51fa\u7ad9\u3002\u542f\u7528\u8be5\u9009\u9879\u5c06\u4f7f DOH \u9075\u5faa\u51fa\u7ad9\u6a21\u5f0f\u8bbe\u7f6e\u548c\u89c4\u5219\u3002\n# encrypted-dns-follow-outbound-mode = true\n# &gt; \u52a0\u5bc6\u7684 DNS \u670d\u52a1\u5668,\u52a0\u5bc6\u7684 DNS \u670d\u52a1\u5668\u7684 URL\u3002\u5982\u679c\u914d\u7f6e\u4e86\u52a0\u5bc6 DNS\uff0c\u5219\u4f20\u7edf DNS \u5c06\u4ec5\u7528\u4e8e\u6d4b\u8bd5\u8fde\u63a5\u5e76\u89e3\u6790\u52a0\u5bc6 DNS URL \u4e2d\u7684\u57df\u3002\n# encrypted-dns-server =\n# &gt; \u8df3\u8fc7\u52a0\u5bc6\u7684DNS\u670d\u52a1\u5668\u8bc1\u4e66\u9a8c\u8bc1\uff0c\u8fd9\u662f\u4e0d\u5b89\u5168\u7684\u3002\nencrypted-dns-skip-cert-verification = false\n# &gt; \u4f7f\u7528\u672c\u5730\u4e3b\u673a\u4ee3\u7406,\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u4f7f\u7528\u4ee3\u7406\u7b56\u7565\uff0c\u5219\u59cb\u7ec8\u5728\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u6267\u884c DNS \u67e5\u627e\u3002\u542f\u7528\u6b64\u9009\u9879\u540e\uff0c\u5982\u679c\u5b58\u5728\u76ee\u6807\u57df\u7684\u672c\u5730 DNS \u6620\u5c04\u7ed3\u679c\uff0c\u5219 Surge \u4f1a\u4f7f\u7528 IP \u5730\u5740\u800c\u4e0d\u662f\u57df\u6765\u8bbe\u7f6e\u4ee3\u7406\u8fde\u63a5\u3002\nuse-local-host-item-for-proxy = true\n# &gt; \u8981\u66f4\u65b0\u7684 GeoIP \u6570\u636e\u5e93\u7684 URL\ngeoip-maxmind-url = https://github.com/Hackl0us/GeoIP2-CN/raw/release/Country.mmdb\n# &gt; \u7981\u7528 GeoIP \u6570\u636e\u5e93\u7684\u81ea\u52a8\u66f4\u65b0\ndisable-geoip-db-auto-update = false\n# &gt; iOS \u7cfb\u7edf\u53ef\u80fd\u4f1a\u6267\u884c SVCB \u8bb0\u5f55 DNS \u67e5\u627e\uff0c\u800c\u4e0d\u662f\u6807\u51c6 A \u8bb0\u5f55\u67e5\u627e\u3002\u8fd9\u4f1a\u5bfc\u81f4 Surge \u65e0\u6cd5\u8fd4\u56de\u865a\u62df IP \u5730\u5740\u3002\u56e0\u6b64\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u7981\u6b62 SVCB \u8bb0\u5f55\u67e5\u627e\uff0c\u4ee5\u5f3a\u5236\u7cfb\u7edf\u6267\u884c A \u8bb0\u5f55\u67e5\u627e\u3002\nallow-dns-svcb = false\n# &gt; UDP \u6d41\u91cf\u4e0e\u4e0d\u652f\u6301 UDP \u4e2d\u7ee7\u7684\u7b56\u7565\u5339\u914d\u65f6\u7684\u56de\u9000\u884c\u4e3a,\u53ef\u80fd\u7684\u503c\uff1a DIRECT \u3001 REJECT, \u5982\u679c\u6ca1\u6709\u4ee3\u7406\u670d\u52a1\u5668\u652f\u6301 UDP \u8f6c\u53d1\uff0c\u53ef\u4fee\u6539\u4e3a\u300c direct \u300d\u6216\u6ce8\u91ca\u4e0b\u6761\uff0c\u4f46\u9700\u6ce8\u610f\u540c\u4e00\u76ee\u6807\u4e3b\u673a\u540d TCP \u8bf7\u6c42\u4e0e UDP \u8bf7\u6c42\u7684\u6e90\u5730\u5740\u4e0d\u540c\u6240\u9020\u6210\u7684\u9690\u79c1\u53ca\u5b89\u5168\u98ce\u9669\u3002\nudp-policy-not-supported-behaviour = REJECT\n# &gt; \u4ee3\u7406\u7684\u9ed8\u8ba4 UDP \u6d4b\u8bd5\u53c2\u6570, \u4f8b\u5982\uff1a apple.com@8.8.8.8\n# proxy-test-udp = apple.com@8.8.8.8\n# &gt; \u5f53\u7cfb\u7edf\u8d1f\u8f7d\u975e\u5e38\u9ad8\u4e14\u6570\u636e\u5305\u5904\u7406\u5ef6\u8fdf\u65f6\uff0c\u542f\u7528\u5c06\u4f18\u5148\u5904\u7406 UDP \u6570\u636e\u5305\u3002\u4e5f\u79f0\u4e3a\u6e38\u620f\u6a21\u5f0f\nudp-priority = false\n# &gt; Surge \u5c06\u81ea\u52a8\u55c5\u63a2\u53d1\u9001\u5230\u7aef\u53e3 80 \u548c 443 \u7684 TCP \u8bf7\u6c42\u7684\u534f\u8bae\uff0c\u4ece\u800c\u5728\u4f18\u5316\u6027\u80fd\u7684\u540c\u65f6\u542f\u7528\u9ad8\u7ea7 HTTP/HTTPS \u529f\u80fd\u3002\u4f46\u662f\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4e00\u4e9b\u517c\u5bb9\u6027\u95ee\u9898\u3002\u5982\u679c\u9047\u5230\u95ee\u9898\uff0c\u53ef\u4ee5\u5728\u6b64\u5904\u6dfb\u52a0\u4e3b\u673a\u540d\uff0cSurge \u4e0d\u4f1a\u55c5\u63a2\u8fd9\u4e9b\u8bf7\u6c42\u7684\u534f\u8bae\u3002\u6b64\u53c2\u6570\u5c5e\u4e8e\u4e3b\u673a\u5217\u8868\u7c7b\u578b\uff0c\u8be6\u7ec6\u89c4\u5219\u8bf7\u53c2\u89c1\uff1ahttps://manual.nssurge.com/others/host-list.html\nalways-raw-tcp-hosts = *.baidu.com\n# ================ \u4ec5\u9650 iOS \u7684 Surge \u53c2\u6570 ================ #\n# &gt; \u5141\u8bb8 wifi \u8bbf\u95ee,\u5141\u8bb8 Surge \u4ee3\u7406\u670d\u52a1\u4ece LAN \u4e2d\u7684\u5176\u4ed6\u8bbe\u5907\u8bbf\u95ee\u3002\nallow-wifi-access = false\n# &gt; Surge HTTP \u4ee3\u7406\u670d\u52a1\u7684\u7aef\u53e3\u53f7\nwifi-access-http-port = 6152\n# &gt; Surge SOCKS5 \u4ee3\u7406\u670d\u52a1\u7684\u7aef\u53e3\u53f7\nwifi-access-socks5-port = 6153\n# &gt; \u8981\u6c42\u5bf9 Surge HTTP \u4ee3\u7406\u670d\u52a1\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002\u4f8b\u5982\uff1a\u7528\u6237\u540d\uff1a\u5bc6\u7801\nwifi-access-http-auth = surge:mima1234\n# &gt; \u542f\u7528 Wi-Fi \u52a9\u624b (\u5728 Wi-Fi \u7f51\u7edc\u4e0d\u4f73\u65f6\u5c1d\u8bd5\u4f7f\u7528\u6570\u636e\u7f51\u7edc\u5efa\u7acb\u8fde\u63a5\uff0c\u8bf7\u4ec5\u5f53\u4f7f\u7528\u4e0d\u9650\u91cf\u7684\u6570\u636e\u6d41\u91cf\u65f6\u5f00\u542f)\nwifi-assist = false\n# &gt; \u9690\u85cf\u72b6\u6001\u680f\u4e2d\u7684 VPN \u56fe\u6807\nhide-vpn-icon = false\n# &gt; \u5f53 Wi-Fi \u7f51\u7edc\u8f83\u5dee\u65f6\uff0c\u4e0d\u8981\u8bbe\u7f6e\u4e0e\u8702\u7a9d\u6570\u636e\u7684\u8fde\u63a5\uff0c\u800c\u662f\u59cb\u7ec8\u540c\u65f6\u8bbe\u7f6e\u4e0e Wi-Fi \u548c\u8702\u7a9d\u6570\u636e\u7684\u8fde\u63a5 \u6b64\u9009\u9879\u53ef\u4ee5\u5728 Wi-Fi \u8f83\u5dee\u6216 Wi-Fi \u7f51\u7edc\u5207\u6362\u65f6\u663e\u8457\u6539\u5584\u7f51\u7edc\u4f53\u9a8c \u6b64\u529f\u80fd\u5c06\u5e94\u7528\u4e8e\u6240\u6709 TCP \u8fde\u63a5\u548c DNS \u67e5\u627e\u3002\u4ec5\u5f53\u60a8\u62e5\u6709\u65e0\u9650\u7684\u8702\u7a9d\u6570\u636e\u8ba1\u5212\u65f6\u624d\u542f\u7528\u5b83\nall-hybrid = false\n# &gt; \u5141\u8bb8\u5728\u201c\u4e2a\u4eba\u70ed\u70b9\u201d\u6253\u5f00\u65f6\u4ece\u5176\u4ed6\u8bbe\u5907\u8bbf\u95ee Surge \u4ee3\u7406\u670d\u52a1\nallow-hotspot-access = ture\n# &gt; \u5305\u542b\u6240\u6709\u7f51\u7edc,\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u67d0\u4e9b\u8bf7\u6c42\u53ef\u80fd\u4e0d\u4f1a\u88ab Surge \u63a5\u7ba1\u3002\u4f8b\u5982\uff0c\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u7ed1\u5b9a\u5230\u7269\u7406\u7f51\u7edc\u63a5\u53e3\u4ee5\u7ed5\u8fc7\u6d6a\u6d8c VIF\u3002\u542f\u7528\u201c\u5305\u62ec\u6240\u6709\u7f51\u7edc\u201d\u9009\u9879\uff0c\u4ee5\u786e\u4fdd\u6240\u6709\u8bf7\u6c42\u90fd\u7531 Surge \u5904\u7406\u800c\u4e0d\u4f1a\u6cc4\u6f0f\u3002\u5f53\u60a8\u4f7f\u7528 Surge \u4f5c\u4e3a\u9632\u706b\u5899\u65f6\uff0c\u6b64\u9009\u9879\u5f88\u6709\u7528\u3002\uff08\u9700\u8981 iOS 14.0 \u6216\u4ee5\u4e0a\u7248\u672c\uff09,\u542f\u7528\u6b64\u9009\u9879\u53ef\u80fd\u4f1a\u5bfc\u81f4 AirDrop \u548c Xcode \u8c03\u8bd5\u95ee\u9898\u3001\u901a\u8fc7 USB \u7684 Surge Dashboard \u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\u4ee5\u53ca\u5176\u4ed6\u610f\u5916\u7684\u526f\u4f5c\u7528\u3002\u8bf7\u8c28\u614e\u4f7f\u7528\u3002\ninclude-all-networks = false\n# &gt; \u5305\u542b\u672c\u5730\u7f51\u7edc,\u542f\u7528\u6b64\u9009\u9879\u53ef\u4f7f Surge VIF \u5904\u7406\u53d1\u9001\u5230 LAN \u7684\u8bf7\u6c42\u3002\uff08\u9700\u8981 iOS 14.2 \u6216\u66f4\u9ad8\u7248\u672c\uff09\u542f\u7528\u6b64\u9009\u9879\u53ef\u80fd\u4f1a\u5bfc\u81f4 AirDrop \u548c Xcode \u8c03\u8bd5\u95ee\u9898\u3001\u901a\u8fc7 USB \u7684 Surge Dashboard \u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\u4ee5\u53ca\u5176\u4ed6\u610f\u5916\u7684\u526f\u4f5c\u7528\u3002\u8bf7\u8c28\u614e\u4f7f\u7528\u3002\u5fc5\u987b\u4e0e include-all-networks=true \u7ed3\u5408\u4f7f\u7528\u3002\ninclude-local-networks = false\n# &gt; \u542f\u7528\u6b64\u9009\u9879\u53ef\u4f7f Surge VIF \u5904\u7406 Apple \u63a8\u9001\u901a\u77e5\u670d\u52a1 \uff08APNs\uff09 \u7684\u7f51\u7edc\u6d41\u91cf\u3002\u5fc5\u987b\u4e0e include-all-networks=true \u7ed3\u5408\u4f7f\u7528\u3002\ninclude-apns = false\n# &gt; \u542f\u7528\u6b64\u9009\u9879\u53ef\u4f7f Surge VIF \u5904\u7406\u8702\u7a9d\u670d\u52a1\u7684 Internet \u53ef\u8def\u7531\u7f51\u7edc\u6d41\u91cf\u3002\uff08VoLTE\u3001Wi-Fi \u901a\u8bdd\u3001IMS\u3001\u5f69\u4fe1\u3001\u53ef\u89c6\u8bed\u97f3\u4fe1\u7bb1\u7b49\uff09.\u8bf7\u6ce8\u610f\uff0c\u67d0\u4e9b\u8702\u7a9d\u8fd0\u8425\u5546\u4f1a\u7ed5\u8fc7\u4e92\u8054\u7f51\uff0c\u5c06\u8702\u7a9d\u7f51\u7edc\u670d\u52a1\u6d41\u91cf\u76f4\u63a5\u8def\u7531\u5230\u8fd0\u8425\u5546\u7f51\u7edc\u3002\u6b64\u7c7b\u8702\u7a9d\u670d\u52a1\u6d41\u91cf\u59cb\u7ec8\u88ab\u6392\u9664\u5728\u96a7\u9053\u4e4b\u5916\u3002\u5fc5\u987b\u4e0e include-all-networks=true \u7ed3\u5408\u4f7f\u7528\u3002\ninclude-cellular-services = false\n# &gt; \u517c\u5bb9\u6027\u6a21\u5f0f,\u6b64\u9009\u9879\u7528\u4e8e\u63a7\u5236 Surge iOS \u7684\u5de5\u4f5c\u6a21\u5f0f\u3002\n# &gt; 0\uff1a\u81ea\u52a8\uff0c\u5728 5.8.0 \u4e4b\u524d\u7684 Surge iOS \u7248\u672c\u4e2d\uff0c\u8fd9\u76f8\u5f53\u4e8e 1\uff0c\u4ece 5.8.0 \u5f00\u59cb\uff0c\u5b83\u76f8\u5f53\u4e8e 3\n# &gt; 1\uff1a\u4ee3\u7406\u63a5\u7ba1 + VIF\uff0c\u5728\u6b64\u6a21\u5f0f\u4e0b\uff0c\u4ee3\u7406\u63a5\u7ba1\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e VIF \u63a5\u7ba1\uff0c\u63d0\u4f9b\u6700\u4f73\u6027\u80fd\uff0c\u4f46\u67d0\u4e9b\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f1a\u68c0\u67e5\u4ee3\u7406\u8bbe\u7f6e\u5e76\u62d2\u7edd\u5de5\u4f5c\u3002\n# &gt; 2\uff1a\u4ec5\u4ee3\u7406\u63a5\u7ba1\n# &gt; 3\uff1aVIF Takeover Only\uff1a\u6700\u65b0\u7248\u672c\u7684\u9ed8\u8ba4\u5de5\u4f5c\u6a21\u5f0f\u3002\n# &gt; 4\uff1a\u4ee3\u7406\u63a5\u7ba1 + VIF\uff0c\u4f46\u4ee3\u7406\u4f7f\u7528 VIF \u5730\u5740\u800c\u4e0d\u662f\u73af\u56de\u5730\u5740\u3002\n# &gt; 5\uff1a\u4ee3\u7406\u63a5\u7ba1+VIF\uff0c\u4f46VIF\u8def\u7531\u4f7f\u7528\u591a\u4e2a\u8f83\u5c0f\u7684\u8def\u7531\u8fdb\u884c\u63a5\u7ba1\uff0c\u6ca1\u6709\u914d\u7f6e\u9ed8\u8ba4\u8def\u7531\uff0c\u53ef\u4ee5\u7528\u6765\u7ed5\u8fc7\u4e00\u4e9b\u7279\u6b8a\u95ee\u9898\u3002\uff08\u4f8b\u5982\uff0cHomeKit \u5b89\u9632\u6444\u50cf\u5934\uff09\ncompatibility-mode = 1\n# ================ \u4ec5\u9650 MacOS \u7684 Surge \u53c2\u6570 ================ #\n# &gt; \u5982\u679c\u7981\u7528\uff0c\u5373\u4f7f Wi-Fi \u4e0d\u662f\u4e3b\u7f51\u7edc\u63a5\u53e3\uff0cSSID/BSSID \u6a21\u5f0f\u4ecd\u53ef\u5339\u914d\u3002\n# use-default-policy-if-wifi-not-primary = false\n# &gt; \u9075\u5faa /etc/hosts \u4e2d\u7684\u672c\u5730 DNS \u6620\u5c04\u9879\n# read-etc-hosts = true\n# &gt; Surge HTTP \u4ee3\u7406\u670d\u52a1\u7684\u7aef\u53e3\u53f7\n# http-listen = 0.0.0.0:6152\n# &gt; Surge SOCKS5 \u4ee3\u7406\u670d\u52a1\u7684\u7aef\u53e3\u53f7\n# socks5-listen = 0.0.0.0:6153\n# &gt; \u542f\u7528 CPU \u8c03\u8bd5\u6a21\u5f0f\u3002\u8fd9\u53ef\u80fd\u4f1a\u964d\u4f4e\u6027\u80fd\u3002\n# debug-cpu-usage = false\n# &gt; \u542f\u7528\u5185\u5b58\u8c03\u8bd5\u6a21\u5f0f\u3002\u8fd9\u53ef\u80fd\u4f1a\u964d\u4f4e\u6027\u80fd\u3002\n# debug-memory-usage = false\n# &gt; vif\u6a21\u5f0f\n# &gt; auto \uff1a\u8ba9Surge\u81ea\u52a8\u9009\u62e9\u6700\u5408\u9002\u7684\u5de5\u4f5c\u6a21\u5f0f\u3002\n# &gt; v1 \uff1a\u4f20\u7edf\u6a21\u5f0f\uff0cTCP\u534f\u8bae\u6808\u5b8c\u5168\u7531Surge\u7ba1\u7406\u3002\u7531\u4e8e Surge \u8fd0\u884c\u5728\u7528\u6237\u7a7a\u95f4\u4e2d\uff0c\u8fd9\u610f\u5473\u7740\u6bcf\u4e2a\u6570\u636e\u5305\u90fd\u9700\u8981\u4ece\u5185\u6838\u7a7a\u95f4\u4f20\u8f93\u5230\u7528\u6237\u7a7a\u95f4\u8fdb\u884c\u5904\u7406\u3002\n# &gt; v2 \uff1a\u5728 5.0 \u7248\u672c\u4e2d\u5f15\u5165\uff0c\u5b83\u4f7f\u7528 macOS \u4e2d\u7684\u6570\u636e\u5305\u8fc7\u6ee4\u5668\u673a\u5236\uff0c\u5229\u7528 macOS \u7684 TCP \u534f\u8bae\u6808\uff0c\u4ece\u800c\u907f\u514d\u4e86\u5728\u5185\u6838\u7a7a\u95f4\u548c\u7528\u6237\u7a7a\u95f4\u4e4b\u95f4\u5207\u6362\u7684\u5f00\u9500\uff0c\u4ece\u800c\u663e\u7740\u63d0\u9ad8\u4e86\u6027\u80fd\u3002\u4f46\u662f\uff0c\u7531\u4e8e\u5b83\u9700\u8981\u4fee\u6539 pf \u8bbe\u7f6e\uff0c\u56e0\u6b64\u5b83\u4e0e\u865a\u62df\u673a\u7f51\u7edc\u548c\u7f51\u7edc\u5171\u4eab\u529f\u80fd\u4e0d\u517c\u5bb9\u3002\n# &gt; v3 \uff1a\u5728 5.2 \u7248\u4e2d\u5f15\u5165\uff0c\u5b83\u7ed5\u8fc7\u4e86\u6570\u636e\u5305\u8fc7\u6ee4\u5668\uff0c\u5e76\u91c7\u7528\u53e6\u4e00\u79cd\u6280\u672f\u6765\u4f7f\u7528 macOS \u7684 TCP \u534f\u8bae\u6808\u3002\u6027\u80fd\u7565\u4f4e\u4e8e v2\uff0c\u4f46\u907f\u514d\u4e86\u56e0\u8c03\u6574 pf \u8bbe\u7f6e\u800c\u5bfc\u81f4\u7684\u517c\u5bb9\u6027\u95ee\u9898\u3002\n# vif-mode = v3\n\n[Proxy]\n#!include xxxx.conf\n\n[Proxy Group]\n#!include Common.conf\n\n[Rule]\n#!include Common.conf\n\n[URL Rewrite]\n#!include Common.conf\n</code></pre> <p>\u65b0\u5efa\u914d\u7f6e\u6587\u4ef6<code>surge.conf</code>\uff0c\u5c06\u4e0a\u9762\u7684\u5185\u5bb9\u590d\u5236\u5230\u6587\u4ef6\u91cc</p> <pre><code>[Proxy Group]\n\ud83d\udd30 \u8282\u70b9\u9009\u62e9 = select, \u267b\ufe0f \u81ea\u52a8\u9009\u62e9, \ud83d\udec3 \u624b\u52a8\u5207\u6362, \ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9, \ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9, \ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9, \ud83c\udde8\ud83c\uddf3 \u53f0\u6e7e\u8282\u70b9, \ud83c\uddf0\ud83c\uddf7 \u97e9\u56fd\u8282\u70b9, \ud83c\uddec\ud83c\udde7 \u82f1\u56fd\u8282\u70b9, \ud83c\uddf8\ud83c\uddec \u65b0\u52a0\u5761\u8282\u70b9, \ud83c\udde8\ud83c\udde6 \u52a0\u62ff\u5927\u8282\u70b9, \ud83c\udde9\ud83c\uddea \u5fb7\u56fd\u8282\u70b9, \ud83c\uddeb\ud83c\uddf7 \u6cd5\u56fd\u8282\u70b9, \ud83c\uddee\ud83c\uddf3 \u5370\u5ea6\u8282\u70b9, \ud83c\udf0e \u5176\u4ed6\u8282\u70b9, \ud83c\udfaf \u5168\u7403\u76f4\u8fde, \u26d4\ufe0f \u7981\u6b62\u8bbf\u95ee\n\u267b\ufe0f \u81ea\u52a8\u9009\u62e9 = url-test, include-all-proxies=1, policy-regex-filter=^((?!\u4f63\u91d1|\u5b98\u7f51|\u514d\u7ffb|\u5230\u671f|\u6d41\u91cf|\u66f4\u65b0|\u70b9\u5916|\u91cd\u7f6e|\u514d\u6d41|Direct|GB|Days|Date|Expire|Premium).)*$, url=http://www.gstatic.com/generate_204, interval=300, tolerance=50\n\ud83d\udec3 \u624b\u52a8\u5207\u6362 = select, include-all-proxies=1, policy-regex-filter=^((?!\u4f63\u91d1|\u5b98\u7f51|\u514d\u7ffb|\u5230\u671f|\u6d41\u91cf|\u66f4\u65b0|\u70b9\u5916|\u91cd\u7f6e|\u514d\u6d41|Direct|GB|Days|Date|Expire|Premium).)*$\n\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9 = url-test, include-all-proxies=1, policy-regex-filter=^(?!.*Premium).*(?:\u6e2f|HK|hk|Hong Kong|HongKong|hongkong).*$, url=http://www.gstatic.com/generate_204, interval=300, tolerance=50\n\ud83c\uddef\ud83c\uddf5 \u65e5\u672c\u8282\u70b9 = url-test, include-all-proxies=1, policy-regex-filter=^(?!.*Premium).*(?:\u65e5\u672c|\u5ddd\u65e5|\u4e1c\u4eac|\u5927\u962a|\u6cc9\u65e5|\u57fc\u7389|\u6caa\u65e5|\u6df1\u65e5|[^-]\u65e5|JP|Japan).*$, url=http://www.gstatic.com/generate_204, interval=300, tolerance=50\n\ud83c\uddfa\ud83c\uddf8 \u7f8e\u56fd\u8282\u70b9 = url-test, include-all-proxies=1, policy-regex-filter=^(?!.*Premium).*(?:\u7f8e|\u6ce2\u7279\u5170|\u8fbe\u62c9\u65af|\u4fc4\u52d2\u5188|\u51e4\u51f0\u57ce|\u8d39\u5229\u8499|\u7845\u8c37|\u62c9\u65af\u7ef4\u52a0\u65af|\u6d1b\u6749\u77f6|\u5723\u4f55\u585e|\u5723\u514b\u62c9\u62c9|\u897f\u96c5\u56fe|\u829d\u52a0\u54e5|US|United States).*$, url=http://www.gstatic.com/generate_204, interval=300, tolerance=50\n\ud83c\udde8\ud83c\uddf3 \u53f0\u6e7e\u8282\u70b9 = url-test, include-all-proxies=1, policy-regex-filter=^(?!.*Premium).*(?:\u53f0|\u65b0\u5317|\u5f70\u5316|TW|Taiwan).*$, url=http://www.gstatic.com/generate_204, interval=300, tolerance=50\n\ud83c\uddf0\ud83c\uddf7 \u97e9\u56fd\u8282\u70b9 = url-test, include-all-proxies=1, policy-regex-filter=^(?!.*Premium).*(?:KR|Korea|KOR|\u9996\u5c14|\u97e9|\u97d3).*$, url=http://www.gstatic.com/generate_204, interval=300, tolerance=50\n\ud83c\uddec\ud83c\udde7 \u82f1\u56fd\u8282\u70b9 = url-test, include-all-proxies=1, policy-regex-filter=^(?!.*Premium).*(?:UK|\u82f1\u56fd).*$, url=http://www.gstatic.com/generate_204, interval=300, tolerance=50\n\ud83c\uddf8\ud83c\uddec \u65b0\u52a0\u5761\u8282\u70b9 = url-test, include-all-proxies=1, policy-regex-filter=^(?!.*Premium).*(?:\u65b0\u52a0\u5761|\u5761|\u72ee\u57ce|SG|Singapore).*$, url=http://www.gstatic.com/generate_204, interval=300, tolerance=50\n\ud83c\udde8\ud83c\udde6 \u52a0\u62ff\u5927\u8282\u70b9 = url-test, include-all-proxies=1, policy-regex-filter=^(?!.*Premium).*(?:Canada|\u52a0\u62ff\u5927).*$, url=http://www.gstatic.com/generate_204, interval=300, tolerance=50\n\ud83c\udde9\ud83c\uddea \u5fb7\u56fd\u8282\u70b9 = url-test, include-all-proxies=1, policy-regex-filter=^(?!.*Premium).*(?:\u5fb7\u56fd|\ud83c\udde9\ud83c\uddea|Germany).*$, url=http://www.gstatic.com/generate_204, interval=300, tolerance=50\n\ud83c\uddeb\ud83c\uddf7 \u6cd5\u56fd\u8282\u70b9 = url-test, include-all-proxies=1, policy-regex-filter=^(?!.*Premium).*(?:\u6cd5\u56fd|\ud83c\uddeb\ud83c\uddf7|France).*$, url=http://www.gstatic.com/generate_204, interval=300, tolerance=50\n\ud83c\uddee\ud83c\uddf3 \u5370\u5ea6\u8282\u70b9 = url-test, include-all-proxies=1, policy-regex-filter=^(?!.*Premium).*(?:\u5370\u5ea6|\ud83c\uddee\ud83c\uddf3|India).*$, url=http://www.gstatic.com/generate_204, interval=300, tolerance=50\n\ud83c\udf0e \u5176\u4ed6\u8282\u70b9 = url-test, include-all-proxies=1, policy-regex-filter=^((?!\u4f63\u91d1|\u5b98\u7f51|\u514d\u7ffb|\u5230\u671f|\u6d41\u91cf|\u66f4\u65b0|\u70b9\u5916|\u91cd\u7f6e|\u514d\u6d41|Direct|GB|Days|Date|Expire|Premium|\u6e2f|HK|hk|Hong Kong|HongKong|hongkong|\u65e5\u672c|\u5ddd\u65e5|\u4e1c\u4eac|\u5927\u962a|\u6cc9\u65e5|\u57fc\u7389|\u6caa\u65e5|\u6df1\u65e5|[^-]\u65e5|JP|Japan|\u7f8e|\u6ce2\u7279\u5170|\u8fbe\u62c9\u65af|\u4fc4\u52d2\u5188|\u51e4\u51f0\u57ce|\u8d39\u5229\u8499|\u7845\u8c37|\u62c9\u65af\u7ef4\u52a0\u65af|\u6d1b\u6749\u77f6|\u5723\u4f55\u585e|\u5723\u514b\u62c9\u62c9|\u897f\u96c5\u56fe|\u829d\u52a0\u54e5|US|United States|\u53f0|\u65b0\u5317|\u5f70\u5316|TW|Taiwan|KR|Korea|KOR|\u9996\u5c14|\u97e9|\u97d3|\u72ee\u57ce|\u72ee|\u65b0\u52a0\u5761|\u5761|SG|Singapore|\u82f1\u56fd|UK|Canada|\u52a0\u62ff\u5927|\u5fb7\u56fd|\ud83c\udde9\ud83c\uddea|Germany|\u6cd5\u56fd|\ud83c\uddeb\ud83c\uddf7|France|\u5370\u5ea6|\ud83c\uddee\ud83c\uddf3|India).)*$, interval=300, tolerance=50\n\u26d4\ufe0f \u7981\u6b62\u8bbf\u95ee = select, REJECT\n\ud83c\udfaf \u5168\u7403\u76f4\u8fde = select, DIRECT\n\n[Rule]\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Advertising/Advertising_All_No_Resolve.list,\u26d4\ufe0f \u7981\u6b62\u8bbf\u95ee,update-interval=86400,no-resolve // AD\u5e7f\u544a\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Hijacking/Hijacking.list,\u26d4\ufe0f \u7981\u6b62\u8bbf\u95ee,update-interval=86400 // \u9632\u52ab\u6301\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/BlockHttpDNS/BlockHttpDNS.list,\u26d4\ufe0f \u7981\u6b62\u8bbf\u95ee,update-interval=86400 // \u7981\u7528HTTP\u534f\u8bae\u7684DNS\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Privacy/Privacy_All_No_Resolve.list,\u26d4\ufe0f \u7981\u6b62\u8bbf\u95ee,update-interval=86400 // \u9690\u79c1\u4fdd\u62a4\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Lan/Lan.list,\ud83c\udfaf \u5168\u7403\u76f4\u8fde,update-interval=86400 // Lan\u7f51\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/AmazonCN/AmazonCN.list,\ud83c\udfaf \u5168\u7403\u76f4\u8fde,update-interval=86400 // \u4e9a\u9a6c\u900a\u4e2d\u56fd\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Cloudflarecn/Cloudflarecn.list,\ud83c\udfaf \u5168\u7403\u76f4\u8fde,update-interval=86400 // Cloudflare\u4e2d\u56fd\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Download/Download.list,\ud83c\udfaf \u5168\u7403\u76f4\u8fde,update-interval=86400 // \u4e0b\u8f7d\u7f51\u7ad9\nRULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/UnBan.list,\ud83c\udfaf \u5168\u7403\u76f4\u8fde,update-interval=86400 // \u767d\u540d\u5355\nRULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/GoogleCN.list,\ud83c\udfaf \u5168\u7403\u76f4\u8fde,update-interval=86400 // \u8c37\u6b4c\u4e2d\u56fd\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/OneDrive/OneDrive.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // Microsoft OneDrive\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Microsoft/Microsoft.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // Microsoft\u670d\u52a1\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Amazon/Amazon.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // \u4e9a\u9a6c\u900a\u57df\u540d\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/AmazonIP/AmazonIP.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // \u4e9a\u9a6c\u900aIP\u5730\u5740\u6bb5\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Jetbrains/Jetbrains.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // Jetbrains\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Apple/Apple_All_No_Resolve.list,\ud83c\udfaf \u5168\u7403\u76f4\u8fde,update-interval=86400 // Apple\u670d\u52a1\nRULE-SET,https://raw.githubusercontent.com/Coldvvater/Mononoke/master/Surge/Rules/Telegram.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // Telegram\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Twitter/Twitter.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // Twitter\nRULE-SET,https://raw.githubusercontent.com/Coldvvater/Mononoke/master/Surge/Rules/AI.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // ChatGPT\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GitHub/GitHub.list,\ud83c\udded\ud83c\uddf0 \u9999\u6e2f\u8282\u70b9,update-interval=86400 // GitHub\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Cloudflare/Cloudflare.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // Cloudflare\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/YouTube/YouTube.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // YouTube\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/YouTubeMusic/YouTubeMusic.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // YouTube Music\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Netflix/Netflix.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // Netflix\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/TikTok/TikTok.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // TikTok\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Disney/Disney.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // Disney\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GlobalMedia/GlobalMedia_All_No_Resolve.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // \u56fd\u5916\u5a92\u4f53\nRULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Proxy/Proxy_All_No_Resolve.list,\ud83d\udd30 \u8282\u70b9\u9009\u62e9,update-interval=86400 // GFW\nRULE-SET,https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaCompanyIp.list,\ud83c\udfaf \u5168\u7403\u76f4\u8fde,update-interval=86400 // \u4e2d\u56fd\u516c\u53f8IP\nRULE-SET,https://raw.githubusercontent.com/chenyk1219/surge/release/ChinaDomain.list,\ud83c\udfaf \u5168\u7403\u76f4\u8fde,update-interval=86400 // \u4e2d\u56fd\u57df\u540d\nGEOIP,CN,\ud83c\udfaf \u5168\u7403\u76f4\u8fde // \u4e2d\u56fdIP\nFINAL,\ud83d\udd30 \u8282\u70b9\u9009\u62e9\n\n[URL Rewrite]\n^https?://(www.)?g.cn https://www.google.com 302\n^https?://(www.)?google.cn https://www.google.com 302\n</code></pre> <p>\u65b0\u5efa\u914d\u7f6e\u6587\u4ef6<code>Common.conf</code>\uff0c\u5c06\u4e0a\u9762\u7684\u5185\u5bb9\u590d\u5236\u5230\u6587\u4ef6\u91cc</p> <ul> <li>\u6253\u5f00surge\u914d\u7f6e\u6587\u4ef6\u5939</li> </ul> <p>\u5728<code>\u66f4\u591a</code>---&gt;<code>\u914d\u7f6e</code>---&gt;<code>\u5728Finder\u4e2d\u627e\u5230\u914d\u7f6e</code></p> <p></p> <ul> <li>\u5c06<code>surge.conf</code>\u548c<code>Common.conf</code>\u62d6\u653e\u5230\u6587\u4ef6\u5939\u91cc</li> </ul> <p></p> <ul> <li>\u5728\u914d\u7f6e\u91cc\u53cc\u51fb<code>surge.conf</code>\u5e76\u5e94\u7528</li> </ul> <p></p> <ul> <li>\u6253\u5f00\u7b56\u7565\u548c\u89c4\u5219\uff0c\u4f60\u5c31\u53ef\u4ee5\u770b\u5230\u5df2\u7ecf\u6dfb\u52a0\u597d\u7684\u7b56\u7565\u548c\u89c4\u5219</li> </ul> <p></p> <p></p>"},{"location":"mac/surge_v3/#12","title":"1.2. \u914d\u7f6e\u4ee3\u7406","text":"<p>\u76f4\u63a5\u590d\u5236\u673a\u573a\u7684surge\u8ba2\u9605\u94fe\u63a5\uff0c\u4e0b\u8f7d\u5230\u672c\u5730</p> <p></p> <p>\u4e0b\u8f7d\u5b8c\u6210\u4ee5\u540e\u67e5\u770b\u4e00\u4e0b\u8fd9\u4e2a\u914d\u7f6e\u6587\u4ef6\u53eb\u4ec0\u4e48\u540d\u5b57\uff0c\u4fee\u6539\u4e0a\u9762\u7684<code>surge.conf</code>\uff0c\u5c06<code>[proxy]</code>\u914d\u7f6e\u9879\u91cc\u7684<code>xxxx.conf</code>\u66ff\u6362\u6210\u4e0b\u8f7d\u4e0b\u6765\u7684\u914d\u7f6e\u6587\u4ef6\u7684\u540d\u5b57\uff0c\u5c31\u53ef\u4ee5\u6109\u5feb\u7684\u4f7f\u7528\u4e86</p> <p>\u5982\u679c\u6709\u591a\u4e2a\uff0c\u5c31\u591a\u6b21\u5f15\u5165</p> <pre><code>#!include xxxx.conf, xxxxx.conf, xxxx.conf\n</code></pre>"},{"location":"mac/surge_v3/#2-surgevpn","title":"2. Surge\u4e0eVPN\u914d\u5408\u4f7f\u7528","text":"<p>Surge\u7684\u589e\u5f3a\u6a21\u5f0f\u4f1a\u76f4\u63a5\u6539\u53d8\u7cfb\u7edf\u7684DNS\uff0c\u6240\u6709\u7684\u8bbf\u95ee\u90fd\u4f1a\u8fd4\u56deFake IP\uff0c\u5e76\u4e14\u4f1a\u9ed8\u8ba4\u8d70<code>en0</code>\u7f51\u5361\uff0c\u800cVPN\u7684\u8d70\u7684\u662f<code>utunXXXX</code>\u7f51\u5361\uff0c\u6240\u4ee5\u6211\u4eec\u7684\u601d\u8def\u662f\uff0c\u5c06VPN\u7684\u7f51\u5361<code>utunXXXX</code>\u8bbe\u7f6e\u4e3a\u4e00\u4e2a\u4ee3\u7406\uff0c\u5185\u7f51\u7684IP\u548c\u7f51\u5740\u8d70\u8fd9\u4e2a\u4ee3\u7406\u3002\u7136\u540e\u5408\u5e76\u4ee3\u7406\uff0c\u6258\u7ba1\u7684\u81ea\u52a8\u66f4\u65b0\uff0c\u4e0d\u5f71\u54cdvpn\u7684\u4f7f\u7528\u3002</p>"},{"location":"mac/surge_v3/#31","title":"3.1. \u914d\u7f6e\u4ee3\u7406","text":"<ul> <li>\u767b\u9646VPN\u8f6f\u4ef6\uff0c\u6253\u5f00\u7ec8\u7aef\u5de5\u5177\uff0c\u8f93\u5165<code>ifconfig</code> \u5e76\u8bb0\u5f55VPN\u7684\u7f51\u5361\u540d\u79f0</li> </ul> <p>\u8fd9\u91cc\u7684<code>en0</code>\u5c31\u662f\u9ed8\u8ba4\u7684\u7f51\u5361\uff0c<code>utun10</code>\u5c31\u662fVPN\u7684\u7f51\u5361</p> <p></p> <p></p> <ul> <li>\u5728<code>\u66f4\u591a</code>---&gt;<code>\u914d\u7f6e</code>\u65b0\u5efa\u4e00\u4e2a\u5168\u65b0\u7684\u914d\u7f6e\uff0c\u8fd9\u91cc\u53d6\u540d\u5c31\u53eb<code>VPN</code></li> </ul> <p></p> <p>\u5728\u914d\u7f6e\u91cc\u53cc\u51fb<code>VPN</code>\u5e76\u5e94\u7528</p> <ul> <li>\u5728<code>\u7b56\u7565</code>\u91cc\u65b0\u5efa\u4e00\u4e2a\u4ee3\u7406\uff0c\u534f\u8bae\u9009\u62e9<code>\u7ed1\u5b9a\u7f51\u8def\u63a5\u53e3</code></li> </ul> <p></p> <ul> <li>\u8bbe\u7f6e<code>\u6307\u5b9a\u7f51\u7edc\u8bbe\u5907</code>\uff0c\u586b\u5199VPN\u7684\u7f51\u5361\u540d\u79f0</li> </ul> <p></p> <p></p> <ul> <li>\u8bbe\u7f6e\u4e00\u4e2a\u5185\u7f51\u7684\u7f51\u5740\u4f5c\u4e3a\u6d4b\u8bd5\u5730\u5740\uff0c\u7136\u540e\u53d6\u4e2a\u540d\u5b57\u4fdd\u5b58</li> </ul> <p></p> <ul> <li>\u63a5\u4e0b\u6765\u4f7f\u7528\u76f8\u540c\u7684\u65b9\u6cd5\u6dfb\u52a0\u4e00\u4e0b<code>en0</code>\u7f51\u5361\u7684\u4ee3\u7406</li> </ul> <p></p>"},{"location":"mac/surge_v3/#32","title":"3.2 \u914d\u7f6e\u7b56\u7565\u7ec4","text":"<ul> <li>\u65b0\u589e\u7b56\u7565\u7ec4\uff0c\u9009\u62e9<code>\u81ea\u52a8\u6d4b\u8bd5\u7b56\u7565\u7ec4</code></li> </ul> <ul> <li>\u52fe\u4e0a\u6211\u4eec\u521a\u624d\u521b\u5efa\u7684\u4e24\u4e2a\u4ee3\u7406</li> </ul> <ul> <li>\u53d6\u540d<code>\u5c40\u57df\u7f51</code>\uff0c\u5b8c\u6210</li> </ul> <ul> <li>\u6d4b\u8bd5\u4e00\u4e0b\u662f\u5426\u6210\u529f\uff08\u521b\u5efa\u7684\u4e24\u4e2a\u4ee3\u7406\u90fd\u8981\u8bbe\u7f6e\u4e00\u4e0b\u5185\u7f51\u57df\u540d\u4f5c\u4e3a\u6d4b\u8bd5\u5730\u5740\uff09</li> </ul>"},{"location":"mac/surge_v3/#33","title":"3.3 \u914d\u7f6e\u89c4\u5219","text":"<ul> <li>\u5e38\u89c4\u914d\u7f6e\uff0c\u7b56\u7565\u9009\u62e9\u6211\u4eec\u521b\u5efa\u7684<code>\u5c40\u57df\u7f51</code>\u7b56\u7565\u7ec4</li> </ul>"},{"location":"mac/surge_v3/#34","title":"3.4 \u66b4\u529b\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff0c\u5408\u5e76\u4ee3\u7406","text":"<ul> <li>\u6253\u5f00surge\u914d\u7f6e\u6587\u4ef6\u5939</li> </ul> <p>\u5728<code>\u66f4\u591a</code>---&gt;<code>\u914d\u7f6e</code>---&gt;<code>\u5728Finder\u4e2d\u627e\u5230\u914d\u7f6e</code></p> <p></p> <ul> <li>\u7f16\u8f91\u6211\u4eec\u521b\u5efa\u7684<code>VPN.conf</code>\uff0c\u5c06<code>[Rule]</code>\u914d\u7f6e\u9879\u91cc\u7684FINAL\u5220\u6389</li> </ul> <p></p> <p></p> <ul> <li>\u7136\u540e\u8f6f\u4ef6\u4f1a\u62a5\u9519\uff0c\u4e0d\u7528\u7ba1</li> </ul> <p></p> <ul> <li>\u5408\u5e76\u4ee3\u7406</li> </ul> <p>\u65b0\u5efa\u4e00\u4e2a\u5168\u65b0\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u76f4\u63a5\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff0c\u66ff\u6362\u6210\u4e0b\u9762\u7684\u5185\u5bb9</p> <pre><code>[General]\n#!include SS.conf\n\n[Rule]\n#!include VPN.conf, SS.conf\n\n[Proxy Group]\n#!include SS.conf, VPN.conf\n\n[URL Rewrite]\n#!include SS.conf\n\n[Proxy]\n#!include SS.conf, VPN.conf\n\n[Header Rewrite]\n#!include SS.conf\n</code></pre> <p>\u8fd9\u91cc\u7684<code>SS.conf</code>\u662f\u6258\u7ba1\u7684\u914d\u7f6e\u6587\u4ef6\uff0c<code>VPN.conf</code>\u5c31\u662f\u6211\u4eec\u4e0a\u9762\u521b\u5efa\u7684VPN\u914d\u7f6e\u6587\u4ef6\uff0c<code>Rule</code>\u91cc<code>VPN.conf</code>\u4e00\u5b9a\u8981\u653e\u5728<code>SS.conf</code>\u524d\u9762\uff0c\u56e0\u4e3a<code>VPN.conf</code>\u6ca1\u6709<code>FINAL</code>\uff0c<code>SS.conf</code>\u91cc\u9762\u6709</p> <p>\u7136\u540e\u5c31\u53ef\u4ee5\u5728\u7b56\u7565\u91cc\u770b\u5230\u4e24\u4e2a\u914d\u7f6e\u6587\u4ef6\u7684\u4ee3\u7406\u4e86\uff0c\u6258\u7ba1\u7684\u600e\u4e48\u66f4\u65b0\u90fd\u4e0d\u4f1a\u6539\u53d8\u6211\u4eecVPN\u7684\u8bbe\u7f6e\uff0c\u5728\u516c\u53f8\u9ed8\u8ba4\u7f51\u5361\u901a\u3001vpn\u7f51\u5361\u4e0d\u901a\uff08\u6839\u672c\u6ca1\u6253\u5f00\u8f6f\u4ef6\uff09\uff0c\u5185\u7f51\u7684ip\u3001\u7f51\u5740\u5c31\u8d70\u9ed8\u8ba4\u7f51\u5361\uff0c\u5728\u5bb6\u91cc\uff0c\u9ed8\u8ba4\u7f51\u5361\u4e0d\u901a\u3001vpn\u7f51\u5361\u901a\uff0c\u5185\u7f51\u7684ip\u3001\u7f51\u5740\u5c31\u8d70vpn\u7f51\u5361</p> <p>\u5b8c\u7f8e\uff01\uff01\uff01</p> <p></p> <p></p>"},{"location":"mac/zsh/","title":"ZSH\u7684\u5b89\u88c5\u4e0e\u914d\u7f6e","text":""},{"location":"mac/zsh/#1-zsh","title":"1. \u5b89\u88c5ZSh","text":"<pre><code>sh -c \"$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\"\n</code></pre>"},{"location":"mac/zsh/#2","title":"2. \u5b89\u88c5\u5b57\u4f53","text":"<p>\u7531\u4e8e\u7cfb\u7edf\u81ea\u5e26\u7684\u5b57\u4f53\u65e0\u6cd5\u663e\u793a\u56fe\u6807\uff0c\u8fd9\u91cc\u53ef\u4ee5\u5b89\u88c5\u4e00\u4e0b\u7b2c\u4e09\u65b9\u5b57\u4f53\uff0c\u4ee5\u66f4\u597d\u7684\u663e\u793a\u4e3b\u9898\u98ce\u683c</p> <p>\u5b57\u4f53\u63a8\u8350\u4f7f\u7528pk10\u4e3b\u9898\u9644\u5e26\u7684\u5b57\u4f53\uff0c\u4e0b\u8f7d\u5730\u5740https://github.com/romkatv/dotfiles-public/tree/master/.local/share/fonts/NerdFonts</p> <p></p> <p>\u4e0b\u8f7d\u5230\u672c\u5730\u76f4\u63a5\u53cc\u51fb\u5b89\u88c5\u5373\u53ef</p> <p>\u7136\u540e\u914d\u7f6eiterm2\u7684\u914d\u5b57\u4f53\uff0c<code>profile</code> ---&gt; <code>Text</code></p> <p></p>"},{"location":"mac/zsh/#3-pk10","title":"3. \u914d\u7f6ePK10\u4e3b\u9898","text":"<p>Oh My Zsh\u6709\u4e0a\u767e\u4e2a\u81ea\u5e26\u4e3b\u9898\uff0c\u4ee5\u53ca\u8bb8\u8bb8\u591a\u591a\u7684\u5916\u90e8\u4e3b\u9898\u3002\u4e2a\u4eba\u6bd4\u8f83\u559c\u6b22\u7684\u662f<code>powerlevel10k</code>\u3002</p> <ul> <li>\u4e0b\u8f7dpk10</li> </ul> <pre><code>git clone https://github.com/romkatv/powerlevel10k.git $ZSH_CUSTOM/themes/powerlevel10k\n</code></pre> <ul> <li>\u8bbe\u7f6e\u4e3b\u9898</li> </ul> <p>\u7f16\u8f91<code>~/.zshrc</code>\u6587\u4ef6\uff0c\u4fee\u6539<code>THEME</code></p> <pre><code>ZSH_THEME=\"powerlevel10k/powerlevel10k\"\n</code></pre> <ul> <li>\u914d\u7f6e\u4e3b\u9898</li> </ul> <p>\u5728\u7ec8\u7aef\u8f93\u5165<code>p10k configure</code></p> <pre><code>p10k configure\n</code></pre> <p></p> <p>\u7136\u540e\u6839\u636e\u81ea\u5df1\u7684\u559c\u597d\uff0c\u914d\u7f6e\u597d\u4e3b\u9898\u98ce\u683c\u5373\u53ef\uff0c\u914d\u7f6e\u5b8c\u6210\u4ee5\u540e\u4f1a\u5728\u5bb6\u76ee\u5f55\u751f\u6210.pk10.zsh\u6587\u4ef6</p> <p></p> <p>\u5982\u679c\u60f3\u91cd\u65b0\u914d\u7f6e\u4e3b\u9898\u98ce\u683c\uff0c\u53ea\u9700\u91cd\u65b0\u8fd0\u884c<code>p10k configure</code>\u5373\u53ef</p>"},{"location":"nginx/django/","title":"\u90e8\u7f72django","text":"<pre><code>[uwsgi]\nsocket=uwsgi.sock\nchdir=/data/unified-auth\nmodule=backend.wsgi:application\nmaster=True\npidfile=uwsgi.pid\nvacuum=True\nmax-requests=50000\ndaemonize=uwsgi.log\nprocesses=8\n</code></pre> <pre><code>#server {\n#    listen       80 default_server;\n#    server_name  _;\n#    access_log   off;\n#    return       444;\n#}\n\nserver {\n        listen       80;\n        server_name  xxxxxxx;\n\n        #if ($allowed_country = no) {\n             # return https://www.baidu.com;\n             # return /home/japan;\n        #     return 444;\n        #}\n\n        location / {\n            include  uwsgi_params;\n            #uwsgi_modifier1 72;\n            uwsgi_pass  unix:/data/unified-auth/uwsgi.sock;\n            uwsgi_param UWSGI_SCRIPT backend.wsgi;\n            uwsgi_param UWSGI_CHDIR /data/unified-auth;\n            index  index.html index.htm;\n            client_max_body_size 35m;\n            access_log logs/uwsgi.log;\n            error_log  logs/uwsgi.error error;\n        }\n\n       location /static {\n        alias /data/unified-auth/backend/static;\n      }\n}\n\n\nserver {\n    listen   80;\n    server_name xxxxxxx;\n\n\n    client_max_body_size    1024m;\n    client_body_buffer_size 512k;\n    proxy_connect_timeout 1800;\n    proxy_read_timeout 1800;\n    proxy_send_timeout 1800;\n    proxy_buffer_size 128k;\n    proxy_buffers  32 128k;\n    proxy_busy_buffers_size 128k;\n    proxy_temp_file_write_size 512k;\n\n    gzip on;\n    gzip_buffers 4 16k;\n    gzip_http_version 1.0;\n    gzip_comp_level 5;\n    gzip_vary on;\n    charset utf-8,gbk;\n    access_log zkmlops.log;\n    error_log zkmlops.log error;\n\n    root html/dist;\n    location  / {\n       index index.html;\n       try_files $uri $uri/ /index.html;\n   }\n\n   location /api {\n        rewrite  ^.+api/?(.*)$ /$1 break;\n        proxy_pass  http://api.it.izkml.cn;\n        proxy_cookie_domain domino.server nginx.server;\n        proxy_buffering off;\n    }\n\n location /static {\n        alias /data/unified-auth/backend/static;\n      }\n}\n</code></pre>"},{"location":"nginx/ftp/","title":"\u4e0b\u8f7d\u670d\u52a1\u5668","text":"<pre><code>server {\n    listen       80;\n    server_name  xxxxxxxxx;\n    charset utf-8;\n\n    autoindex on;\n    autoindex_exact_size off;\n    autoindex_localtime on;\n    root    /data/download/;\n    location / {\n         fancyindex on;\n         fancyindex_exact_size off;\n         fancyindex_localtime on;\n         fancyindex_header \"/myhtml/index.html\";\n         fancyindex_footer \"/myhtml/footer.html\";\n         fancyindex_css_href \"/myhtml/static\";\n         fancyindex_ignore \"myhtml\";\n         if ($request_filename ~* ^.*?\\.(txt|doc|pdf|rar|gz|zip|docx|exe|xlsx|ppt|pptx)$){\n            add_header Content-Disposition: 'attachment;';\n            }\n    }\n\n    location /static {\n         alias /data/download/myhtml/static/;\n    }\n}\n</code></pre>"},{"location":"python/data_type/","title":"Python\u7684\u6570\u636e\u7c7b\u578b","text":""},{"location":"python/data_type/#1","title":"1. \u6570\u636e\u7c7b\u578b","text":"<ul> <li>int \u6574\u578b</li> <li>str \u5b57\u7b26\u4e32\u7c7b\u578b</li> <li>float \u6d6e\u70b9\u578b</li> <li>bool \u5e03\u5c14\u7c7b\u578b</li> <li>list \u5217\u8868</li> <li>dict \u5b57\u5178</li> <li>set \u96c6\u5408</li> <li>tuple \u5143\u7ec4</li> </ul>"},{"location":"python/data_type/#2","title":"2. \u5b57\u9762\u503c","text":"<p>\u88ab\u5199\u4e0b\u6765\u56fa\u5b9a\u7684\u503c\uff08str\u3001int\u3001float\uff09</p> <p>\u6570\u636e\u5bb9\u5668</p> <p>\u4e00\u79cd\u53ef\u4ee5\u5bb9\u7eb3\u591a\u4efd\u6570\u636e\u7684\u6570\u636e\u7c7b\u578b\uff0c\u6bcf\u4e00\u4efd\u6570\u636e\u79f0\u4e3a1\u4e2a\u5143\u7d20</p>"},{"location":"python/data_type/#3","title":"3. \u5217\u8868","text":"<ul> <li>\u5b9a\u4e49\uff1a</li> </ul> <pre><code>a = []\n# or\nb = list()\n</code></pre> <ul> <li> <p>\u7279\u6027</p> <ul> <li>\u53ef\u4ee5\u5bb9\u7eb3\u591a\u4e2a\u5143\u7d20\uff1a2^63 -1</li> <li>\u53ef\u4ee5\u5bb9\u7eb3\u4e0d\u540c\u7c7b\u578b\u7684\u5143\u7d20</li> <li>\u6570\u636e\u662f\u6709\u5e8f\u5b58\u50a8\u7684\uff08\u5177\u6709\u4e0b\u6807\uff0c\u4ece\u524d\u5f80\u540e\u4ece0\u5f00\u59cb\uff0c\u4ece\u540e\u5f80\u524d\u4ece-1\u5f00\u59cb\uff09</li> <li>\u5141\u8bb8\u91cd\u590d\u5143\u7d20\u5b58\u5728</li> <li>\u53ef\u4ee5\u4fee\u6539\uff08\u589e\u52a0\u3001\u5220\u9664\uff09</li> </ul> </li> <li> <p>\u65b9\u6cd5</p> <ul> <li>list.append(obj) \u5728\u5217\u8868\u672b\u5c3e\u6dfb\u52a0\u65b0\u7684\u5bf9\u8c61</li> <li>list.count(obj) \u7edf\u8ba1\u67d0\u4e2a\u5143\u7d20\u5728\u5217\u8868\u4e2d\u51fa\u73b0\u7684\u6b21\u6570</li> <li>list.extend(seq) \u5728\u5217\u8868\u672b\u5c3e\u4e00\u6b21\u6027\u8ffd\u52a0\u53e6\u4e00\u4e2a\u5e8f\u5217\u4e2d\u7684\u591a\u4e2a\u503c\uff08\u7528\u65b0\u5217\u8868\u6269\u5c55\u539f\u6765\u7684\u5217\u8868\uff09</li> <li>list.index(obj) \u4ece\u5217\u8868\u4e2d\u627e\u51fa\u67d0\u4e2a\u503c\u7b2c\u4e00\u4e2a\u5339\u914d\u9879\u7684\u7d22\u5f15\u4f4d\u7f6e</li> <li>list.insert(index, obj) \u5c06\u5bf9\u8c61\u63d2\u5165\u5217\u8868</li> <li>list.pop([index=-1]) \u79fb\u9664\u5217\u8868\u4e2d\u7684\u4e00\u4e2a\u5143\u7d20\uff08\u9ed8\u8ba4\u6700\u540e\u4e00\u4e2a\u5143\u7d20\uff09\uff0c\u5e76\u4e14\u8fd4\u56de\u8be5\u5143\u7d20\u7684\u503c</li> <li>list.remove(obj) \u79fb\u9664\u5217\u8868\u4e2d\u67d0\u4e2a\u503c\u7684\u7b2c\u4e00\u4e2a\u5339\u914d\u9879</li> <li>list.reverse() \u53cd\u5411\u5217\u8868\u4e2d\u5143\u7d20</li> <li>list.sort(cmp=None, key=None, reverse=False) \u5bf9\u539f\u5217\u8868\u8fdb\u884c\u6392\u5e8f</li> </ul> </li> </ul>"},{"location":"python/data_type/#4","title":"4. \u5143\u7ec4","text":"<ul> <li>\u5b9a\u4e49</li> </ul> <p>\u5143\u7ec4\u4e00\u65e6\u5b9a\u4e49\u5c31\u65e0\u6cd5\u88ab\u4fee\u6539\uff0c\u662f\u4e2a\u53ea\u8bfb\u5217\u8868\uff0c\u5355\u5143\u7d20\u5fc5\u987b\u52a0\u4e0a<code>,</code>\uff0c\u5426\u5219\u5c31\u662f\u5b57\u7b26\u4e32</p> <pre><code>a = ()\n# or\nb = tuple()\n</code></pre> <ul> <li>\u7279\u6027<ul> <li>\u53ef\u4ee5\u5bb9\u7eb3\u591a\u4e2a\u5143\u7d20\uff1a2^63 -1</li> <li>\u53ef\u4ee5\u5bb9\u7eb3\u4e0d\u540c\u7c7b\u578b\u7684\u5143\u7d20</li> <li>\u6570\u636e\u662f\u6709\u5e8f\u5b58\u50a8\u7684\uff08\u5177\u6709\u4e0b\u6807\uff0c\u4ece\u524d\u5f80\u540e\u4ece0\u5f00\u59cb\uff0c\u4ece\u540e\u5f80\u524d\u4ece-1\u5f00\u59cb\uff09</li> <li>\u5141\u8bb8\u91cd\u590d\u5143\u7d20\u5b58\u5728</li> <li>\u4e0d\u53ef\u4ee5\u4fee\u6539\uff08\u589e\u52a0\u3001\u5220\u9664\uff09</li> </ul> </li> </ul>"},{"location":"python/data_type/#5","title":"5. \u5b57\u7b26\u4e32","text":"<p>\u5b57\u7b26\u7684\u5bb9\u5668\uff0c\u53ef\u4ee5\u5b58\u653e\u4efb\u610f\u6570\u91cf\u7684\u5b57\u7b26</p> <ul> <li>\u5b9a\u4e49</li> </ul> <pre><code>a = 'abc' # \u5355\u5f15\u53f7\nb = \"123\" # \u53cc\u5f15\u53f7\nc = \"\"\"45fdsa\"\"\" # \u4e09\u5f15\u53f7\n</code></pre> <ul> <li> <p>\u7279\u6027</p> <ul> <li>\u53ef\u4ee5\u5bb9\u7eb3\u4efb\u610f\u6570\u91cf\u5143\u7d20</li> <li>\u53ef\u4ee5\u5bb9\u7eb3\u4e0d\u540c\u7c7b\u578b\u7684\u5143\u7d20</li> <li>\u6570\u636e\u662f\u6709\u5e8f\u5b58\u50a8\u7684\uff08\u5177\u6709\u4e0b\u6807\uff0c\u4ece\u524d\u5f80\u540e\u4ece0\u5f00\u59cb\uff0c\u4ece\u540e\u5f80\u524d\u4ece-1\u5f00\u59cb\uff09</li> <li>\u5141\u8bb8\u91cd\u590d\u5143\u7d20\u5b58\u5728</li> <li>\u4e0d\u53ef\u4ee5\u4fee\u6539\uff08\u589e\u52a0\u3001\u5220\u9664\uff09</li> </ul> </li> <li> <p>\u65b9\u6cd5</p> <ul> <li>str.capitalize() \u5c06\u5b57\u7b26\u4e32\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u8f6c\u6362\u4e3a\u5927\u5199</li> <li>str.center(width, fillchar) \u8fd4\u56de\u4e00\u4e2a\u6307\u5b9a\u7684\u5bbd\u5ea6 width \u5c45\u4e2d\u7684\u5b57\u7b26\u4e32\uff0cfillchar \u4e3a\u586b\u5145\u7684\u5b57\u7b26\uff0c\u9ed8\u8ba4\u4e3a\u7a7a\u683c</li> <li>str.count(str, beg= 0,end=len(string))\u8fd4\u56de str \u5728 string \u91cc\u9762\u51fa\u73b0\u7684\u6b21\u6570\uff0c\u5982\u679c beg \u6216\u8005 end \u6307\u5b9a\u5219\u8fd4\u56de\u6307\u5b9a\u8303\u56f4\u5185 str \u51fa\u73b0\u7684\u6b21\u6570</li> <li>bytes.decode(encoding=\"utf-8\", errors=\"strict\") Python3 \u4e2d\u6ca1\u6709 decode \u65b9\u6cd5\uff0c\u4f46\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 bytes \u5bf9\u8c61\u7684 decode() \u65b9\u6cd5\u6765\u89e3\u7801\u7ed9\u5b9a\u7684 bytes \u5bf9\u8c61\uff0c\u8fd9\u4e2a bytes \u5bf9\u8c61\u53ef\u4ee5\u7531 str.encode() \u6765\u7f16\u7801\u8fd4\u56de\u3002</li> <li>str.encode(encoding='UTF-8',errors='strict') \u4ee5 encoding \u6307\u5b9a\u7684\u7f16\u7801\u683c\u5f0f\u7f16\u7801\u5b57\u7b26\u4e32\uff0c\u5982\u679c\u51fa\u9519\u9ed8\u8ba4\u62a5\u4e00\u4e2aValueError \u7684\u5f02\u5e38\uff0c\u9664\u975e errors \u6307\u5b9a\u7684\u662f'ignore'\u6216\u8005'replace'</li> <li>str.endswith(suffix, beg=0, end=len(string)) \u68c0\u67e5\u5b57\u7b26\u4e32\u662f\u5426\u4ee5 suffix \u7ed3\u675f\uff0c\u5982\u679c beg \u6216\u8005 end \u6307\u5b9a\u5219\u68c0\u67e5\u6307\u5b9a\u7684\u8303\u56f4\u5185\u662f\u5426\u4ee5 suffix \u7ed3\u675f\uff0c\u5982\u679c\u662f\uff0c\u8fd4\u56de True,\u5426\u5219\u8fd4\u56de False\u3002</li> <li>str.expandtabs(tabsize=8) \u628a\u5b57\u7b26\u4e32 string \u4e2d\u7684 tab \u7b26\u53f7\u8f6c\u4e3a\u7a7a\u683c\uff0ctab \u7b26\u53f7\u9ed8\u8ba4\u7684\u7a7a\u683c\u6570\u662f 8 </li> <li>str.find(str, beg=0, end=len(string)) \u68c0\u6d4b str \u662f\u5426\u5305\u542b\u5728\u5b57\u7b26\u4e32\u4e2d\uff0c\u5982\u679c\u6307\u5b9a\u8303\u56f4 beg \u548c end \uff0c\u5219\u68c0\u67e5\u662f\u5426\u5305\u542b\u5728\u6307\u5b9a\u8303\u56f4\u5185\uff0c\u5982\u679c\u5305\u542b\u8fd4\u56de\u5f00\u59cb\u7684\u7d22\u5f15\u503c\uff0c\u5426\u5219\u8fd4\u56de-1</li> <li>str.index(str, beg=0, end=len(string)) \u8ddffind()\u65b9\u6cd5\u4e00\u6837\uff0c\u53ea\u4e0d\u8fc7\u5982\u679cstr\u4e0d\u5728\u5b57\u7b26\u4e32\u4e2d\u4f1a\u62a5\u4e00\u4e2a\u5f02\u5e38</li> <li>str.isalnum() \u5982\u679c\u5b57\u7b26\u4e32\u81f3\u5c11\u6709\u4e00\u4e2a\u5b57\u7b26\u5e76\u4e14\u6240\u6709\u5b57\u7b26\u90fd\u662f\u5b57\u6bcd\u6216\u6570\u5b57\u5219\u8fd4 \u56de True\uff0c\u5426\u5219\u8fd4\u56de False</li> <li>str.isalpha() \u5982\u679c\u5b57\u7b26\u4e32\u81f3\u5c11\u6709\u4e00\u4e2a\u5b57\u7b26\u5e76\u4e14\u6240\u6709\u5b57\u7b26\u90fd\u662f\u5b57\u6bcd\u6216\u4e2d\u6587\u5b57\u5219\u8fd4\u56de True, \u5426\u5219\u8fd4\u56de False</li> <li>str.isdigit() \u5982\u679c\u5b57\u7b26\u4e32\u53ea\u5305\u542b\u6570\u5b57\u5219\u8fd4\u56de True \u5426\u5219\u8fd4\u56de False</li> <li>str.islower() \u5982\u679c\u5b57\u7b26\u4e32\u4e2d\u5305\u542b\u81f3\u5c11\u4e00\u4e2a\u533a\u5206\u5927\u5c0f\u5199\u7684\u5b57\u7b26\uff0c\u5e76\u4e14\u6240\u6709\u8fd9\u4e9b(\u533a\u5206\u5927\u5c0f\u5199\u7684)\u5b57\u7b26\u90fd\u662f\u5c0f\u5199\uff0c\u5219\u8fd4\u56de True\uff0c\u5426\u5219\u8fd4\u56de False</li> <li>str.isnumeric() \u5982\u679c\u5b57\u7b26\u4e32\u4e2d\u53ea\u5305\u542b\u6570\u5b57\u5b57\u7b26\uff0c\u5219\u8fd4\u56de True\uff0c\u5426\u5219\u8fd4\u56de False</li> <li>str.isspace() \u5982\u679c\u5b57\u7b26\u4e32\u4e2d\u53ea\u5305\u542b\u7a7a\u767d\uff0c\u5219\u8fd4\u56de True\uff0c\u5426\u5219\u8fd4\u56de False</li> <li>str.istitle() \u5982\u679c\u5b57\u7b26\u4e32\u662f\u6807\u9898\u5316\u7684(\u89c1 title())\u5219\u8fd4\u56de True\uff0c\u5426\u5219\u8fd4\u56de False</li> <li>str.isupper() \u5982\u679c\u5b57\u7b26\u4e32\u4e2d\u5305\u542b\u81f3\u5c11\u4e00\u4e2a\u533a\u5206\u5927\u5c0f\u5199\u7684\u5b57\u7b26\uff0c\u5e76\u4e14\u6240\u6709\u8fd9\u4e9b(\u533a\u5206\u5927\u5c0f\u5199\u7684)\u5b57\u7b26\u90fd\u662f\u5927\u5199\uff0c\u5219\u8fd4\u56de True\uff0c\u5426\u5219\u8fd4\u56de False</li> <li>str.join(seq) \u4ee5\u6307\u5b9a\u5b57\u7b26\u4e32\u4f5c\u4e3a\u5206\u9694\u7b26\uff0c\u5c06 seq \u4e2d\u6240\u6709\u7684\u5143\u7d20(\u7684\u5b57\u7b26\u4e32\u8868\u793a)\u5408\u5e76\u4e3a\u4e00\u4e2a\u65b0\u7684\u5b57\u7b26\u4e32</li> <li>len(string) \u8fd4\u56de\u5b57\u7b26\u4e32\u957f\u5ea6</li> <li>str.ljust(width[, fillchar]) \u8fd4\u56de\u4e00\u4e2a\u539f\u5b57\u7b26\u4e32\u5de6\u5bf9\u9f50,\u5e76\u4f7f\u7528 fillchar \u586b\u5145\u81f3\u957f\u5ea6 width \u7684\u65b0\u5b57\u7b26\u4e32\uff0cfillchar \u9ed8\u8ba4\u4e3a\u7a7a\u683c</li> <li>str.lower() \u8f6c\u6362\u5b57\u7b26\u4e32\u4e2d\u6240\u6709\u5927\u5199\u5b57\u7b26\u4e3a\u5c0f\u5199</li> <li>str.upper() \u8f6c\u6362\u5b57\u7b26\u4e32\u4e2d\u7684\u5c0f\u5199\u5b57\u6bcd\u4e3a\u5927\u5199</li> <li>str.replace(old, new [, max]) \u628a \u5c06\u5b57\u7b26\u4e32\u4e2d\u7684 old \u66ff\u6362\u6210 new,\u5982\u679c max \u6307\u5b9a\uff0c\u5219\u66ff\u6362\u4e0d\u8d85\u8fc7 max \u6b21</li> <li>str.split(str=\"\", num=string.count(str)) \u4ee5 str \u4e3a\u5206\u9694\u7b26\u622a\u53d6\u5b57\u7b26\u4e32\uff0c\u5982\u679c num \u6709\u6307\u5b9a\u503c\uff0c\u5219\u4ec5\u622a\u53d6 num+1 \u4e2a\u5b50\u5b57\u7b26\u4e32</li> <li>str.startswith(substr, beg=0,end=len(string)) \u68c0\u67e5\u5b57\u7b26\u4e32\u662f\u5426\u662f\u4ee5\u6307\u5b9a\u5b50\u5b57\u7b26\u4e32 substr \u5f00\u5934\uff0c\u662f\u5219\u8fd4\u56de True\uff0c\u5426\u5219\u8fd4\u56de False\u3002\u5982\u679cbeg \u548c end \u6307\u5b9a\u503c\uff0c\u5219\u5728\u6307\u5b9a\u8303\u56f4\u5185\u68c0\u67e5</li> <li>str.lstrip() \u622a\u6389\u5b57\u7b26\u4e32\u5de6\u8fb9\u7684\u7a7a\u683c\u6216\u6307\u5b9a\u5b57\u7b26</li> <li>str.rstrip() \u5220\u9664\u5b57\u7b26\u4e32\u672b\u5c3e\u7684\u7a7a\u683c\u6216\u6307\u5b9a\u5b57\u7b26</li> <li>str.strip([chars]) \u5728\u5b57\u7b26\u4e32\u4e0a\u6267\u884c lstrip()\u548c rstrip()</li> </ul> </li> </ul> <p>\u5e8f\u5217</p> <p>\u5185\u5bb9\u6709\u5e8f\u3001\u8fde\u7eed\uff0c\u53ef\u7528\u4e0b\u6807\u7d22\u5f15\u7684\u4e00\u7c7b\u6570\u636e\u5bb9\u5668\uff08\u4ee5\u4e0a\u4e09\u79cd\u6570\u636e\u7c7b\u578b\uff09\u3002</p> <p>\u5e8f\u5217\u5207\u7247: \u4ece\u4e00\u4e2a\u5e8f\u5217\u4e2d\u53d6\u51fa\u53e6\u4e00\u4e2a\u5e8f\u5217\uff0c\u4e0d\u4f1a\u5f71\u54cd\u5e8f\u5217\u672c\u8eab\uff0c\u800c\u662f\u5f97\u5230\u53e6\u4e00\u4e2a\u65b0\u7684\u5e8f\u5217</p> <p>Sequence[start_index:end_index:step]</p> <p>start_index: \u8d77\u59cb\u4e0b\u6807</p> <p>end_index: \u7ed3\u675f\u4e0b\u6807</p> <p>step: \u6b65\u957f\uff0c\u5982\u679c\u662f\u8d1f\u6570\u5c31\u53cd\u5411\u53d6</p>"},{"location":"python/data_type/#6","title":"6. \u96c6\u5408","text":""},{"location":"python/data_type/#7","title":"7. \u5b57\u5178","text":""},{"location":"python/python/","title":"Python\u4ecb\u7ecd","text":"<p>Tips</p> <ol> <li>\u89e3\u91ca\u5668\uff1a\u662f\u4e00\u79cd\u8ba1\u7b97\u673a\u7a0b\u5e8f\uff0c\u5b83\u5c06\u6bcf\u4e2a\u9ad8\u7ea7\u7a0b\u5e8f\u8bed\u53e5\u8f6c\u6362\u6210\u673a\u5668\u4ee3\u7801\u3002</li> <li>\u7f16\u8bd1\u5668\uff1a\u628a\u9ad8\u7ea7\u8bed\u8a00\u7f16\u5199\u7684\u7a0b\u5e8f\u8f6c\u6362\u6210\u673a\u5668\u7801\uff0c\u5c06\u4eba\u53ef\u8bfb\u7684\u4ee3\u7801\u8f6c\u6362\u6210\u8ba1\u7b97\u673a\u53ef\u8bfb\u7684\u4ee3\u7801\uff080\u548c1\uff09\u3002</li> <li>\u673a\u5668\u8bed\u8a00\uff1a\u673a\u5668\u8bed\u8a00\u662f\u4e00\u79cd\u7528\u4e8e\u8ba1\u7b97\u673a\u6216\u5176\u4ed6\u8bbe\u5907\u5185\u90e8\u4ea4\u6d41\u7684\u57fa\u672c\u8bed\u8a00\uff0c\u5b83\u7531\u4e00\u7cfb\u5217\u7684\u4e8c\u8fdb\u5236\u4ee3\u7801\uff080\u548c1\uff09\u7ec4\u6210\uff0c\u53ef\u4ee5\u88ab\u8ba1\u7b97\u673a\u6216\u5176\u4ed6\u8bbe\u5907\u76f4\u63a5\u7406\u89e3\u548c\u6267\u884c\u3002    \u673a\u5668\u8bed\u8a00\u662f\u6700\u5e95\u5c42\u7684\u8bed\u8a00\uff0c\u5b83\u4e0e\u786c\u4ef6\u5bc6\u5207\u76f8\u5173\uff0c\u4e0d\u540c\u7684\u786c\u4ef6\u6709\u4e0d\u540c\u7684\u673a\u5668\u8bed\u8a00\u3002\u673a\u5668\u8bed\u8a00\u7684\u4f18\u70b9\u662f\u6267\u884c\u901f\u5ea6\u6700\u5feb\uff0c\u63a7\u5236\u6700\u7cbe\u786e\uff0c\u7f3a\u70b9\u662f\u7f16\u5199\u6781\u5176\u56f0\u96be\uff0c\u53ef\u8bfb\u6027\u6781\u5dee\uff0c\u53ef\u79fb\u690d\u6027\u6781\u4f4e\u3002</li> <li>\u81ea\u7136\u8bed\u8a00\uff1a\u81ea\u7136\u8bed\u8a00\u662f\u4e00\u79cd\u7528\u4e8e\u4eba\u7c7b\u4ea4\u6d41\u7684\u81ea\u7136\u5f62\u6210\u7684\u8bed\u8a00\uff0c\u5b83\u7531\u4e00\u7cfb\u5217\u7684\u97f3\u7d20\uff0c\u8bcd\u6c47\uff0c\u53e5\u6cd5\u548c\u8bed\u4e49\u7ec4\u6210\uff0c\u53ef\u4ee5\u88ab\u4eba\u7c7b\u6216\u5176    \u4ed6\u751f\u7269\u7406\u89e3\u548c\u4f7f\u7528\u3002\u81ea\u7136\u8bed\u8a00\u6709\u5f88\u591a\u79cd\u7c7b\uff0c\u6bd4\u5982\u4e2d\u6587\uff0c\u82f1\u6587\uff0c\u6cd5\u6587\u7b49\u3002\u81ea\u7136\u8bed\u8a00\u7684\u4f18\u70b9\u662f\u8868\u8fbe\u4e30\u5bcc\uff0c\u7075\u6d3b\u591a\u53d8\uff0c    \u7f3a\u70b9\u662f\u89c4\u5219\u590d\u6742\uff0c\u4e0d\u4e00\u81f4\u6027\u591a\u3002</li> <li>\u7f16\u7a0b\u8bed\u8a00\uff1a\u7f16\u7a0b\u8bed\u8a00\u662f\u4e00\u79cd\u7528\u4e8e\u63a7\u5236\u8ba1\u7b97\u673a\u6216\u5176\u4ed6\u8bbe\u5907\u7684\u4eba\u9020\u8bed\u8a00\uff0c\u5b83\u7531\u4e00\u7cfb\u5217\u7684\u7b26\u53f7\u548c\u89c4\u5219\u7ec4\u6210\uff0c\u53ef\u4ee5\u88ab\u8ba1\u7b97\u673a\u6216\u5176\u4ed6\u8bbe\u5907\u7406\u89e3\u548c\u6267\u884c\u3002\u7f16\u7a0b\u8bed\u8a00\u53ef\u4ee5\u5206    \u4e3a\u4f4e\u7ea7\u8bed\u8a00\u548c\u9ad8\u7ea7\u8bed\u8a00\u3002\u4f4e\u7ea7\u8bed\u8a00\u662f\u4e00\u79cd\u63a5\u8fd1\u673a\u5668\u8bed\u8a00\u7684\u7f16\u7a0b\u8bed\u8a00\uff0c\u5b83\u76f4\u63a5\u6216\u95f4\u63a5\u5730\u4f7f\u7528\u4e8c\u8fdb\u5236\u4ee3\u7801\u6216\u5176\u4ed6\u786c\u4ef6\u76f8\u5173\u7684\u8868\u793a\u65b9\u5f0f\uff0c\u6bd4\u5982<code>\u6c47\u7f16\u8bed\u8a00</code>\u3002\u9ad8\u7ea7\u8bed\u8a00    \u662f\u4e00\u79cd\u63a5\u8fd1\u81ea\u7136\u8bed\u8a00\u7684\u7f16\u7a0b\u8bed\u8a00\uff0c\u5b83\u4f7f\u7528\u66f4\u62bd\u8c61\u548c\u901a\u7528\u7684\u8868\u793a\u65b9\u5f0f\uff0c\u6bd4\u5982C\uff0cJava\uff0cPython\u7b49\u3002\u4f4e\u7ea7\u8bed\u8a00\u7684\u4f18\u70b9\u662f\u6267\u884c\u901f\u5ea6\u5feb\uff0c\u63a7\u5236\u7cbe\u786e\uff0c\u7f3a\u70b9\u662f\u7f16\u5199\u56f0\u96be\uff0c    \u53ef\u8bfb\u6027\u5dee\uff0c\u53ef\u79fb\u690d\u6027\u4f4e\u3002\u9ad8\u7ea7\u8bed\u8a00\u7684\u4f18\u70b9\u662f\u7f16\u5199\u5bb9\u6613\uff0c\u53ef\u8bfb\u6027\u597d\uff0c\u53ef\u79fb\u690d\u6027\u9ad8\uff0c\u7f3a\u70b9\u662f\u6267\u884c\u901f\u5ea6\u6162\uff0c\u63a7\u5236\u7c97\u7cd9\u3002</li> <li>\u5f3a\u7c7b\u578b\u8bed\u8a00\uff1a\u5f3a\u7c7b\u578b\u8bed\u8a00\u6709\u66f4\u5f3a\u7684\u7c7b\u578b\u68c0\u67e5\u673a\u5236\uff0c\u8868\u8fbe\u5f0f\u8ba1\u7b97\u4e2d\u4f1a\u505a\u4e25\u683c\u7684\u7c7b\u578b\u68c0\u67e5</li> <li>\u5f31\u7c7b\u578b\u8bed\u8a00\uff1a\u5f31\u7c7b\u578b\u8bed\u8a00\u5141\u8bb8\u5404\u79cd\u53d8\u91cf\u7c7b\u578b\u95f4\u505a\u4e00\u4e9b\u8fd0\u7b97</li> <li>\u9759\u6001\u7c7b\u578b\u8bed\u8a00\uff1a\u5982\u679c\u7c7b\u578b\u68c0\u67e5\u53d1\u751f\u5728\u7f16\u8bd1\u9636\u6bb5\uff08compile time\uff09\uff0c\u90a3\u4e48\u662f\u9759\u6001\u7c7b\u578b\u8bed\u8a00\uff08statically typed languages\uff09</li> <li>\u52a8\u6001\u7c7b\u578b\u8bed\u8a00\uff1a\u5982\u679c\u7c7b\u578b\u68c0\u67e5\u53d1\u751f\u5728\u8fd0\u884c\u9636\u6bb5\uff08run time\uff09\uff0c\u90a3\u4e48\u662f\u52a8\u6001\u7c7b\u578b\u8bed\u8a00\uff08dynamically typed languages\uff09</li> <li>\u811a\u672c\u8bed\u8a00\uff1a\u811a\u672c\u8bed\u8a00\u662f\u4e00\u79cd\u7f16\u7a0b\u8bed\u8a00\uff0c\u7528\u6765\u63a7\u5236\u8f6f\u4ef6\u5e94\u7528\u7a0b\u5e8f\uff0c\u811a\u672c\u901a\u5e38\u4ee5\u6587\u672c\uff08\u5982ASCI\uff09\u4fdd\u5b58\uff0c\u53ea\u5728\u88ab\u8c03\u7528\u65f6\u8fdb\u884c\u89e3\u91ca\u6216\u7f16\u8bd1</li> </ol>"},{"location":"python/python/#1-python","title":"1. Python\u662f\u4ec0\u4e48","text":"<p>Python\u662f\u9762\u5411\u5bf9\u8c61\u7684\u89e3\u91ca\u578b\u3001\u52a8\u6001\u7c7b\u578b\u3001\u5f3a\u7c7b\u578b\u7684\u9ad8\u7ea7\u811a\u672c\u8bed\u8a00\uff0cPython\u89e3\u91ca\u5668\u4fdd\u7559\u4e86\u4e00\u90e8\u5206\u7f16\u8bd1\u529f\u80fd(.pyc)\uff0c\u5177\u6709\uff1a</p> <ul> <li>\u591a\u8bed\u8a00\u96c6\u6210\u6027</li> </ul> <p>\u53ef\u4ee5\u8f7b\u677e\u5730\u4e0e\u5176\u4ed6\u7f16\u7a0b\u8bed\u8a00\uff08\u5982C/C++\u3001Java\u3001JavaScript\u3001Rust\u7b49\uff09\u8fdb\u884c\u4ea4\u4e92\uff0c\u501f\u52a9\u76f8\u5e94\u7684\u5e93\u548c\u5de5\u5177\uff0c\u5b9e\u73b0\u4e0d\u540c\u8bed\u8a00\u4e4b\u95f4\u7684\u51fd\u6570\u8c03\u7528\u548c\u6570\u636e\u4f20\u9012</p> <ul> <li>\u5927\u91cf\u7684\u7b2c\u4e09\u65b9\u5e93\u548c\u6a21\u5757</li> </ul> <p>Python\u62e5\u6709\u5e9e\u5927\u800c\u6d3b\u8dc3\u7684\u5f00\u6e90\u793e\u533a\uff0c\u8fd9\u610f\u5473\u7740\u6709\u5927\u91cf\u7684\u7b2c\u4e09\u65b9\u5e93\u548c\u6a21\u5757\u53ef\u4ee5\u4f9b\u5f00\u53d1\u8005\u4f7f\u7528</p> <ul> <li>\u7b80\u6d01\u800c\u6613\u8bfb\u7684\u8bed\u6cd5</li> </ul> <p>Python\u4ee5\u5176\u7b80\u6d01\u800c\u6613\u8bfb\u7684\u8bed\u6cd5\u800c\u95fb\u540d\u3002\u76f8\u5bf9\u4e8e\u5176\u4ed6\u7f16\u7a0b\u8bed\u8a00\uff0cPython\u7684\u4ee3\u7801\u91cf\u901a\u5e38\u8981\u5c11\u5f97\u591a\uff0c\u800c\u4e14\u8bed\u6cd5\u7ed3\u6784\u6e05\u6670\u3001\u6613\u4e8e\u7406\u89e3\u3002</p> <ul> <li>\u8de8\u5e73\u53f0\u6027</li> </ul> <p>Python\u662f\u4e00\u79cd\u8de8\u5e73\u53f0\u7684\u7f16\u7a0b\u8bed\u8a00\uff0c\u53ef\u4ee5\u5728\u591a\u4e2a\u64cd\u4f5c\u7cfb\u7edf\u4e0a\u8fd0\u884c\uff0c\u5982Windows\u3001Linux\u3001MacOS\u7b49\u3002\u8fd9\u4f7f\u5f97\u5f00\u53d1\u8005\u80fd\u591f\u8f7b\u677e\u5730\u5728\u4e0d\u540c\u7684\u73af\u5883\u4e2d\u5f00\u53d1\u548c\u90e8\u7f72Python\u5e94\u7528\u7a0b\u5e8f</p> <ul> <li>\u5feb\u901f\u539f\u578b\u5f00\u53d1\u548c\u8fed\u4ee3</li> </ul> <p>Python\u5177\u6709\u5feb\u901f\u7684\u539f\u578b\u5f00\u53d1\u548c\u8fed\u4ee3\u80fd\u529b\u3002\u7531\u4e8e\u5176\u7b80\u6d01\u7684\u8bed\u6cd5\u548c\u4e30\u5bcc\u7684\u7b2c\u4e09\u65b9\u5e93\u652f\u6301\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u8fc5\u901f\u6784\u5efa\u539f\u578b\uff0c\u9a8c\u8bc1\u60f3\u6cd5\u548c\u6982\u5ff5\u3002Python\u63d0\u4f9b\u4e86\u5927\u91cf\u7684\u5f00\u53d1\u5de5\u5177\u548c\u6846\u67b6</p> <ul> <li>\u8de8\u9886\u57df\u5e94\u7528\u5e7f\u6cdb</li> </ul> <p>Python\u7684\u5e94\u7528\u9886\u57df\u975e\u5e38\u5e7f\u6cdb\uff0c\u51e0\u4e4e\u6db5\u76d6\u4e86\u6240\u6709\u7684\u6280\u672f\u9886\u57df\u3002\u65e0\u8bba\u662f\u79d1\u5b66\u8ba1\u7b97\u3001\u6570\u636e\u5206\u6790\u3001\u4eba\u5de5\u667a\u80fd\u3001\u673a\u5668\u5b66\u4e60\u8fd8\u662fWeb\u5f00\u53d1\u3001\u7f51\u7edc\u7f16\u7a0b\u3001\u81ea\u52a8\u5316\u811a\u672c\u7b49\uff0cPython\u90fd\u6709\u76f8\u5e94\u7684\u5de5\u5177\u548c\u5e93\u6765\u652f\u6301</p> <p>\u7b49\u7279\u70b9\uff0c\u6240\u4ee5Python\u53c8\u88ab\u6210\u4e3a\u80f6\u6c34\u8bed\u8a00\u3002</p>"},{"location":"ssh/ssh/","title":"Ssh","text":""},{"location":"ssh/ssh/#ssh","title":"ssh\u514d\u5bc6\u914d\u7f6e\u8bf4\u660e","text":""},{"location":"ssh/ssh/#_1","title":"\u4e00\u3001\u5b89\u88c5\u57fa\u7840\u7ec4\u4ef6","text":"<pre><code>yum install -y expect\n</code></pre>"},{"location":"ssh/ssh/#_2","title":"\u4e8c\u3001\u7f16\u5199\u811a\u672c","text":"<pre><code>cat &lt;&lt; FFF| tee ./ssh_withoutssh.sh\n#!/bin/bash\n\n[ ! -f $HOME/.ssh/id_rsa ] &amp;&amp; ssh-keygen -t rsa -b 2048 -N \"\" -f $HOME/.ssh/id_rsa\nread -s -p \"\u8bf7\u8f93\u5165\u5bc6\u7801:  \" passwd\ncat $HOME/.ssh/id_rsa.pub &gt;&gt;$HOME/.ssh/authorized_keys\nchmod 600 $HOME/.ssh/authorized_keys\nfor ip in $(awk '/^[0-9]/{print $1}' IP.config); do\n    #ssh-copy-id -o StrictHostKeyChecking=no -o CheckHostIP=no root@$ip\n    /usr/bin/expect &lt;&lt;EOF\n    spawn ssh-copy-id -o StrictHostKeyChecking=no -o CheckHostIP=no root@$ip \n    expect  {\n        \"yes/no\" { send \"yes\\r\";exp_continue }\n        \"password\" { send \"$passwd\\r\" }\n    }\n    expect eof\nEOF\n    # rsync -a $HOME/.ssh/id_rsa* $HOME/.ssh/authorized_keys -e 'ssh -o StrictHostKeyChecking=no -o CheckHostIP=no' root@$ip:/root/.ssh/\n    let ret+=$?\ndone\nFFF\n</code></pre>"},{"location":"ssh/ssh/#ip","title":"\u4e09\u3001\u521b\u5efa\u9700\u8981\u514d\u5bc6\u7684\u670d\u52a1\u5668IP\u6e05\u5355","text":"<pre><code>cat&gt;&gt;IP.config&lt;&lt;EOF\n192.168.0.1\n192.168.0.2\n\u7b49\u9700\u8981\u514d\u5bc6\u7684IP...\nEOF\n</code></pre>"},{"location":"ssh/ssh/#ssh_withoutsshsh","title":"\u56db\u3001\u8fd0\u884cssh_withoutssh.sh","text":"<pre><code>sh ssh_withoutssh.sh\n</code></pre>"},{"location":"tools/info/","title":"Info","text":"<p>\u8b66\u544a\u9ed8\u8ba4\u7c7b\u578b\u4ee5\u53ca\u672a\u77e5\u7c7b\u578b\u9650\u5b9a\u7b26\u7684\u540e\u5907\u662f note \uff08\u7b14\u8bb0\uff09\u3002\u5176\u4ed6\u8fd8\u6709\uff1a</p> <p>abstract, summary, tldr \u6458\u8981\uff0c\u603b\u7ed3 info, todo \u4fe1\u606f\uff0c\u5f85\u529e tip, hint, important \u63d0\u793a\uff0c\u6697\u793a\uff0c\u91cd\u8981 success, check, done \u6210\u529f\uff0c\u68c0\u67e5\uff0c\u5b8c\u6210 question, help, faq \u95ee\u9898\uff0c\u5e2e\u52a9\uff0c\u5e38\u89c1\u95ee\u9898\u89e3\u7b54 warning, caution, attention \u8b66\u544a\uff0c\u5c0f\u5fc3\uff0c\u6ce8\u610f failure, fail, missing \u5931\u8d25\uff0c\u9519\u8fc7 danger, error \u5371\u9669\uff0c\u9519\u8bef bug \u6f0f\u6d1e quote, cite \u5f15\u7528\uff0c\u63d0\u53ca</p>"},{"location":"tools/pycharm/","title":"Pycharm\u4f7f\u7528\u8bbe\u7f6e","text":""},{"location":"tools/pycharm/#1-py","title":"1. \u8bbe\u7f6epy\u6587\u4ef6\u6a21\u7248","text":"<p>\u4f9d\u6b21\u6253\u5f00<code>\u8bbe\u7f6e(Settings)</code> &gt;&gt; <code>\u7f16\u8f91\u5668(Editor)</code> &gt;&gt; <code>\u6587\u4ef6\u548c\u4ee3\u7801\u6a21\u7248(File and Code Templates)</code>\uff0c\u627e\u5230<code>Python Script</code></p> <p></p> <p>\u5728\u53f3\u4fa7\u8f93\u5165\u6846\u91cc\u5c31\u53ef\u4ee5\u586b\u5199\u6a21\u7248\u6837\u5f0f <pre><code>#!/usr/bin/env python\n# -*- coding: UTF-8 -*-\n# @Time : ${DATE} ${TIME}\n# @Author : chenshanb3\n# @Version : v1.0\n# @File : ${NAME}.py\n# @IDE : ${PROJECT_NAME}\n# @desc :\n\n\u53ef\u7528\u7684\u9884\u5b9a\u4e49\u6587\u4ef6\u6a21\u677f\u53d8\u91cf\u4e3a\uff1a\n\n${PROJECT_NAME} - \u5f53\u524d\u9879\u76ee\u7684\u540d\u79f0\u3002\n\n${NAME} - \u5728\u6587\u4ef6\u521b\u5efa\u8fc7\u7a0b\u4e2d\u5728\u201c\u65b0\u5efa\u6587\u4ef6\u201d\u5bf9\u8bdd\u6846\u4e2d\u6307\u5b9a\u7684\u65b0\u6587\u4ef6\u7684\u540d\u79f0\u3002\n\n${USER} - \u5f53\u524d\u7528\u6237\u7684\u767b\u5f55\u540d\u3002\n\n${DATE} - \u5f53\u524d\u7684\u7cfb\u7edf\u65e5\u671f\u3002\n\n${TIME} - \u5f53\u524d\u7cfb\u7edf\u65f6\u95f4\u3002\n\n${YEAR} - \u4eca\u5e74\u3002\n\n${MONTH} - \u5f53\u6708\u3002\n\n${DAY} - \u5f53\u6708\u7684\u5f53\u5929\u3002\n\n${HOUR} - \u76ee\u524d\u7684\u5c0f\u65f6\u3002\n\n${MINUTE} - \u5f53\u524d\u5206\u949f\u3002\n\n${PRODUCT_NAME} - \u5c06\u5728\u5176\u4e2d\u521b\u5efa\u6587\u4ef6\u7684IDE\u7684\u540d\u79f0\u3002\n\n${MONTH_NAME_SHORT} - \u6708\u4efd\u540d\u79f0\u7684\u524d3\u4e2a\u5b57\u6bcd\u3002 \u793a\u4f8b\uff1a1\u6708\uff0c2\u6708\u7b49\n\n${MONTH_NAME_FULL} - \u4e00\u4e2a\u6708\u7684\u5168\u540d\u3002 \u793a\u4f8b\uff1a1\u6708\uff0c2\u6708\u7b49\n</code></pre> \u4e0b\u6b21\u5728\u65b0\u5efa<code>.py</code>\u6587\u4ef6\u65f6\uff0c\u6587\u4ef6\u7684\u5934\u90e8\u5c31\u4f1a\u81ea\u52a8\u6dfb\u52a0\u6a21\u7248\u7684\u5185\u5bb9 </p>"},{"location":"tools/pycharm/#2","title":"2. \u8bbe\u7f6e\u5b9e\u65f6\u6a21\u7248","text":"<p>\u8f93\u5165\u6307\u5b9a\u7684\u5b57\u7b26\u5c55\u5f00\u4e3a\u81ea\u5b9a\u4e49\u4ee3\u7801\u7247\u6bb5\u7684\u529f\u80fd</p> <p>\u4f9d\u6b21\u6253\u5f00<code>\u8bbe\u7f6e(Settings)</code> &gt;&gt; <code>\u7f16\u8f91\u5668(Editor)</code> &gt;&gt; <code>\u5b9e\u65f6\u6a21\u7248(Live Templates)</code>\uff0c\u627e\u5230<code>Python</code>\u6240\u5728\u7684\u6a21\u7248\u7ec4</p> <p></p> <p>\u8fd9\u91cc\u4ee5\u4e0a\u9762\u7684\u6a21\u7248\u4e3a\u4f8b:</p> <p>\u9009\u62e9\u6dfb\u52a0<code>\u5b9e\u65f6\u6a21\u7248(Live Templates)</code></p> <p></p> <p>\u4f9d\u6b21\u9700\u8981\u586b\u5199\u7684\u4e09\u5904\u5185\u5bb9\uff1a<code>\u6307\u4ee4\u7f29\u5199</code>\u3001<code>\u6307\u4ee4\u63cf\u8ff0</code>\u3001<code>\u9700\u8981\u5c55\u5f00\u7684\u81ea\u5b9a\u4e49\u4ee3\u7801\u7247\u6bb5</code></p> <p></p> <p>\u6bd4\u5982\u6211\u8fd9\u91cc\u5c06\u6307\u4ee4\u7f29\u5199\u8bbe\u7f6e\u4e3a<code>desc</code>\uff0c\u6307\u4ee4\u8be6\u7ec6\u5185\u5bb9\u5982\u4e0b\uff1a</p> <p></p> <p>\u8fd9\u91cc\u7684<code>DATE</code>\u548c<code>TIME</code>\u90fd\u662f\u53d8\u91cf\uff0c\u548c\u4e0a\u9762\u7684\u6a21\u7248\u6587\u4ef6\u4e0d\u540c\u7684\u662f\uff0c\u8fd9\u91cc\u7684\u53d8\u91cf\u9700\u8981\u75282\u4e2a<code>$</code>\u5305\u8d77\u6765\uff0c\u7136\u540e\u9700\u8981\u8bbe\u7f6e\u6bcf\u4e2a\u53d8\u91cf\u7684\u8868\u8fbe\u5f0f</p> <p></p> <p>\u6dfb\u52a0\u5b8c\u6bd5\u540e\uff0c\u5728<code>python</code>\u6587\u4ef6\u91cc\u8f93\u5165\u7f29\u5199\u7684\u6307\u4ee4<code>desc</code>\u4f1a\u51fa\u73b0\u76f8\u5173\u7684\u63d0\u793a</p> <p></p> <p>\u6309\u4e0b\u56de\u8f66\u5c31\u53ef\u4ee5\u770b\u5230\u6211\u4eec\u8bbe\u7f6e\u7684\u4ee3\u7801\u7247\u6bb5\u4e86</p> <p></p>"},{"location":"tools/sub/","title":"surge \u61d2\u4eba\u914d\u7f6e","text":"<p>\u4e3a\u4ec0\u4e48\u4f1a\u6709\u6b64\u6559\u7a0b</p> <p>\u5e02\u9762\u4e0a\u7684\u8ba2\u9605\u5668\u5927\u90fd\u662f Surge 4 \u6216\u8005 Surge 5 \u901a\u7528\u90e8\u5206\u7684\u5f88\u5c11\u7684\u914d\u7f6e\uff0cSurge \u7684 MacOS \u7248\u672c\u548c iOS \u7248\u672c\u7684\u8bbe\u7f6e\u662f\u4e0d\u901a\u7528\u7684\uff0c \u6240\u4ee5\u6211\u5c31\u624b\u64b8\u4e86\u4e00\u904dsubconverter\u548csub-web\u7684\u6e90\u7801\uff0c\u589e\u52a0\u4e86\u5bf9 Surge 5 \u7684\u652f\u6301\uff0c\u589e\u52a0\u4e86surge-ios\u548csurge-macos\u4e24\u4e2a\u53c2\u6570\uff0c\u4ed3\u5e93\u5730\u5740\uff1a</p> <p>https://github.com/chenyk1219/subconverter-surge</p> <p>https://github.com/chenyk1219/sub-web</p> <p>\u8b66\u544a</p> <p>\u672c\u6559\u7a0b\u65e0\u9700\u770b\u61c2\u4ee3\u7801\uff0c\u65e0\u9700\u914d\u7f6e\u73af\u5883\uff0c\u53ea\u9700\u8981\u6709\u53f0\u7535\u8111\uff0c\u4f1a\u53cc\u51fb\u5c31\u884c\u3002</p> <p>\u672c\u6559\u7a0b\u5b8c\u5168\u672c\u5730\u5316\u8fd0\u884c\uff0c\u4e0d\u5b58\u5728\u8ba2\u9605\u6cc4\u6f0f\u7684\u98ce\u9669\uff0c\u53ef\u5b89\u5fc3\u98df\u7528\uff0c\u9664\u975e\u4f60\u7684\u7535\u8111\u88ab\u9ed1\u4e86\u3002</p> <p>\u63d0\u793a</p> <p>\u672c\u6587\u7684\u6559\u7a0b\u5206\u4e3a\u4e24\u90e8\u5206\uff0c\u7b2c\u4e00\u90e8\u5206\u662f\u65e0\u9700\u8ba2\u9605\u8f6c\u6362\uff0c\u76f4\u63a5\u50bb\u74dc\u5f0f\u914d\u7f6e\uff0c\u7b2c\u4e8c\u90e8\u5206\u662f\u672c\u5730\u8fd0\u884csubconverter\u8f6c\u6362\u5668\uff0c\u5982\u679c\u4f60\u53ea\u662f\u60f3\u8981\u61d2\u4eba\u914d\u7f6e\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u770b\u7b2c\u4e00\u90e8\u5206\u5c31\u884c\u3002 \u914d\u7f6e\u6587\u4ef6\u91cc\u6bcf\u4e2a\u914d\u7f6e\u90fd\u662f\u4ec0\u4e48\u610f\u601d\uff0c\u6709\u4ec0\u4e48\u4f5c\u7528\uff0c\u611f\u5174\u8da3\u7684\u8bdd\u53ef\u4ee5\u770b\u8fd9\u7bc7surge\u914d\u7f6e\u6587\u4ef6\u8be6\u89e3</p>"},{"location":"tools/sub/#1","title":"1. \u61d2\u4eba\u914d\u7f6e","text":"<ul> <li>\u4ed3\u5e93\u5730\u5740\uff1a</li> </ul> <p>https://github.com/chenyk1219/surge</p> <ul> <li>surge\u914d\u7f6e\u9010\u884c\u7ffb\u8bd1\u8bf4\u660e\uff1a</li> </ul> <p>\u914d\u7f6e\u8bf4\u660e</p> <ul> <li>iPhone\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\u5730\u5740\uff1a</li> </ul> <pre><code>https://raw.githubusercontent.com/chenyk1219/surge/master/iPhone.conf\n</code></pre> <ul> <li>mac\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\u5730\u5740\uff1a</li> </ul> <pre><code>https://raw.githubusercontent.com/chenyk1219/surge/master/Mac.conf\n</code></pre> <ul> <li>\u4f7f\u7528\u65b9\u6cd5</li> </ul> <p>\u5148\u63a5\u5c06\u673a\u573a\u81ea\u5df1\u7684\u94fe\u63a5\u5bfc\u5165\u5230\u5230Surge\u91cc\uff08\u4e00\u822c\u673a\u573a\u90fd\u652f\u6301\u4e00\u952e\u5bfc\u5165\uff09</p> <p></p> <p>\u9009\u62e9\u4ece<code>URL\u4e0b\u8f7d\u914d\u7f6e</code>\uff0c\u4e0b\u8f7d\u4e0a\u9762\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u5e76\u5e94\u7528 \u4e00\u952e\u5b89\u88c5 \u4e0a\u9762\u7684\u914d\u7f6e\u6587\u4ef6</p> <p> </p> <p>\u7136\u540e\u5728\u9996\u9875\u70b9\u51fb\u56fe\u6807\uff0c\u9009\u62e9<code>\u5728\u6587\u672c\u6a21\u5f0f\u4e2d\u7f16\u8f91</code></p> <p> </p> <p>\u5c06<code>[proxy]</code>\u91cc\u9762\u5f15\u7528\u7684\u6587\u4ef6\u540d\u66ff\u6362\u6210\u521a\u624d\u5bfc\u5165\u7684\u673a\u573a\u6587\u4ef6\u540d\u5c31\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u4e86</p> <p></p> <p>\u5982\u679c\u662f\u591a\u673a\u573a\u8ba2\u9605\uff0c\u5c31\u5f15\u5165\u591a\u4e2a\u914d\u7f6e\u6587\u4ef6</p> <pre><code>[proxy]\n#!include xxxx.conf, xxxx.conf, xxxx.conf\n</code></pre> <p>\u5343\u4e07\u4e0d\u80fd\u5199\u6210</p> <pre><code>[proxy]\n#!include xxxx.conf\n#!include xxxx.conf\n#!include xxxx.conf\n</code></pre>"},{"location":"tools/sub/#2","title":"2. \u672c\u5730\u8fd0\u884c\u8ba2\u9605\u8f6c\u6362\u5668","text":"<p>subconverter\u6559\u7a0b substore\u6559\u7a0b</p>"},{"location":"tools/sub/#3","title":"3. \u9ad8\u7ea7\u73a9\u6cd5","text":"<p>\u4e3a\u4e86\u611f\u8c22\u5927\u5bb6\u8010\u5fc3\u770b\u5230\u8fd9\uff0c\u6211\u5c31\u6765\u4e2a\u7ec8\u6781\u61d2\u4eba\u73a9\u6cd5\u5427</p> <p>\u4e0a\u9762\u7684\u50bb\u74dc\u5f0f\u7684\u914d\u7f6e\u662f\u4e00\u6b21\u6027\u7684\uff0c\u6bcf\u6b21\u4f7f\u7528\u90fd\u8981\u91cd\u65b0\u5bfc\u5165\u4e00\u4e0b\uff0c\u7136\u540e\u91cd\u65b0\u5199\u4e00\u4e0b\u5f15\u5165\u7684\u673a\u573a\u6587\u4ef6\uff0c\u5c31\u5f88\u4e0d\u61d2\u4eba</p> <p>\u6240\u4ee5\u4e0b\u9762\u5c31\u628a\u6587\u4ef6\u5728\u61d2\u4eba\u5316\u4e00\u70b9</p> <p>\u4e00\u952e\u5b89\u88c5\u6258\u7ba1\u7684\u61d2\u4eba\u914d\u7f6e</p> <pre><code>https://raw.githubusercontent.com/chenyk1219/surge/master/iPhoneAutoUpdate.conf\n</code></pre> <p>\u8fd9\u4e2a\u914d\u7f6e\u6587\u4ef6\u4e0d\u8981\u7f16\u8f91\u4e86\uff0c\u76f4\u63a5\u6258\u7ba1\uff0c\u6bcf\u5929\u81ea\u52a8\u66f4\u65b0\uff0c\u6216\u8005\u5de6\u6ed1\u624b\u52a8\u66f4\u65b0</p> <p></p> <p>\u8bb0\u5f97\u5148\u5207\u56de\u673a\u573a\u7684\u914d\u7f6e\uff0c\u518d\u5bfc\u5165\u4e0b\u9762\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u56e0\u4e3a\u8fd8\u6ca1\u6ca1\u5f15\u5165\u673a\u573a\u914d\u7f6e\u6587\u4ef6\u8bbf\u95ee\u4e0d\u4e86github</p> <p>\u4e00\u952e\u5bfc\u5165\u9700\u8981\u6539\u914d\u7f6e\u7684\u61d2\u4eba\u914d\u7f6e</p> <p><pre><code>https://raw.githubusercontent.com/chenyk1219/surge/master/iPhoneLocalEdit.conf\n</code></pre> surge\u6709bug\uff0c\u8bc6\u522b\u4e0d\u5230\u521a\u624d\u5bfc\u5165\u7684\u61d2\u4eba\u914d\u7f6e\uff0c\u9700\u8981\u65b0\u5efa<code>\u7a7a\u767d\u6587\u4ef6</code>\uff0c\u7136\u540e\u628a\u4e0b\u9762\u7684\u5185\u5bb9\u7c98\u8d34\u8fdb\u53bb\u5c31\u884c\u4e86\uff0c\u7b49surge\u4fee\u590d\u5427</p> <pre><code>[General]\n#!include iPhoneAutoUpdate.conf\n\n[Proxy]\n#!include\n\n[Proxy Group]\n#!include iPhoneAutoUpdate.conf\n\n[Rule]\n#!include iPhoneAutoUpdate.conf\n\n[URL Rewrite]\n#!include iPhoneAutoUpdate.conf\n</code></pre> <p>\u8fd9\u4e2a\u914d\u7f6e\u6587\u4ef6\u5c31\u548c\u4e0a\u9762\u7684\u4e00\u6837\uff0c\u6539\u4e00\u4e0bproxy\u91cc\u9762\u5f15\u7528\u7684\u673a\u573a\u7684\u6587\u4ef6\u540d\uff0c\u4ece\u5bfc\u5165\u7528\u5230\u8f6f\u4ef6\u5378\u8f7d\uff0c\u53ea\u9700\u8981\u6539\u8fd9\u4e48\u4e00\u6b21\u5c31\u53ef\u4ee5\u4e86</p> <p>\u8fd9\u4e0b\u591f\u61d2\u4eba\u4e86\u5427</p> <p>\u4e0b\u9762\u662fmac\u7684\u914d\u7f6e</p> <p>\u4e00\u952e\u5bfc\u5165\u5b89\u88c5\u6258\u7ba1\u7684\u61d2\u4eba\u914d\u7f6e</p> <pre><code>https://raw.githubusercontent.com/chenyk1219/surge/master/MacAutoUpdate.conf\n</code></pre> <p>\u8fd9\u4e2a\u914d\u7f6e\u6587\u4ef6\u4e0d\u8981\u7f16\u8f91\u4e86\uff0c\u76f4\u63a5\u6258\u7ba1\uff0c\u6bcf\u5929\u81ea\u52a8\u66f4\u65b0</p> <p>mac\u4e0d\u652f\u6301\u4e00\u952e\u5b89\u88c5\uff0c\u8bf7\u624b\u52a8\u590d\u5236\u5bfc\u5165</p> <pre><code>https://raw.githubusercontent.com/chenyk1219/surge/master/MacLocalEdit.conf\n</code></pre> <p>\u9700\u8981\u65b0\u5efa<code>\u7a7a\u767d\u6587\u4ef6</code>\uff0c\u7136\u540e\u628a\u4e0b\u9762\u7684\u5185\u5bb9\u7c98\u8d34\u8fdb\u53bb\u5c31\u884c\u4e86</p> <pre><code>[General]\n#!include MacAutoUpdate.conf\n\n[Proxy]\n#!include \n\n[Proxy Group]\n#!include MacAutoUpdate.conf\n\n[Rule]\n#!include MacAutoUpdate.conf\n\n[URL Rewrite]\n#!include MacAutoUpdate.conf\n</code></pre> <p>(\u6700\u540e\u76ae\u4e00\u4e0b\uff0cMac\u4e0d\u652f\u6301\u4e00\u952e\u5bfc\u5165\uff0c\u6240\u4ee5\u5c31iPhone\u5bfc\u5165\u4e00\u4e0b\uff0c\u7136\u540eiCloud\u540c\u6b65\u4e00\u4e0b\u3002)</p>"},{"location":"tools/sub/#4-vpn","title":"4. \u914d\u5408VPN\u4f7f\u7528","text":"<p>\u7531\u4e8e\u6211\u4eec\u7684\u4ee3\u7406\uff08Proxy\uff09\u5b57\u6bb5\u662f\u5f15\u7528\u673a\u573a\u7684\u914d\u7f6e\uff0c\u6240\u4ee5\u6211\u4eec\u65e0\u6cd5\u76f4\u63a5\u65b0\u589e\u4ee3\u7406\uff0c\u53ea\u80fd\u901a\u8fc7\u5f15\u7528\u7684\u65b9\u5f0f\u5f15\u5165vpn\u914d\u7f6e</p> <p></p> <ul> <li>\u767b\u9646vpn\uff0c\u5e76\u67e5\u627evpn\u7f51\u5361\u4fe1\u606f</li> </ul> <pre><code>ifconfig | grep inet | grep -v inet6\n</code></pre> <p></p> <p>\u89c2\u5bdf\u90a3\u4e2aIP\u5730\u5740\u50cf\u4f60\u4eec\u516c\u53f8\u5185\u7f51\u7684IP\u5730\u5740\uff0c\u6211\u8fd9\u91cc\u662f172.27\u7f51\u6bb5\u662f\u516c\u53f8\u5185\u7f51IP</p> <ul> <li>\u67e5ip\u7f51\u5361\u4fe1\u606f</li> </ul> <pre><code>ifconfig | grep -C 5 \"172.27\"\n</code></pre> <p></p> <p>\u6211\u8fd9\u91cc\u7f51\u5361\u7684\u540d\u5b57\u662f<code>utun11</code></p> <ul> <li>\u65b0\u5efavpn\u914d\u7f6e\u6587\u4ef6</li> </ul> <p>\u5728\u914d\u7f6e\u6587\u4ef6\u540c\u7ea7\u76ee\u5f55\u4e0b\u65b0\u5efa\u4e00\u4e2a<code>vpn.txt</code>\u6587\u4ef6\uff0c\u7136\u540e\u628a\u4e0b\u9762\u7684\u5185\u5bb9\u7c98\u8d34\u8fdb\u53bb</p> <pre><code>\ud83c\udfe0 en0 | \u5c40\u57df\u7f51= direct, interface=en0, allow-other-interface=false, test-url=\u5185\u7f51\u6d4b\u8bd5\u5730\u5740\n\ud83d\udedc vpn | \u5c40\u57df\u7f51= direct, interface=VPN\u7f51\u5361\u7684\u540d\u5b57, allow-other-interface=false, test-url=\u5185\u7f51\u57df\u540d\u6d4b\u8bd5\u5730\u5740\n</code></pre> <p>\u6bd4\u5982\u6211\u7684\u914d\u7f6e\uff1a</p> <p></p> <p>\u6211\u7528\u7684\u662f\u5185\u7f51IP\u5730\u5740\u4f5c\u4e3a\u6d4b\u8bd5\u5730\u5740\uff0c\u4f60\u4eec\u53ef\u4ee5\u7528\u4f60\u4eec\u516c\u53f8\u7684\u5185\u7f51\u57df\u540d\uff0c\u6216\u8005\u5185\u7f51\u7684IP\u5730\u5740\uff0c \u5efa\u8bae\u4f7f\u7528IP\u5730\u5740\uff0c\u56e0\u4e3a\u6709\u7684\u5185\u7f51\u57df\u540d\u53ef\u80fd\u4f1a\u9700\u8981\u5185\u7f51DNS\u89e3\u6790\uff0c\u624d\u80fd\u5f97\u5230\u6b63\u786e\u7684IP\u5730\u5740\uff0c\u4f46\u662f\u5728\u5bb6\u91cc\u8fde\u4e0d\u4e0a\u5185\u7f51\u7684DNS\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6d4b\u8bd5\u5931\u8d25\uff0c\u6240\u4ee5\u5efa\u8bae\u4f7f\u7528IP\u5730\u5740</p> <p>\u63d0\u793a</p> <p>\u5982\u679c\u4e0d\u77e5\u9053\u5185\u7f51IP\u5730\u5740\uff0c\u53ef\u4ee5\u5148\u9000\u51fasurge\uff0c\u53ea\u4f7f\u7528vpn\uff0c<code>ping xxx.com</code>\u4f7f\u7528ping\u547d\u4ee4ping\u4e00\u4e0b\u5185\u7f51\u57df\u540d</p> <p></p> <ul> <li>\u5f15\u5165vpn.txt\u6587\u4ef6</li> </ul> <p></p> <p>\u5728\u6b63\u5728\u4f7f\u7684\u4e3b\u914d\u7f6e\u6587\u4ef6\u7684<code>[Proxy Group]</code>\u914d\u7f6e\u9879\u91cc\u9762\u65b0\u589e\u4e00\u884c\uff1a</p> <pre><code>\ud83c\udfe2 \u5c40\u57df\u7f51 = url-test, policy-path=vpn.txt\n</code></pre> <p>\u4fdd\u5b58\uff0c\u5e94\u7528</p> <ul> <li>\u68c0\u67e5\u662f\u5426\u6210\u529f\uff0c\u6d4b\u8bd5\u4e00\u4e0b</li> </ul> <p></p> <ul> <li>\u914d\u7f6e\u5185\u7f51\u89c4\u5219</li> </ul> <p>\u5728\u914d\u7f6e\u6587\u4ef6\u7684\u540c\u7ea7\u76ee\u5f55\u4e0b\uff0c\u65b0\u5efa\u4e00\u4e2a<code>Lan.list</code>\u6587\u4ef6\uff0c\u5728<code>Lan.list</code>\u6587\u4ef6\u91cc\u914d\u4e0a\u5185\u7f51\u7684IP\u548c\u57df\u540d</p> <p></p> <ul> <li>\u5f15\u7528\u5185\u7f51\u89c4\u5219</li> </ul> <p>\u5728\u89c4\u5219\u9009\u9879\u5361\u91cc\u65b0\u589e\u89c4\u5219\u96c6</p> <p></p> <p>\u7b56\u7565\u9009\u62e9\u6211\u4eec\u65b0\u589e\u7684\u5c40\u57df\u7f51</p> <p></p> <p>\u9009\u62e9\u5916\u90e8\u89c4\u5219\u96c6\uff0c\u586b\u5165\u6211\u4eec\u65b0\u5efa\u7684<code>Lan.list</code></p> <p></p> <p>\u70b9\u51fb2\u6b21\u5b8c\u6210\u5c31\u53ef\u4ee5\u76f4\u63a5\u98df\u7528\u4e86</p>"},{"location":"tools/subconverter/","title":"\u672c\u5730\u8fd0\u884c\u8ba2\u9605\u8f6c\u6362\u5668 subconverter","text":"<p>\u65e0\u9700\u770b\u61c2\u4ee3\u7801\uff0c\u65e0\u9700\u914d\u7f6e\u4efb\u4f55\u5f00\u53d1\u73af\u5883\uff0c\u53ea\u9700\u8981\u7535\u8111\u3001\u4f1a\u53cc\u51fb\u5c31\u884c\uff01\uff01\uff01</p> <p>\u65e0\u9700\u770b\u61c2\u4ee3\u7801\uff0c\u65e0\u9700\u914d\u7f6e\u4efb\u4f55\u5f00\u53d1\u73af\u5883\uff0c\u53ea\u9700\u8981\u7535\u8111\u3001\u4f1a\u53cc\u51fb\u5c31\u884c\uff01\uff01\uff01</p> <p>\u65e0\u9700\u770b\u61c2\u4ee3\u7801\uff0c\u65e0\u9700\u914d\u7f6e\u4efb\u4f55\u5f00\u53d1\u73af\u5883\uff0c\u53ea\u9700\u8981\u7535\u8111\u3001\u4f1a\u53cc\u51fb\u5c31\u884c\uff01\uff01\uff01</p>"},{"location":"tools/subconverter/#1","title":"1. \u672c\u5730\u8fd0\u884c\u524d\u7aef","text":"<p>\u4e0b\u8f7drelease\u7f16\u8bd1\u597d\u7684\u6587\u4ef6https://github.com/chenyk1219/sub-web/releases\uff0c \u662f\u8fd9\u4e2adist.zip\u538b\u7f29\u5305\uff0c\u4e0d\u662fsource\u6e90\u7801\u5305</p> <p></p> <p>\u7136\u540e\u7f51\u4e0a\u4e0b\u8f7dvscode\u8f6f\u4ef6\uff0c\u4e0b\u8f7d\u5730\u5740\uff1ahttps://code.visualstudio.com/Download \u81ea\u5df1\u4e0b\u8f7d\u5bf9\u5e94\u7684\u5e73\u53f0\u7684\u67b6\u6784\u7684\u5305\u3002</p> <p></p> <p>\u7136\u540e\u53cc\u51fb\u4e0b\u8f7d\u7684\u5b89\u88c5\u5305\u8fd0\u884c\u5b89\u88c5</p> <p></p> <p>\u628a\u8fd9\u51e0\u4e2a\u52fe\u4e0a\uff0c\u65b9\u4fbf\u4f7f\u7528</p> <p></p> <p>\u7136\u540e\u6253\u5f00vscode\uff0c\u5b89\u88c5<code>Live Server</code>\u63d2\u4ef6</p> <p></p> <p>\u5b89\u88c5\u5b8c\u6210\u4ee5\u540e\uff0c\u4f60\u4f1a\u770b\u5230\u4e00\u4e2a<code>go live</code>\u56fe\u6807</p> <p></p> <p>\u8fdb\u5165\u6211\u4eec\u4e0b\u8f7d\u7684dist.zip\u89e3\u538b\u540e\u7684\u76ee\u5f55\u91cc\uff0c\u53f3\u51fb\u76ee\u5f55\u91cc\u7684dist\u6587\u4ef6\u5939\uff0c\u9009\u62e9\u7528vscode\u6253\u5f00</p> <p></p> <p>\u4fe1\u4efb\u4e00\u4e0b</p> <p></p> <p>\u70b9\u51fb\u8fd9\u4e2a<code>go live</code>\u56fe\u6807\uff0c\u7b49\u4e2a\u51e0\u79d2\u949f\uff0c\u5c31\u81ea\u52a8\u6253\u5f00\u4e86\u524d\u7aef\u9875\u9762</p> <p></p> <p></p>"},{"location":"tools/subconverter/#2","title":"2. \u672c\u5730\u8fd0\u884c\u540e\u7aef","text":"<p>\u4e0b\u8f7drelease\u7f16\u8bd1\u597d\u7684\u6587\u4ef6https://github.com/chenyk1219/subconverter-surge/releases\uff0c \u53f0\u5f0f\u673a\u4e00\u822c\u4e0b\u8fd9\u4e2a64\u4f4d\u7684win\u538b\u7f29\u5305</p> <p></p> <p>\u4e0b\u8f7d\u5b8c\u6210\u540e\u89e3\u538b\uff0c\u8fdb\u5165\u89e3\u538b\u76ee\u5f55\uff0c\u4f1a\u770b\u5230\u4e00\u4e2a<code>subconverter.exe</code>\u8fd0\u884c\u6587\u4ef6\uff0c\u53f3\u51fb\u7ba1\u7406\u5458\u8eab\u4efd\u8fd0\u884c\uff0c\u6216\u8005\u76f4\u63a5\u53cc\u51fb\u8fd0\u884c</p> <p></p> <p></p> <p>\u5230\u6b64\u5b8c\u7f8e\u672c\u5730\u8fd0\u884c\u4e86\u8ba2\u9605\u8f6c\u6362\u5668\uff0c\u53ef\u4ee5\u653e\u5fc3\u4f7f\u7528\u4e86</p>"},{"location":"tools/subconverter/#3","title":"3. \u5c40\u57df\u7f51\u4f7f\u7528\uff08\u7535\u8111\u8fd0\u884c\uff0c\u624b\u673a\u4f7f\u7528\uff09","text":"<p>\u7528vscode\u6253\u5f00\u540e\u7aef\u76ee\u5f55\uff0c\u70b9 \ud83d\udd0d \u5c06<code>127.0.0.1:25500</code> \u66ff\u6362\u4e3a\u53f0\u5f0f\u673a\u7684 <code>ip:25500</code>\uff0c\u4e00\u5171\u67094\u4e2a\u6587\u4ef6\u9700\u8981\u4fee\u6539</p> <p></p> <p>\u7136\u540e\u4fdd\u5b58\u91cd\u65b0\u8fd0\u884c<code>subconverter.exe</code></p> <p>\u524d\u7aef\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u8bbf\u95ee\u53f0\u5f0f\u673a\u7684 <code>ip:25500</code>\uff0c\u76f4\u63a5\u5728\u9875\u9762\u4e0a\u4fee\u6539\u5c31\u884c\u4e86</p> <p></p>"},{"location":"tools/subold/","title":"surge \u61d2\u4eba\u914d\u7f6e","text":"<p>\u4e3a\u4ec0\u4e48\u4f1a\u6709\u6b64\u6559\u7a0b</p> <p>\u5e02\u9762\u4e0a\u7684\u8ba2\u9605\u5668\u5927\u90fd\u662f Surge 4 \u6216\u8005 Surge 5 \u901a\u7528\u90e8\u5206\u7684\u5f88\u5c11\u7684\u914d\u7f6e\uff0cSurge \u7684 MacOS \u7248\u672c\u548c iOS \u7248\u672c\u7684\u8bbe\u7f6e\u662f\u4e0d\u901a\u7528\u7684\uff0c \u6240\u4ee5\u6211\u5c31\u624b\u64b8\u4e86\u4e00\u904dsubconverter\u548csub-web\u7684\u6e90\u7801\uff0c\u589e\u52a0\u4e86\u5bf9 Surge 5 \u7684\u652f\u6301\uff0c\u589e\u52a0\u4e86surge-ios\u548csurge-macos\u4e24\u4e2a\u53c2\u6570\uff0c\u4ed3\u5e93\u5730\u5740\uff1a</p> <p>https://github.com/chenyk1219/subconverter-surge</p> <p>https://github.com/chenyk1219/sub-web</p> <p>\u8b66\u544a</p> <p>\u672c\u6559\u7a0b\u65e0\u9700\u770b\u61c2\u4ee3\u7801\uff0c\u65e0\u9700\u914d\u7f6e\u73af\u5883\uff0c\u53ea\u9700\u8981\u6709\u53f0\u7535\u8111\uff0c\u4f1a\u53cc\u51fb\u5c31\u884c\u3002</p> <p>\u672c\u6559\u7a0b\u5b8c\u5168\u672c\u5730\u5316\u8fd0\u884c\uff0c\u4e0d\u5b58\u5728\u8ba2\u9605\u6cc4\u6f0f\u7684\u98ce\u9669\uff0c\u53ef\u5b89\u5fc3\u98df\u7528\uff0c\u9664\u975e\u4f60\u7684\u7535\u8111\u88ab\u9ed1\u4e86\u3002</p> <p>\u63d0\u793a</p> <p>\u672c\u6587\u7684\u6559\u7a0b\u5206\u4e3a\u4e24\u90e8\u5206\uff0c\u7b2c\u4e00\u90e8\u5206\u662f\u65e0\u9700\u8ba2\u9605\u8f6c\u6362\uff0c\u76f4\u63a5\u50bb\u74dc\u5f0f\u914d\u7f6e\uff0c\u7b2c\u4e8c\u90e8\u5206\u662f\u672c\u5730\u8fd0\u884csubconverter\u8f6c\u6362\u5668\uff0c\u5982\u679c\u4f60\u53ea\u662f\u60f3\u8981\u61d2\u4eba\u914d\u7f6e\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u770b\u7b2c\u4e00\u90e8\u5206\u5c31\u884c\u3002 \u914d\u7f6e\u6587\u4ef6\u91cc\u6bcf\u4e2a\u914d\u7f6e\u90fd\u662f\u4ec0\u4e48\u610f\u601d\uff0c\u6709\u4ec0\u4e48\u4f5c\u7528\uff0c\u611f\u5174\u8da3\u7684\u8bdd\u53ef\u4ee5\u770b\u8fd9\u7bc7surge\u914d\u7f6e\u6587\u4ef6\u8be6\u89e3</p>"},{"location":"tools/subold/#1","title":"1. \u61d2\u4eba\u914d\u7f6e","text":"<ul> <li>\u4ed3\u5e93\u5730\u5740\uff1a</li> </ul> <p>https://github.com/chenyk1219/surge</p> <ul> <li>surge\u914d\u7f6e\u9010\u884c\u7ffb\u8bd1\u8bf4\u660e\uff1a</li> </ul> <p>\u914d\u7f6e\u8bf4\u660e</p> <ul> <li>iPhone\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\u5730\u5740\uff1a</li> </ul> <pre><code>https://raw.githubusercontent.com/chenyk1219/surge/master/iPhone.conf\n</code></pre> <ul> <li>mac\u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\u5730\u5740\uff1a</li> </ul> <pre><code>https://raw.githubusercontent.com/chenyk1219/surge/master/Mac.conf\n</code></pre> <ul> <li>\u4f7f\u7528\u65b9\u6cd5</li> </ul> <p>\u5148\u63a5\u5c06\u673a\u573a\u81ea\u5df1\u7684\u94fe\u63a5\u5bfc\u5165\u5230\u5230Surge\u91cc\uff08\u4e00\u822c\u673a\u573a\u90fd\u652f\u6301\u4e00\u952e\u5bfc\u5165\uff09</p> <p></p> <p>\u9009\u62e9\u4ece<code>URL\u4e0b\u8f7d\u914d\u7f6e</code>\uff0c\u4e0b\u8f7d\u4e0a\u9762\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u5e76\u5e94\u7528 \u4e00\u952e\u5b89\u88c5 \u4e0a\u9762\u7684\u914d\u7f6e\u6587\u4ef6</p> <p></p> <p>\u7136\u540e\u9009\u62e9<code>\u5728\u6587\u672c\u6a21\u5f0f\u4e2d\u7f16\u8f91</code></p> <p></p> <p>\u5c06<code>[proxy]</code>\u91cc\u9762\u5f15\u7528\u7684\u6587\u4ef6\u540d\u66ff\u6362\u6210\u521a\u624d\u5bfc\u5165\u7684\u673a\u573a\u6587\u4ef6\u540d\u5c31\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528\u4e86</p> <p></p> <p>\u5982\u679c\u662f\u591a\u673a\u573a\u8ba2\u9605\uff0c\u5c31\u5f15\u5165\u591a\u4e2a\u914d\u7f6e\u6587\u4ef6</p> <pre><code>[proxy]\n#!include xxxx.conf, xxxx.conf, xxxx.conf\n</code></pre> <p>\u5343\u4e07\u4e0d\u80fd\u5199\u6210</p> <pre><code>[proxy]\n#!include xxxx.conf\n#!include xxxx.conf\n#!include xxxx.conf\n</code></pre>"},{"location":"tools/subold/#2","title":"2. \u672c\u5730\u8fd0\u884c\u8ba2\u9605\u8f6c\u6362\u5668","text":"<p>subconverter\u6559\u7a0b substore\u6559\u7a0b</p>"},{"location":"tools/subold/#3","title":"3. \u9ad8\u7ea7\u73a9\u6cd5","text":"<p>\u4e3a\u4e86\u611f\u8c22\u5927\u5bb6\u8010\u5fc3\u770b\u5230\u8fd9\uff0c\u6211\u5c31\u6765\u4e2a\u7ec8\u6781\u61d2\u4eba\u73a9\u6cd5\u5427</p> <p>\u4e0a\u9762\u7684\u50bb\u74dc\u5f0f\u7684\u914d\u7f6e\u662f\u4e00\u6b21\u6027\u7684\uff0c\u6bcf\u6b21\u4f7f\u7528\u90fd\u8981\u91cd\u65b0\u5bfc\u5165\u4e00\u4e0b\uff0c\u7136\u540e\u91cd\u65b0\u5199\u4e00\u4e0b\u5f15\u5165\u7684\u673a\u573a\u6587\u4ef6\uff0c\u5c31\u5f88\u4e0d\u61d2\u4eba</p> <p>\u6240\u4ee5\u4e0b\u9762\u5c31\u628a\u6587\u4ef6\u5728\u61d2\u4eba\u5316\u4e00\u70b9</p> <p>\u4e00\u952e\u5b89\u88c5\u6258\u7ba1\u7684\u61d2\u4eba\u914d\u7f6e</p> <pre><code>https://raw.githubusercontent.com/chenyk1219/surge/master/iPhoneAutoUpdate.conf\n</code></pre> <p>\u8fd9\u4e2a\u914d\u7f6e\u6587\u4ef6\u4e0d\u8981\u7f16\u8f91\u4e86\uff0c\u76f4\u63a5\u6258\u7ba1\uff0c\u6bcf\u5929\u81ea\u52a8\u66f4\u65b0\uff0c\u6216\u8005\u5de6\u6ed1\u624b\u52a8\u66f4\u65b0</p> <p></p> <p>\u8bb0\u5f97\u5148\u5207\u56de\u673a\u573a\u7684\u914d\u7f6e\uff0c\u518d\u5bfc\u5165\u4e0b\u9762\u7684\u914d\u7f6e\u6587\u4ef6\uff0c\u56e0\u4e3a\u8fd8\u6ca1\u6ca1\u5f15\u5165\u673a\u573a\u914d\u7f6e\u6587\u4ef6\u8bbf\u95ee\u4e0d\u4e86github</p> <p>\u4e00\u952e\u5bfc\u5165\u9700\u8981\u6539\u914d\u7f6e\u7684\u61d2\u4eba\u914d\u7f6e</p> <p><pre><code>https://raw.githubusercontent.com/chenyk1219/surge/master/iPhoneLocalEdit.conf\n</code></pre> surge\u6709bug\uff0c\u8bc6\u522b\u4e0d\u5230\u521a\u624d\u5bfc\u5165\u7684\u61d2\u4eba\u914d\u7f6e\uff0c\u9700\u8981\u65b0\u5efa<code>\u7a7a\u767d\u6587\u4ef6</code>\uff0c\u7136\u540e\u628a\u4e0b\u9762\u7684\u5185\u5bb9\u7c98\u8d34\u8fdb\u53bb\u5c31\u884c\u4e86\uff0c\u7b49surge\u4fee\u590d\u5427</p> <pre><code>[General]\n#!include iPhoneAutoUpdate.conf\n\n[Proxy]\n#!include\n\n[Proxy Group]\n#!include iPhoneAutoUpdate.conf\n\n[Rule]\n#!include iPhoneAutoUpdate.conf\n\n[URL Rewrite]\n#!include iPhoneAutoUpdate.conf\n</code></pre> <p>\u8fd9\u4e2a\u914d\u7f6e\u6587\u4ef6\u5c31\u548c\u4e0a\u9762\u7684\u4e00\u6837\uff0c\u6539\u4e00\u4e0bproxy\u91cc\u9762\u5f15\u7528\u7684\u673a\u573a\u7684\u6587\u4ef6\u540d\uff0c\u4ece\u5bfc\u5165\u7528\u5230\u8f6f\u4ef6\u5378\u8f7d\uff0c\u53ea\u9700\u8981\u6539\u8fd9\u4e48\u4e00\u6b21\u5c31\u53ef\u4ee5\u4e86</p> <p>\u8fd9\u4e0b\u591f\u61d2\u4eba\u4e86\u5427</p> <p>\u4e0b\u9762\u662fmac\u7684\u914d\u7f6e</p> <p>\u4e00\u952e\u5bfc\u5165\u5b89\u88c5\u6258\u7ba1\u7684\u61d2\u4eba\u914d\u7f6e</p> <pre><code>https://raw.githubusercontent.com/chenyk1219/surge/master/MacAutoUpdate.conf\n</code></pre> <p>\u8fd9\u4e2a\u914d\u7f6e\u6587\u4ef6\u4e0d\u8981\u7f16\u8f91\u4e86\uff0c\u76f4\u63a5\u6258\u7ba1\uff0c\u6bcf\u5929\u81ea\u52a8\u66f4\u65b0</p> <p>mac\u4e0d\u652f\u6301\u4e00\u952e\u5b89\u88c5\uff0c\u8bf7\u624b\u52a8\u590d\u5236\u5bfc\u5165</p> <pre><code>https://raw.githubusercontent.com/chenyk1219/surge/master/MacLocalEdit.conf\n</code></pre> <p>\u9700\u8981\u65b0\u5efa<code>\u7a7a\u767d\u6587\u4ef6</code>\uff0c\u7136\u540e\u628a\u4e0b\u9762\u7684\u5185\u5bb9\u7c98\u8d34\u8fdb\u53bb\u5c31\u884c\u4e86</p> <pre><code>[General]\n#!include MacAutoUpdate.conf\n\n[Proxy]\n#!include \n\n[Proxy Group]\n#!include MacAutoUpdate.conf\n\n[Rule]\n#!include MacAutoUpdate.conf\n\n[URL Rewrite]\n#!include MacAutoUpdate.conf\n</code></pre> <p>(\u6700\u540e\u76ae\u4e00\u4e0b\uff0cMac\u4e0d\u652f\u6301\u4e00\u952e\u5bfc\u5165\uff0c\u6240\u4ee5\u5c31iPhone\u5bfc\u5165\u4e00\u4e0b\uff0c\u7136\u540eiCloud\u540c\u6b65\u4e00\u4e0b\u3002)</p>"},{"location":"tools/subold/#4-vpn","title":"4. \u914d\u5408VPN\u4f7f\u7528","text":"<p>\u7531\u4e8e\u6211\u4eec\u7684\u4ee3\u7406\uff08Proxy\uff09\u5b57\u6bb5\u662f\u5f15\u7528\u673a\u573a\u7684\u914d\u7f6e\uff0c\u6240\u4ee5\u6211\u4eec\u65e0\u6cd5\u76f4\u63a5\u65b0\u589e\u4ee3\u7406\uff0c\u53ea\u80fd\u901a\u8fc7\u5f15\u7528\u7684\u65b9\u5f0f\u5f15\u5165vpn\u914d\u7f6e</p>"},{"location":"tools/substore/","title":"Sub-Store\u90e8\u7f72\u6559\u7a0b","text":""},{"location":"tools/substore/#sub-store","title":"\u672c\u5730\u8fd0\u884c\u8ba2\u9605\u8f6c\u6362\u5668 sub-store","text":"<p>\u670d\u52a1\u5668\u7248\u90e8\u7f72\uff0c\u65e0\u9700\u770b\u61c2\u4ee3\u7801\uff0c\u65e0\u9700\u914d\u7f6e\u4efb\u4f55\u5f00\u53d1\u73af\u5883 \uff01\uff01\uff01</p> <p>\u670d\u52a1\u5668\u7248\u90e8\u7f72\uff0c\u65e0\u9700\u770b\u61c2\u4ee3\u7801\uff0c\u65e0\u9700\u914d\u7f6e\u4efb\u4f55\u5f00\u53d1\u73af\u5883 \uff01\uff01\uff01</p> <p>\u670d\u52a1\u5668\u7248\u90e8\u7f72\uff0c\u65e0\u9700\u770b\u61c2\u4ee3\u7801\uff0c\u65e0\u9700\u914d\u7f6e\u4efb\u4f55\u5f00\u53d1\u73af\u5883 \uff01\uff01\uff01</p> <p>\u4e0b\u8f7drelease\u7f16\u8bd1\u597d\u7684\u6587\u4ef6https://github.com/chenyk1219/Sub-Store-Local\uff0c \u662f\u8fd9\u4e2adist.zip\u538b\u7f29\u5305\uff0c\u4e0d\u662fsource\u6e90\u7801\u5305</p> <p>\u8fd9\u6b21\u628a\u524d\u540e\u7aef\u90fd\u653e\u4e00\u8d77\u4e86\uff0c\u4e0d\u7528\u5230\u5904\u8dd1\u4e86\uff0cdist\u662f\u524d\u7aef\uff0c\u540e\u7aef\u5c31\u4e0b\u5bf9\u5e94\u7cfb\u7edf\u7684\u5c31\u884c\u4e86</p> <p></p>"},{"location":"tools/substore/#1","title":"1. \u8fd0\u884c\u540e\u7aef\uff08\u5747\u5728\u670d\u52a1\u5668\u4e0a\u6267\u884c\uff09","text":"<ul> <li>\u65b0\u5efa\u76ee\u5f55</li> </ul> <pre><code>mkdir /data/sub-store\n</code></pre> <ul> <li>\u4e0b\u8f7d\u6700\u65b0\u7684release\u5305</li> </ul> <pre><code>cd /data/sub-store\nwget https://github.com/chenyk1219/Sub-Store-Local/releases/latest/download/sub-store-linux.tar.gz\n</code></pre> <ul> <li>\u89e3\u538b</li> </ul> <pre><code>tar -zxvf sub-store-linux.tar.gz\n</code></pre> <ul> <li>\u914d\u7f6e\u670d\u52a1\u81ea\u542f\u52a8</li> </ul> <pre><code>cat &gt; /etc/systemd/system/sub-store.service &lt;&lt; EOF\n[Unit]\nDescription=A API For Sub-Store\nAfter=network.target\n\n[Service]\nType=simple\nExecStart=/data/sub-store/sub-store-linux/sub-store.bundle\nWorkingDirectory=/data/sub-store/sub-store-linux/\nRestart=always\nRestartSec=5\n\n[Install]\nWantedBy=multi-user.target\nEOF\n</code></pre> <ul> <li>\u542f\u52a8\u670d\u52a1</li> </ul> <pre><code>systemctl daemon-reload\nsystemctl enable sub-store\nsystemctl restart sub-store\n</code></pre> <ul> <li>\u67e5\u770b\u670d\u52a1\u72b6\u6001</li> </ul> <pre><code>systemctl status sub-store\n</code></pre>"},{"location":"tools/substore/#2-nginx","title":"2. \u8fd0\u884c\u524d\u7aef\uff08\u9700\u8981\u4f7f\u7528nginx\u4ee3\u7406\uff09","text":"<ul> <li>\u4e0b\u8f7d\u6700\u65b0\u7684release\u5305</li> </ul> <pre><code>cd /data/sub-store\nwget https://github.com/chenyk1219/Sub-Store-Local/releases/latest/download/dist.tar.gz\ntar -zxvf dist.tar.gz\n</code></pre> <ul> <li>\u5b89\u88c5nginx</li> </ul> <pre><code>yum install nginx -y\n</code></pre> <p>\u6216\u8005</p> <pre><code>sudo apt install nginx -y\n</code></pre> <ul> <li>\u914d\u7f6enginx</li> </ul> <pre><code>cat &gt; /etc/nginx/conf.d/sub-store.conf &lt;&lt; \\EOF\nserver {\n    listen 80;\n    server_name sub-store.xxxxx.com;\n\n    # \u53ef\u9009\u914d\u7f6e\uff0c\u4f7f\u7528https\n    # if ($scheme = http) {\n    #        return 301 https://$server_name$request_uri;\n    #    }\n\n    # listen       443 ssl;\n    # ssl_certificate      /path/to/cert/xxxx.com.pem;\n    # ssl_certificate_key  /path/to/cert/xxxx.com.key;\n    # ssl_session_cache    shared:SSL:10m;\n    # ssl_session_timeout  5m;\n    # ssl_ciphers  HIGH:!aNULL:!MD5;\n    # ssl_prefer_server_ciphers  on;\n    # gzip on;\n    # gzip_buffers 4 16k;\n    # gzip_http_version 1.0;\n    # gzip_comp_level 5;\n    # gzip_vary on;\n    # charset utf-8,gbk;\n\n    location / {\n        root /data/sub-store/dist/;\n        index index.html;\n    }\n\n}\nEOF\n</code></pre> <pre><code>cat &gt; /etc/nginx/conf.d/sub-store-api.conf &lt;&lt; \\EOF\nserver {\n    listen     80;\n    server_name  sub-store-api.xxxxx.com;\n    access_log off;\n\n    # \u53ef\u9009\u914d\u7f6e\uff0c\u4f7f\u7528https\n    # if ($scheme = http) {\n    #        return 301 https://$server_name$request_uri;\n    #    }\n\n    # listen       443 ssl;\n    # ssl_certificate      /path/to/cert/xxxx.com.pem;\n    # ssl_certificate_key  /path/to/cert/xxxx.com.key;\n    # ssl_session_cache    shared:SSL:10m;\n    # ssl_session_timeout  5m;\n    # ssl_ciphers  HIGH:!aNULL:!MD5;\n    # ssl_prefer_server_ciphers  on;\n    # gzip on;\n    # gzip_buffers 4 16k;\n    # gzip_http_version 1.0;\n    # gzip_comp_level 5;\n    # gzip_vary on;\n    # charset utf-8,gbk;\n\n    location / {\n        proxy_pass http://127.0.0.1:3000;\n        proxy_read_timeout 300s;\n        proxy_send_timeout 300s;\n        proxy_redirect   off;\n        proxy_set_header   Host $host:$proxy_port;\n        proxy_set_header   X-Real-IP $remote_addr;\n        proxy_set_header   X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection \"upgrade\";\n    }\n}\nEOF\n</code></pre> <ul> <li>\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\uff0c\u66ff\u6362\u81ea\u5df1\u7684\u57df\u540d</li> </ul> <pre><code>sed -i 's#sub-store.xxxxx.com#sub-store.test.com#g' /etc/nginx/conf.d/sub-store.conf\n</code></pre> <pre><code>sed -i 's#sub-store-api.xxxxx.com#sub-store-api.test.com#g' /etc/nginx/conf.d/sub-store-api.conf\n</code></pre> <pre><code>sed -i 's#http://0.0.0.0:3000#http://sub-store-api.test.com#g' /data/sub-store/dist/main.js\n</code></pre> <ul> <li>\u91cd\u542fnginx</li> </ul> <pre><code>systemctl restart nginx\n</code></pre> <p>\u9875\u9762\u76f4\u63a5\u8bbf\u95ee\u57df\u540d\u5373\u53ef</p>"}]}